<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>redisServer、redisDB与数据字典dict | 极客之道</title><meta name="keywords" content="redisServer,redisDB、redis dict,redis set原理"><meta name="author" content="ivansli"><meta name="copyright" content="ivansli"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="redisServer、redisDB与数据字典dict"><meta name="application-name" content="redisServer、redisDB与数据字典dict"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="redisServer、redisDB与数据字典dict"><meta property="og:url" content="https://blog.ivansli.com/2023/04/26/230426-redis-server/index.html"><meta property="og:site_name" content="极客之道"><meta property="og:description" content="redisServer、redisDB与数据字典dict"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://blog.ivansli.com/img/2023/04/redis-server-layout.png"><meta property="article:author" content="ivansli"><meta property="article:tag" content="伊万的小站,ivansli,编程技术,编程技术之道,编程原理,go开发技巧"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://blog.ivansli.com/img/2023/04/redis-server-layout.png"><meta name="description" content="redisServer、redisDB与数据字典dict"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://blog.ivansli.com/2023/04/26/230426-redis-server/"><link rel="preconnect"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: undefined,
  diytitle: undefined,
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: undefined,
  friends_vue_info: undefined,
  navMusic: false,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏃 脚踏实地行动派"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: ivansli","link":"链接: ","source":"来源: 极客之道","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: '/pluginsSrc/flickr-justified-gallery/dist/fjGallery.min.js',
      css: '/pluginsSrc/flickr-justified-gallery/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '极客之道',
  title: 'redisServer、redisDB与数据字典dict',
  postAI: '',
  pageFillDescription: '关于Redis, redisServer、redisDB与数据字典dict, redis client如何与数据库建立联系, Set指令执行过程代码追溯, Redis主要命令, 总结关于众所周知是流行的开源的使用语言开发的高性能基于内存的数据库它具有高效精心设计的底层数据结构同时支持多种数据类型等让其能够拥有的读写性能正是由于这些优势让它在众多数据库中脱颖而出支撑着众多互联网公司的海量业务那么你有没有想过它的底层是如何运作的本文从的底层结构入手并通过追溯指令操作过程与的过期时间窥探一下运行原理本文探讨的原理及源码均基于官方版本与数据字典服务是常见的架构设计即客户端通过与服务端建立连接后对存储在端的数据进行操作作为一个单独的进程运行在计算机上其对数据进行操作的工作线程为单线程减少了锁开销以及上下文的切换在进程内部有一个全局变量存储着当前的所有数据库数据以及其他众多信息在完全启动并对外服务之前对其进行初始化赋予默认值等操作它是运行时的一个重要数据入口从上图可知默认共拥有自定义最大为个数据库每个数据库包含有若干数据字典每个数据字典存储不同意义的数据例如是存储当前数据库所有的是存储当前数据库所有设置了过期时间的查询数据时从数据字典中获取判断获取的过期时间等操作时从数据字典中获取每个数据字典存储数据时考虑扩容等因素会有用个在未扩容时数据全部存储在否则可能在与都存有数据使用链表不同在经过计算之后发生碰撞会存储在同一个的链表中的形式存储具体的结构体如下所示代码位置全部变量整个所有重要数据的入口文件位置绝对可执行文件路径数据库数组包含多个数据库命令字典命令重命名前的命令表监听的端口号绑定的地址数组配置文件中数据库数量持久化混合持久化用于跟踪自上次保存以来对数据库的更改文件名称是否启用文件位置数据库结构体到键的槽数组仅在集群模式下使用文件位置数据字典结构体包含多个操作的函数句柄个分别存储的的数量大小的指数如何与数据库建立联系每当客户端与服务端建立连接之后为该客户端创建结构体用于存储客户端相关信息其中就包含客户端所使用的数据库默认为可以通过指令选择其他数据库然后服务端通过双向链表把这些连接起来存储到全局变量的字段中就这样客户端与数据库建立了联系后续就能直接找到对应数据库进行读写等操作代表客户端的结构体如下所示代码位置每当客户端发送命令到服务端之后通过找到对应的数据库然后进行相关操作指令执行过程代码追溯指令核心操作步骤如下图所示指令代码如下所示代码位置通过参数解析过期的过期时间过期时间单位以及操作标识符在真正设置的时候会被使用如果带有选项则对的进行编码执行通用的操作因为操作包含多个不同的指令但是底层操作基本相同需要设置的名称需要设置对应的内容文件位置通用的操作方法过期时间校验处理查找是否已经存在不存在则设置但是存在存在则设置但是不存在对于种异常情况处理设置时需要使用的标识符是否保持的过期时间不变是否已经存在真正的设置在这里事件通知设置的过期时间文件位置真正的设置的操作不存在则添加存在找到则覆盖引用计数注意没有标识的话需要试图去过期键空间删除正是下面的一行代码操作会发生类似的如下现象设置同时设置过期时间查询过期时间得到在第步设置的过期时间再次设置不设置过期时间这里会把第步设置的过期时间删掉查询过期时间发现永不过期主要命令从源码可知版本目前具有个命令代码如下所示代码位置位图集群连接通用哨兵服务从可以看到个命令的名称描述时间复杂度出现在哪个版本号执行该指令的函数句柄指令支持的参数等信息非常全面想到一句话官方文档是最好的书籍源码里包含所有问题总结本文通过讲解与数据字典之间的联系同时通过追溯指令的执行过程可以对其底层原理有更深的认知曾经有一位技术大咖说过若想学习一个好的开源项目那么首推无论从代码功能变量声明甚至从注释来看都无可挑剔',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-08 15:38:53',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">极客之道</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="anzhiyufont anzhiyu-icon-house-chimney faa-tada"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/booklist/"><i class="anzhiyufont anzhiyu-icon-book faa-tada"></i><span> 书单</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada"></i><span> 关于</span></a></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/" itemprop="url">中间件</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/redis/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>redis</span></a><a class="article-meta__tags" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>中间件</span></a></span></div></div><h1 class="post-title" itemprop="name headline">redisServer、redisDB与数据字典dict</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-04-26T02:00:00.000Z" title="发表于 2023-04-26 10:00:00">2023-04-26</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-07-08T07:38:53.166Z" title="更新于 2024-07-08 15:38:53">2024-07-08</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">24k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>144分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="redisServer、redisDB与数据字典dict"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为上海"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>上海</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/img/2023/04/redis-server-layout.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://blog.ivansli.com/2023/04/26/230426-redis-server/"><header><a class="post-meta-categories" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/" itemprop="url">中间件</a><a href="/tags/redis/" tabindex="-1" itemprop="url">redis</a><a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" tabindex="-1" itemprop="url">中间件</a><h1 id="CrawlerTitle" itemprop="name headline">redisServer、redisDB与数据字典dict</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">ivansli</span><time itemprop="dateCreated datePublished" datetime="2023-04-26T02:00:00.000Z" title="发表于 2023-04-26 10:00:00">2023-04-26</time><time itemprop="dateCreated datePublished" datetime="2024-07-08T07:38:53.166Z" title="更新于 2024-07-08 15:38:53">2024-07-08</time></header><h2 id="关于Redis"><a href="#关于Redis" class="headerlink" title="关于Redis"></a>关于Redis</h2><p>众所周知Redis是流行的、开源的，使用C语言开发的高性能，基于内存的key&#x2F;value数据库。它具有高效、精心设计的底层数据结构，同时支持多种数据类型(string、list、set、zset、hash、bitmap、geo、hyperloglog等)，让其能够拥有100K+&#x2F;s的读写性能。正是由于这些优势让它在众多数据库中脱颖而出，支撑着众多互联网公司的海量业务。<br>那么你有没有想过，它的底层是如何运作的？本文从RedisServer的底层结构入手，并通过追溯Set指令操作过程与key的过期时间窥探一下运行原理。</p>
<blockquote>
<p>本文探讨的原理及源码均基于Redis官方 v7.0 版本</p>
</blockquote>
<h2 id="redisServer、redisDB与数据字典dict"><a href="#redisServer、redisDB与数据字典dict" class="headerlink" title="redisServer、redisDB与数据字典dict"></a>redisServer、redisDB与数据字典dict</h2><p>Redis服务是常见的c&#x2F;s架构设计，即：Redis client客户端通过与Redis Server服务端建立连接后对存储在Redis Server端的数据进行操作。Redis Server作为一个单独的进程运行在计算机上，其对数据进行操作的工作线程为单线程，减少了锁开销以及上下文的切换。<br>在Redis Server进程内部有一个全局变量<code>redisServer</code>，存储着当前Redis Server的所有数据库、key&#x2F;value数据以及其他众多信息，在Redis Server完全启动并对外服务之前对其进行初始化、赋予默认值等操作，它是运行时的一个重要数据入口。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2023/04/redis-server-layout.png">

<p>从上图可知，Redis Server默认共拥有(0-15,自定义最大为0-255)16个数据库(<code>redisDB</code>)，每个数据库包含有若干数据字典(<code>dict</code>)，每个数据字典存储不同意义的数据。 例如：<code>redisDb.dict</code> 是存储当前数据库所有key&#x2F;value的keyspace，<code>redisDb.expires</code> 是存储当前数据库所有设置了过期时间的keyspace。</p>
<p>查询数据时从数据字典 <code>redisDb.dict</code> 中获取，判断&#x2F;获取key的过期时间等操作时从数据字典 <code>redisDb.expires</code> 中获取。每个数据字典存储数据时，考虑扩容等因素会有用2个 <code>ht_table</code>，在未扩容时数据全部存储在 <code>ht_table[0]</code>，否则可能在 <code>ht_table[0]</code>与<code>ht_table[1]</code> 都存有数据，<code>ht_table</code> 使用 <code>bucket+链表</code>(不同key在经过hash计算之后发生碰撞，会存储在同一个bucket的链表中)的形式存储具体的key&#x2F;value。</p>
<p>redisServer、redisDb、dict结构体如下所示：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 代码位置： src/server.c</span></span><br><span class="line"><span class="comment">// 全部变量，整个 Redis Server 所有重要数据的入口</span></span><br><span class="line"><span class="comment">/* Global vars */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">redisServer</span> <span class="title">server</span>;</span> <span class="comment">/* Server global state */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 文件位置： src/server.h</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">redisServer</span> &#123;</span></span><br><span class="line">    <span class="comment">/* General */</span></span><br><span class="line">    <span class="type">pid_t</span> pid;                  <span class="comment">/* Main process pid. */</span></span><br><span class="line">    <span class="type">pthread_t</span> main_thread_id;         <span class="comment">/* Main thread id */</span></span><br><span class="line">    <span class="type">char</span> *configfile;           <span class="comment">/* Absolute config file path, or NULL */</span></span><br><span class="line">    <span class="type">char</span> *executable;           <span class="comment">/* 绝对可执行文件路径 Absolute executable file path. */</span></span><br><span class="line">    <span class="type">char</span> **exec_argv;           <span class="comment">/* Executable argv vector (copy). */</span></span><br><span class="line">    <span class="type">int</span> dynamic_hz;             <span class="comment">/* Change hz value depending on # of clients. */</span></span><br><span class="line">    <span class="type">int</span> config_hz;              <span class="comment">/* Configured HZ value. May be different than</span></span><br><span class="line"><span class="comment">                                   the actual &#x27;hz&#x27; field value if dynamic-hz</span></span><br><span class="line"><span class="comment">                                   is enabled. */</span></span><br><span class="line">    <span class="type">mode_t</span> umask;               <span class="comment">/* The umask value of the process on startup */</span></span><br><span class="line">    <span class="type">int</span> hz;                     <span class="comment">/* serverCron() calls frequency in hertz */</span></span><br><span class="line">    <span class="type">int</span> in_fork_child;          <span class="comment">/* indication that this is a fork child */</span></span><br><span class="line">    redisDb *db;                <span class="comment">/* ！数据库数组，包含多个数据库 */</span></span><br><span class="line">    dict *commands;             <span class="comment">/* 命令字典 Command table */</span></span><br><span class="line">    dict *orig_commands;        <span class="comment">/* 命令重命名前的命令表 Command table before command renaming. */</span></span><br><span class="line">    aeEventLoop *el;</span><br><span class="line">    rax *errors;                <span class="comment">/* Errors table */</span></span><br><span class="line">    redisAtomic <span class="type">unsigned</span> <span class="type">int</span> lruclock; <span class="comment">/* Clock for LRU eviction */</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">sig_atomic_t</span> shutdown_asap; <span class="comment">/* Shutdown ordered by signal handler. */</span></span><br><span class="line">    <span class="type">mstime_t</span> shutdown_mstime;   <span class="comment">/* Timestamp to limit graceful shutdown. */</span></span><br><span class="line">    <span class="type">int</span> last_sig_received;      <span class="comment">/* Indicates the last SIGNAL received, if any (e.g., SIGINT or SIGTERM). */</span></span><br><span class="line">    <span class="type">int</span> shutdown_flags;         <span class="comment">/* Flags passed to prepareForShutdown(). */</span></span><br><span class="line">    <span class="type">int</span> activerehashing;        <span class="comment">/* Incremental rehash in serverCron() */</span></span><br><span class="line">    <span class="type">int</span> active_defrag_running;  <span class="comment">/* Active defragmentation running (holds current scan aggressiveness) */</span></span><br><span class="line">    <span class="type">char</span> *pidfile;              <span class="comment">/* PID file path */</span></span><br><span class="line">    <span class="type">int</span> arch_bits;              <span class="comment">/* 32 or 64 depending on sizeof(long) */</span></span><br><span class="line">    <span class="type">int</span> cronloops;              <span class="comment">/* Number of times the cron function run */</span></span><br><span class="line">    <span class="type">char</span> runid[CONFIG_RUN_ID_SIZE+<span class="number">1</span>];  <span class="comment">/* ID always different at every exec. */</span></span><br><span class="line">    <span class="type">int</span> sentinel_mode;          <span class="comment">/* True if this instance is a Sentinel. */</span></span><br><span class="line">    <span class="type">size_t</span> initial_memory_usage; <span class="comment">/* Bytes used after initialization. */</span></span><br><span class="line">    <span class="type">int</span> always_show_logo;       <span class="comment">/* Show logo even for non-stdout logging. */</span></span><br><span class="line">    <span class="type">int</span> in_exec;                <span class="comment">/* Are we inside EXEC? */</span></span><br><span class="line">    <span class="type">int</span> busy_module_yield_flags;         <span class="comment">/* Are we inside a busy module? (triggered by RM_Yield). see BUSY_MODULE_YIELD_ flags. */</span></span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *busy_module_yield_reply; <span class="comment">/* When non-null, we are inside RM_Yield. */</span></span><br><span class="line">    <span class="type">int</span> core_propagates;        <span class="comment">/* Is the core (in oppose to the module subsystem) is in charge of calling propagatePendingCommands? */</span></span><br><span class="line">    <span class="type">int</span> propagate_no_multi;     <span class="comment">/* True if propagatePendingCommands should avoid wrapping command in MULTI/EXEC */</span></span><br><span class="line">    <span class="type">int</span> module_ctx_nesting;     <span class="comment">/* moduleCreateContext() nesting level */</span></span><br><span class="line">    <span class="type">char</span> *ignore_warnings;      <span class="comment">/* Config: warnings that should be ignored. */</span></span><br><span class="line">    <span class="type">int</span> client_pause_in_transaction; <span class="comment">/* Was a client pause executed during this Exec? */</span></span><br><span class="line">    <span class="type">int</span> thp_enabled;                 <span class="comment">/* If true, THP is enabled. */</span></span><br><span class="line">    <span class="type">size_t</span> page_size;                <span class="comment">/* The page size of OS. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Modules */</span></span><br><span class="line">    dict *moduleapi;            <span class="comment">/* Exported core APIs dictionary for modules. */</span></span><br><span class="line">    dict *sharedapi;            <span class="comment">/* Like moduleapi but containing the APIs that</span></span><br><span class="line"><span class="comment">                                   modules share with each other. */</span></span><br><span class="line">    dict *module_configs_queue; <span class="comment">/* Dict that stores module configurations from .conf file until after modules are loaded during startup or arguments to loadex. */</span></span><br><span class="line">    <span class="built_in">list</span> *loadmodule_queue;     <span class="comment">/* List of modules to load at startup. */</span></span><br><span class="line">    <span class="type">int</span> module_pipe[<span class="number">2</span>];         <span class="comment">/* Pipe used to awake the event loop by module threads. */</span></span><br><span class="line">    <span class="type">pid_t</span> child_pid;            <span class="comment">/* PID of current child */</span></span><br><span class="line">    <span class="type">int</span> child_type;             <span class="comment">/* Type of current child */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Networking */</span></span><br><span class="line">    <span class="type">int</span> port;                   <span class="comment">/* TCP监听的端口号 TCP listening port */</span></span><br><span class="line">    <span class="type">int</span> tls_port;               <span class="comment">/* TLS listening port */</span></span><br><span class="line">    <span class="type">int</span> tcp_backlog;            <span class="comment">/* TCP listen() backlog */</span></span><br><span class="line">    <span class="type">char</span> *bindaddr[CONFIG_BINDADDR_MAX]; <span class="comment">/* 绑定的地址数组 Addresses we should bind to */</span></span><br><span class="line">    <span class="type">int</span> bindaddr_count;         <span class="comment">/* Number of addresses in server.bindaddr[] */</span></span><br><span class="line">    <span class="type">char</span> *bind_source_addr;     <span class="comment">/* Source address to bind on for outgoing connections */</span></span><br><span class="line">    <span class="type">char</span> *unixsocket;           <span class="comment">/* UNIX socket path */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> unixsocketperm; <span class="comment">/* UNIX socket permission (see mode_t) */</span></span><br><span class="line">    socketFds ipfd;             <span class="comment">/* TCP socket file descriptors */</span></span><br><span class="line">    socketFds tlsfd;            <span class="comment">/* TLS socket file descriptors */</span></span><br><span class="line">    <span class="type">int</span> sofd;                   <span class="comment">/* Unix socket file descriptor */</span></span><br><span class="line">    <span class="type">uint32_t</span> socket_mark_id;    <span class="comment">/* ID for listen socket marking */</span></span><br><span class="line">    socketFds cfd;              <span class="comment">/* Cluster bus listening socket */</span></span><br><span class="line">    <span class="built_in">list</span> *clients;              <span class="comment">/* List of active clients */</span></span><br><span class="line">    <span class="built_in">list</span> *clients_to_close;     <span class="comment">/* Clients to close asynchronously */</span></span><br><span class="line">    <span class="built_in">list</span> *clients_pending_write; <span class="comment">/* There is to write or install handler. */</span></span><br><span class="line">    <span class="built_in">list</span> *clients_pending_read;  <span class="comment">/* Client has pending read socket buffers. */</span></span><br><span class="line">    <span class="built_in">list</span> *slaves, *monitors;    <span class="comment">/* List of slaves and MONITORs */</span></span><br><span class="line">    client *current_client;     <span class="comment">/* Current client executing the command. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Stuff for client mem eviction */</span></span><br><span class="line">    clientMemUsageBucket* client_mem_usage_buckets;</span><br><span class="line"></span><br><span class="line">    rax *clients_timeout_table; <span class="comment">/* Radix tree for blocked clients timeouts. */</span></span><br><span class="line">    <span class="type">long</span> fixed_time_expire;     <span class="comment">/* If &gt; 0, expire keys against server.mstime. */</span></span><br><span class="line">    <span class="type">int</span> in_nested_call;         <span class="comment">/* If &gt; 0, in a nested call of a call */</span></span><br><span class="line">    rax *clients_index;         <span class="comment">/* Active clients dictionary by client ID. */</span></span><br><span class="line">    pause_type client_pause_type;      <span class="comment">/* True if clients are currently paused */</span></span><br><span class="line">    <span class="built_in">list</span> *postponed_clients;       <span class="comment">/* List of postponed clients */</span></span><br><span class="line">    <span class="type">mstime_t</span> client_pause_end_time;    <span class="comment">/* Time when we undo clients_paused */</span></span><br><span class="line">    pause_event *client_pause_per_purpose[NUM_PAUSE_PURPOSES];</span><br><span class="line">    <span class="type">char</span> neterr[ANET_ERR_LEN];   <span class="comment">/* Error buffer for anet.c */</span></span><br><span class="line">    dict *migrate_cached_sockets;<span class="comment">/* MIGRATE cached sockets */</span></span><br><span class="line">    redisAtomic <span class="type">uint64_t</span> next_client_id; <span class="comment">/* Next client unique ID. Incremental. */</span></span><br><span class="line">    <span class="type">int</span> protected_mode;         <span class="comment">/* Don&#x27;t accept external connections. */</span></span><br><span class="line">    <span class="type">int</span> io_threads_num;         <span class="comment">/* Number of IO threads to use. */</span></span><br><span class="line">    <span class="type">int</span> io_threads_do_reads;    <span class="comment">/* Read and parse from IO threads? */</span></span><br><span class="line">    <span class="type">int</span> io_threads_active;      <span class="comment">/* Is IO threads currently active? */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> events_processed_while_blocked; <span class="comment">/* processEventsWhileBlocked() */</span></span><br><span class="line">    <span class="type">int</span> enable_protected_configs;    <span class="comment">/* Enable the modification of protected configs, see PROTECTED_ACTION_ALLOWED_* */</span></span><br><span class="line">    <span class="type">int</span> enable_debug_cmd;            <span class="comment">/* Enable DEBUG commands, see PROTECTED_ACTION_ALLOWED_* */</span></span><br><span class="line">    <span class="type">int</span> enable_module_cmd;           <span class="comment">/* Enable MODULE commands, see PROTECTED_ACTION_ALLOWED_* */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* RDB / AOF loading information */</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">sig_atomic_t</span> loading; <span class="comment">/* We are loading data from disk if true */</span></span><br><span class="line">    <span class="keyword">volatile</span> <span class="type">sig_atomic_t</span> async_loading; <span class="comment">/* We are loading data without blocking the db being served */</span></span><br><span class="line">    <span class="type">off_t</span> loading_total_bytes;</span><br><span class="line">    <span class="type">off_t</span> loading_rdb_used_mem;</span><br><span class="line">    <span class="type">off_t</span> loading_loaded_bytes;</span><br><span class="line">    <span class="type">time_t</span> loading_start_time;</span><br><span class="line">    <span class="type">off_t</span> loading_process_events_interval_bytes;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Fields used only for stats */</span></span><br><span class="line">    <span class="type">time_t</span> stat_starttime;          <span class="comment">/* Server start time */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_numcommands;     <span class="comment">/* Number of processed commands */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_numconnections;  <span class="comment">/* Number of connections received */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_expiredkeys;     <span class="comment">/* Number of expired keys */</span></span><br><span class="line">    <span class="type">double</span> stat_expired_stale_perc; <span class="comment">/* Percentage of keys probably expired */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_expired_time_cap_reached_count; <span class="comment">/* Early expire cycle stops.*/</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_expire_cycle_time_used; <span class="comment">/* Cumulative microseconds used. */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_evictedkeys;     <span class="comment">/* Number of evicted keys (maxmemory) */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_evictedclients;  <span class="comment">/* Number of evicted clients */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_total_eviction_exceeded_time;  <span class="comment">/* Total time over the memory limit, unit us */</span></span><br><span class="line">    monotime stat_last_eviction_exceeded_time;  <span class="comment">/* Timestamp of current eviction start, unit us */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_keyspace_hits;   <span class="comment">/* Number of successful lookups of keys */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_keyspace_misses; <span class="comment">/* Number of failed lookups of keys */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_active_defrag_hits;      <span class="comment">/* number of allocations moved */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_active_defrag_misses;    <span class="comment">/* number of allocations scanned but not moved */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_active_defrag_key_hits;  <span class="comment">/* number of keys with moved allocations */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_active_defrag_key_misses;<span class="comment">/* number of keys scanned and not moved */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_active_defrag_scanned;   <span class="comment">/* number of dictEntries scanned */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_total_active_defrag_time; <span class="comment">/* Total time memory fragmentation over the limit, unit us */</span></span><br><span class="line">    monotime stat_last_active_defrag_time; <span class="comment">/* Timestamp of current active defrag start */</span></span><br><span class="line">    <span class="type">size_t</span> stat_peak_memory;        <span class="comment">/* Max used memory record */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_aof_rewrites;    <span class="comment">/* number of aof file rewrites performed */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_aofrw_consecutive_failures; <span class="comment">/* The number of consecutive failures of aofrw */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_rdb_saves;       <span class="comment">/* number of rdb saves performed */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_fork_time;       <span class="comment">/* Time needed to perform latest fork() */</span></span><br><span class="line">    <span class="type">double</span> stat_fork_rate;          <span class="comment">/* Fork rate in GB/sec. */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_total_forks;     <span class="comment">/* Total count of fork. */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_rejected_conn;   <span class="comment">/* Clients rejected because of maxclients */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_sync_full;       <span class="comment">/* Number of full resyncs with slaves. */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_sync_partial_ok; <span class="comment">/* Number of accepted PSYNC requests. */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_sync_partial_err;<span class="comment">/* Number of unaccepted PSYNC requests. */</span></span><br><span class="line">    <span class="built_in">list</span> *slowlog;                  <span class="comment">/* SLOWLOG list of commands */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> slowlog_entry_id;     <span class="comment">/* SLOWLOG current entry ID */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> slowlog_log_slower_than; <span class="comment">/* SLOWLOG time limit (to get logged) */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> slowlog_max_len;     <span class="comment">/* SLOWLOG max number of items logged */</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">malloc_stats</span> <span class="title">cron_malloc_stats</span>;</span> <span class="comment">/* sampled in serverCron(). */</span></span><br><span class="line">    redisAtomic <span class="type">long</span> <span class="type">long</span> stat_net_input_bytes; <span class="comment">/* Bytes read from network. */</span></span><br><span class="line">    redisAtomic <span class="type">long</span> <span class="type">long</span> stat_net_output_bytes; <span class="comment">/* Bytes written to network. */</span></span><br><span class="line">    redisAtomic <span class="type">long</span> <span class="type">long</span> stat_net_repl_input_bytes; <span class="comment">/* Bytes read during replication, added to stat_net_input_bytes in &#x27;info&#x27;. */</span></span><br><span class="line">    redisAtomic <span class="type">long</span> <span class="type">long</span> stat_net_repl_output_bytes; <span class="comment">/* Bytes written during replication, added to stat_net_output_bytes in &#x27;info&#x27;. */</span></span><br><span class="line">    <span class="type">size_t</span> stat_current_cow_peak;   <span class="comment">/* Peak size of copy on write bytes. */</span></span><br><span class="line">    <span class="type">size_t</span> stat_current_cow_bytes;  <span class="comment">/* Copy on write bytes while child is active. */</span></span><br><span class="line">    monotime stat_current_cow_updated;  <span class="comment">/* Last update time of stat_current_cow_bytes */</span></span><br><span class="line">    <span class="type">size_t</span> stat_current_save_keys_processed;  <span class="comment">/* Processed keys while child is active. */</span></span><br><span class="line">    <span class="type">size_t</span> stat_current_save_keys_total;  <span class="comment">/* Number of keys when child started. */</span></span><br><span class="line">    <span class="type">size_t</span> stat_rdb_cow_bytes;      <span class="comment">/* Copy on write bytes during RDB saving. */</span></span><br><span class="line">    <span class="type">size_t</span> stat_aof_cow_bytes;      <span class="comment">/* Copy on write bytes during AOF rewrite. */</span></span><br><span class="line">    <span class="type">size_t</span> stat_module_cow_bytes;   <span class="comment">/* Copy on write bytes during module fork. */</span></span><br><span class="line">    <span class="type">double</span> stat_module_progress;   <span class="comment">/* Module save progress. */</span></span><br><span class="line">    <span class="type">size_t</span> stat_clients_type_memory[CLIENT_TYPE_COUNT];<span class="comment">/* Mem usage by type */</span></span><br><span class="line">    <span class="type">size_t</span> stat_cluster_links_memory; <span class="comment">/* Mem usage by cluster links */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_unexpected_error_replies; <span class="comment">/* Number of unexpected (aof-loading, replica to master, etc.) error replies */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_total_error_replies; <span class="comment">/* Total number of issued error replies ( command + rejected errors ) */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_dump_payload_sanitizations; <span class="comment">/* Number deep dump payloads integrity validations. */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_io_reads_processed; <span class="comment">/* Number of read events processed by IO / Main threads */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_io_writes_processed; <span class="comment">/* Number of write events processed by IO / Main threads */</span></span><br><span class="line">    redisAtomic <span class="type">long</span> <span class="type">long</span> stat_total_reads_processed; <span class="comment">/* Total number of read events processed */</span></span><br><span class="line">    redisAtomic <span class="type">long</span> <span class="type">long</span> stat_total_writes_processed; <span class="comment">/* Total number of write events processed */</span></span><br><span class="line">    <span class="comment">/* The following two are used to track instantaneous metrics, like</span></span><br><span class="line"><span class="comment">     * number of operations per second, network traffic. */</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> last_sample_time; <span class="comment">/* Timestamp of last sample in ms */</span></span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> last_sample_count;<span class="comment">/* Count in last sample */</span></span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> samples[STATS_METRIC_SAMPLES];</span><br><span class="line">        <span class="type">int</span> idx;</span><br><span class="line">    &#125; inst_metric[STATS_METRIC_COUNT];</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_reply_buffer_shrinks; <span class="comment">/* Total number of output buffer shrinks */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stat_reply_buffer_expands; <span class="comment">/* Total number of output buffer expands */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Configuration */</span></span><br><span class="line">    <span class="type">int</span> verbosity;                  <span class="comment">/* Loglevel in redis.conf */</span></span><br><span class="line">    <span class="type">int</span> maxidletime;                <span class="comment">/* Client timeout in seconds */</span></span><br><span class="line">    <span class="type">int</span> tcpkeepalive;               <span class="comment">/* Set SO_KEEPALIVE if non-zero. */</span></span><br><span class="line">    <span class="type">int</span> active_expire_enabled;      <span class="comment">/* Can be disabled for testing purposes. */</span></span><br><span class="line">    <span class="type">int</span> active_expire_effort;       <span class="comment">/* From 1 (default) to 10, active effort. */</span></span><br><span class="line">    <span class="type">int</span> active_defrag_enabled;</span><br><span class="line">    <span class="type">int</span> sanitize_dump_payload;      <span class="comment">/* Enables deep sanitization for ziplist and listpack in RDB and RESTORE. */</span></span><br><span class="line">    <span class="type">int</span> skip_checksum_validation;   <span class="comment">/* Disable checksum validation for RDB and RESTORE payload. */</span></span><br><span class="line">    <span class="type">int</span> jemalloc_bg_thread;         <span class="comment">/* Enable jemalloc background thread */</span></span><br><span class="line">    <span class="type">size_t</span> active_defrag_ignore_bytes; <span class="comment">/* minimum amount of fragmentation waste to start active defrag */</span></span><br><span class="line">    <span class="type">int</span> active_defrag_threshold_lower; <span class="comment">/* minimum percentage of fragmentation to start active defrag */</span></span><br><span class="line">    <span class="type">int</span> active_defrag_threshold_upper; <span class="comment">/* maximum percentage of fragmentation at which we use maximum effort */</span></span><br><span class="line">    <span class="type">int</span> active_defrag_cycle_min;       <span class="comment">/* minimal effort for defrag in CPU percentage */</span></span><br><span class="line">    <span class="type">int</span> active_defrag_cycle_max;       <span class="comment">/* maximal effort for defrag in CPU percentage */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> active_defrag_max_scan_fields; <span class="comment">/* maximum number of fields of set/hash/zset/list to process from within the main dict scan */</span></span><br><span class="line">    <span class="type">size_t</span> client_max_querybuf_len; <span class="comment">/* Limit for client query buffer length */</span></span><br><span class="line">    <span class="type">int</span> dbnum;                      <span class="comment">/* 配置文件中数据库数量 Total number of configured DBs */</span></span><br><span class="line">    <span class="type">int</span> supervised;                 <span class="comment">/* 1 if supervised, 0 otherwise. */</span></span><br><span class="line">    <span class="type">int</span> supervised_mode;            <span class="comment">/* See SUPERVISED_* */</span></span><br><span class="line">    <span class="type">int</span> daemonize;                  <span class="comment">/* True if running as a daemon */</span></span><br><span class="line">    <span class="type">int</span> set_proc_title;             <span class="comment">/* True if change proc title */</span></span><br><span class="line">    <span class="type">char</span> *proc_title_template;      <span class="comment">/* Process title template format */</span></span><br><span class="line">    clientBufferLimitsConfig client_obuf_limits[CLIENT_TYPE_OBUF_COUNT];</span><br><span class="line">    <span class="type">int</span> pause_cron;                 <span class="comment">/* Don&#x27;t run cron tasks (debug) */</span></span><br><span class="line">    <span class="type">int</span> latency_tracking_enabled;   <span class="comment">/* 1 if extended latency tracking is enabled, 0 otherwise. */</span></span><br><span class="line">    <span class="type">double</span> *latency_tracking_info_percentiles; <span class="comment">/* Extended latency tracking info output percentile list configuration. */</span></span><br><span class="line">    <span class="type">int</span> latency_tracking_info_percentiles_len;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* AOF persistence aof持久化 */</span></span><br><span class="line">    <span class="type">int</span> aof_enabled;                <span class="comment">/* AOF configuration */</span></span><br><span class="line">    <span class="type">int</span> aof_state;                  <span class="comment">/* AOF_(ON|OFF|WAIT_REWRITE) */</span></span><br><span class="line">    <span class="type">int</span> aof_fsync;                  <span class="comment">/* Kind of fsync() policy */</span></span><br><span class="line">    <span class="type">char</span> *aof_filename;             <span class="comment">/* Basename of the AOF file and manifest file */</span></span><br><span class="line">    <span class="type">char</span> *aof_dirname;              <span class="comment">/* Name of the AOF directory */</span></span><br><span class="line">    <span class="type">int</span> aof_no_fsync_on_rewrite;    <span class="comment">/* Don&#x27;t fsync if a rewrite is in prog. */</span></span><br><span class="line">    <span class="type">int</span> aof_rewrite_perc;           <span class="comment">/* Rewrite AOF if % growth is &gt; M and... */</span></span><br><span class="line">    <span class="type">off_t</span> aof_rewrite_min_size;     <span class="comment">/* the AOF file is at least N bytes. */</span></span><br><span class="line">    <span class="type">off_t</span> aof_rewrite_base_size;    <span class="comment">/* AOF size on latest startup or rewrite. */</span></span><br><span class="line">    <span class="type">off_t</span> aof_current_size;         <span class="comment">/* AOF current size (Including BASE + INCRs). */</span></span><br><span class="line">    <span class="type">off_t</span> aof_last_incr_size;       <span class="comment">/* The size of the latest incr AOF. */</span></span><br><span class="line">    <span class="type">off_t</span> aof_fsync_offset;         <span class="comment">/* AOF offset which is already synced to disk. */</span></span><br><span class="line">    <span class="type">int</span> aof_flush_sleep;            <span class="comment">/* Micros to sleep before flush. (used by tests) */</span></span><br><span class="line">    <span class="type">int</span> aof_rewrite_scheduled;      <span class="comment">/* Rewrite once BGSAVE terminates. */</span></span><br><span class="line">    sds aof_buf;      <span class="comment">/* AOF buffer, written before entering the event loop */</span></span><br><span class="line">    <span class="type">int</span> aof_fd;       <span class="comment">/* File descriptor of currently selected AOF file */</span></span><br><span class="line">    <span class="type">int</span> aof_selected_db; <span class="comment">/* Currently selected DB in AOF */</span></span><br><span class="line">    <span class="type">time_t</span> aof_flush_postponed_start; <span class="comment">/* UNIX time of postponed AOF flush */</span></span><br><span class="line">    <span class="type">time_t</span> aof_last_fsync;            <span class="comment">/* UNIX time of last fsync() */</span></span><br><span class="line">    <span class="type">time_t</span> aof_rewrite_time_last;   <span class="comment">/* Time used by last AOF rewrite run. */</span></span><br><span class="line">    <span class="type">time_t</span> aof_rewrite_time_start;  <span class="comment">/* Current AOF rewrite start time. */</span></span><br><span class="line">    <span class="type">time_t</span> aof_cur_timestamp;       <span class="comment">/* Current record timestamp in AOF */</span></span><br><span class="line">    <span class="type">int</span> aof_timestamp_enabled;      <span class="comment">/* Enable record timestamp in AOF */</span></span><br><span class="line">    <span class="type">int</span> aof_lastbgrewrite_status;   <span class="comment">/* C_OK or C_ERR */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> aof_delayed_fsync;  <span class="comment">/* delayed AOF fsync() counter */</span></span><br><span class="line">    <span class="type">int</span> aof_rewrite_incremental_fsync;<span class="comment">/* fsync incrementally while aof rewriting? */</span></span><br><span class="line">    <span class="type">int</span> rdb_save_incremental_fsync;   <span class="comment">/* fsync incrementally while rdb saving? */</span></span><br><span class="line">    <span class="type">int</span> aof_last_write_status;      <span class="comment">/* C_OK or C_ERR */</span></span><br><span class="line">    <span class="type">int</span> aof_last_write_errno;       <span class="comment">/* Valid if aof write/fsync status is ERR */</span></span><br><span class="line">    <span class="type">int</span> aof_load_truncated;         <span class="comment">/* Don&#x27;t stop on unexpected AOF EOF. */</span></span><br><span class="line">    <span class="type">int</span> aof_use_rdb_preamble;       <span class="comment">/* 混合持久化 Specify base AOF to use RDB encoding on AOF rewrites. */</span></span><br><span class="line">    redisAtomic <span class="type">int</span> aof_bio_fsync_status; <span class="comment">/* Status of AOF fsync in bio job. */</span></span><br><span class="line">    redisAtomic <span class="type">int</span> aof_bio_fsync_errno;  <span class="comment">/* Errno of AOF fsync in bio job. */</span></span><br><span class="line">    aofManifest *aof_manifest;       <span class="comment">/* 用于跟踪AOFs Used to track AOFs. */</span></span><br><span class="line">    <span class="type">int</span> aof_disable_auto_gc;         <span class="comment">/* If disable automatically deleting HISTORY type AOFs?</span></span><br><span class="line"><span class="comment">                                        default no. (for testings). */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* RDB persistence */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> dirty;                <span class="comment">/* 自上次保存以来对数据库的更改 Changes to DB from the last save */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> dirty_before_bgsave;  <span class="comment">/* Used to restore dirty on failed BGSAVE */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> rdb_last_load_keys_expired;  <span class="comment">/* number of expired keys when loading RDB */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> rdb_last_load_keys_loaded;   <span class="comment">/* number of loaded keys when loading RDB */</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">saveparam</span> *<span class="title">saveparams</span>;</span>   <span class="comment">/* Save points array for RDB */</span></span><br><span class="line">    <span class="type">int</span> saveparamslen;              <span class="comment">/* Number of saving points */</span></span><br><span class="line">    <span class="type">char</span> *rdb_filename;             <span class="comment">/* RDB文件名称 Name of RDB file */</span></span><br><span class="line">    <span class="type">int</span> rdb_compression;            <span class="comment">/* Use compression in RDB? */</span></span><br><span class="line">    <span class="type">int</span> rdb_checksum;               <span class="comment">/* Use RDB checksum? */</span></span><br><span class="line">    <span class="type">int</span> rdb_del_sync_files;         <span class="comment">/* Remove RDB files used only for SYNC if</span></span><br><span class="line"><span class="comment">                                       the instance does not use persistence. */</span></span><br><span class="line">    <span class="type">time_t</span> lastsave;                <span class="comment">/* Unix time of last successful save */</span></span><br><span class="line">    <span class="type">time_t</span> lastbgsave_try;          <span class="comment">/* Unix time of last attempted bgsave */</span></span><br><span class="line">    <span class="type">time_t</span> rdb_save_time_last;      <span class="comment">/* Time used by last RDB save run. */</span></span><br><span class="line">    <span class="type">time_t</span> rdb_save_time_start;     <span class="comment">/* Current RDB save start time. */</span></span><br><span class="line">    <span class="type">int</span> rdb_bgsave_scheduled;       <span class="comment">/* BGSAVE when possible if true. */</span></span><br><span class="line">    <span class="type">int</span> rdb_child_type;             <span class="comment">/* Type of save by active child. */</span></span><br><span class="line">    <span class="type">int</span> lastbgsave_status;          <span class="comment">/* C_OK or C_ERR */</span></span><br><span class="line">    <span class="type">int</span> stop_writes_on_bgsave_err;  <span class="comment">/* Don&#x27;t allow writes if can&#x27;t BGSAVE */</span></span><br><span class="line">    <span class="type">int</span> rdb_pipe_read;              <span class="comment">/* RDB pipe used to transfer the rdb data */</span></span><br><span class="line">                                    <span class="comment">/* to the parent process in diskless repl. */</span></span><br><span class="line">    <span class="type">int</span> rdb_child_exit_pipe;        <span class="comment">/* Used by the diskless parent allow child exit. */</span></span><br><span class="line">    connection **rdb_pipe_conns;    <span class="comment">/* Connections which are currently the */</span></span><br><span class="line">    <span class="type">int</span> rdb_pipe_numconns;          <span class="comment">/* target of diskless rdb fork child. */</span></span><br><span class="line">    <span class="type">int</span> rdb_pipe_numconns_writing;  <span class="comment">/* Number of rdb conns with pending writes. */</span></span><br><span class="line">    <span class="type">char</span> *rdb_pipe_buff;            <span class="comment">/* In diskless replication, this buffer holds data */</span></span><br><span class="line">    <span class="type">int</span> rdb_pipe_bufflen;           <span class="comment">/* that was read from the rdb pipe. */</span></span><br><span class="line">    <span class="type">int</span> rdb_key_save_delay;         <span class="comment">/* Delay in microseconds between keys while</span></span><br><span class="line"><span class="comment">                                     * writing the RDB. (for testings). negative</span></span><br><span class="line"><span class="comment">                                     * value means fractions of microseconds (on average). */</span></span><br><span class="line">    <span class="type">int</span> key_load_delay;             <span class="comment">/* Delay in microseconds between keys while</span></span><br><span class="line"><span class="comment">                                     * loading aof or rdb. (for testings). negative</span></span><br><span class="line"><span class="comment">                                     * value means fractions of microseconds (on average). */</span></span><br><span class="line">    <span class="comment">/* Pipe and data structures for child -&gt; parent info sharing. */</span></span><br><span class="line">    <span class="type">int</span> child_info_pipe[<span class="number">2</span>];         <span class="comment">/* Pipe used to write the child_info_data. */</span></span><br><span class="line">    <span class="type">int</span> child_info_nread;           <span class="comment">/* Num of bytes of the last read from pipe */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Propagation of commands in AOF / replication */</span></span><br><span class="line">    redisOpArray also_propagate;    <span class="comment">/* Additional command to propagate. */</span></span><br><span class="line">    <span class="type">int</span> replication_allowed;        <span class="comment">/* Are we allowed to replicate? */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Logging */</span></span><br><span class="line">    <span class="type">char</span> *logfile;                  <span class="comment">/* Path of log file */</span></span><br><span class="line">    <span class="type">int</span> syslog_enabled;             <span class="comment">/* Is syslog enabled? */</span></span><br><span class="line">    <span class="type">char</span> *syslog_ident;             <span class="comment">/* Syslog ident */</span></span><br><span class="line">    <span class="type">int</span> syslog_facility;            <span class="comment">/* Syslog facility */</span></span><br><span class="line">    <span class="type">int</span> crashlog_enabled;           <span class="comment">/* Enable signal handler for crashlog.</span></span><br><span class="line"><span class="comment">                                     * disable for clean core dumps. */</span></span><br><span class="line">    <span class="type">int</span> memcheck_enabled;           <span class="comment">/* Enable memory check on crash. */</span></span><br><span class="line">    <span class="type">int</span> use_exit_on_panic;          <span class="comment">/* Use exit() on panic and assert rather than</span></span><br><span class="line"><span class="comment">                                     * abort(). useful for Valgrind. */</span></span><br><span class="line">    <span class="comment">/* Shutdown */</span></span><br><span class="line">    <span class="type">int</span> shutdown_timeout;           <span class="comment">/* Graceful shutdown time limit in seconds. */</span></span><br><span class="line">    <span class="type">int</span> shutdown_on_sigint;         <span class="comment">/* Shutdown flags configured for SIGINT. */</span></span><br><span class="line">    <span class="type">int</span> shutdown_on_sigterm;        <span class="comment">/* Shutdown flags configured for SIGTERM. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Replication (master) */</span></span><br><span class="line">    <span class="type">char</span> replid[CONFIG_RUN_ID_SIZE+<span class="number">1</span>];  <span class="comment">/* My current replication ID. */</span></span><br><span class="line">    <span class="type">char</span> replid2[CONFIG_RUN_ID_SIZE+<span class="number">1</span>]; <span class="comment">/* replid inherited from master*/</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> master_repl_offset;   <span class="comment">/* My current replication offset */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> second_replid_offset; <span class="comment">/* Accept offsets up to this for replid2. */</span></span><br><span class="line">    <span class="type">int</span> slaveseldb;                 <span class="comment">/* Last SELECTed DB in replication output */</span></span><br><span class="line">    <span class="type">int</span> repl_ping_slave_period;     <span class="comment">/* Master pings the slave every N seconds */</span></span><br><span class="line">    replBacklog *repl_backlog;      <span class="comment">/* Replication backlog for partial syncs */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> repl_backlog_size;    <span class="comment">/* Backlog circular buffer size */</span></span><br><span class="line">    <span class="type">time_t</span> repl_backlog_time_limit; <span class="comment">/* Time without slaves after the backlog</span></span><br><span class="line"><span class="comment">                                       gets released. */</span></span><br><span class="line">    <span class="type">time_t</span> repl_no_slaves_since;    <span class="comment">/* We have no slaves since that time.</span></span><br><span class="line"><span class="comment">                                       Only valid if server.slaves len is 0. */</span></span><br><span class="line">    <span class="type">int</span> repl_min_slaves_to_write;   <span class="comment">/* Min number of slaves to write. */</span></span><br><span class="line">    <span class="type">int</span> repl_min_slaves_max_lag;    <span class="comment">/* Max lag of &lt;count&gt; slaves to write. */</span></span><br><span class="line">    <span class="type">int</span> repl_good_slaves_count;     <span class="comment">/* Number of slaves with lag &lt;= max_lag. */</span></span><br><span class="line">    <span class="type">int</span> repl_diskless_sync;         <span class="comment">/* Master send RDB to slaves sockets directly. */</span></span><br><span class="line">    <span class="type">int</span> repl_diskless_load;         <span class="comment">/* Slave parse RDB directly from the socket.</span></span><br><span class="line"><span class="comment">                                     * see REPL_DISKLESS_LOAD_* enum */</span></span><br><span class="line">    <span class="type">int</span> repl_diskless_sync_delay;   <span class="comment">/* Delay to start a diskless repl BGSAVE. */</span></span><br><span class="line">    <span class="type">int</span> repl_diskless_sync_max_replicas;<span class="comment">/* Max replicas for diskless repl BGSAVE</span></span><br><span class="line"><span class="comment">                                         * delay (start sooner if they all connect). */</span></span><br><span class="line">    <span class="type">size_t</span> repl_buffer_mem;         <span class="comment">/* The memory of replication buffer. */</span></span><br><span class="line">    <span class="built_in">list</span> *repl_buffer_blocks;       <span class="comment">/* Replication buffers blocks list</span></span><br><span class="line"><span class="comment">                                     * (serving replica clients and repl backlog) */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Replication (slave) */</span></span><br><span class="line">    <span class="type">char</span> *masteruser;               <span class="comment">/* AUTH with this user and masterauth with master */</span></span><br><span class="line">    sds masterauth;                 <span class="comment">/* AUTH with this password with master */</span></span><br><span class="line">    <span class="type">char</span> *masterhost;               <span class="comment">/* Hostname of master */</span></span><br><span class="line">    <span class="type">int</span> masterport;                 <span class="comment">/* Port of master */</span></span><br><span class="line">    <span class="type">int</span> repl_timeout;               <span class="comment">/* Timeout after N seconds of master idle */</span></span><br><span class="line">    client *master;     <span class="comment">/* Client that is master for this slave */</span></span><br><span class="line">    client *cached_master; <span class="comment">/* Cached master to be reused for PSYNC. */</span></span><br><span class="line">    <span class="type">int</span> repl_syncio_timeout; <span class="comment">/* Timeout for synchronous I/O calls */</span></span><br><span class="line">    <span class="type">int</span> repl_state;          <span class="comment">/* Replication status if the instance is a slave */</span></span><br><span class="line">    <span class="type">off_t</span> repl_transfer_size; <span class="comment">/* Size of RDB to read from master during sync. */</span></span><br><span class="line">    <span class="type">off_t</span> repl_transfer_read; <span class="comment">/* Amount of RDB read from master during sync. */</span></span><br><span class="line">    <span class="type">off_t</span> repl_transfer_last_fsync_off; <span class="comment">/* Offset when we fsync-ed last time. */</span></span><br><span class="line">    connection *repl_transfer_s;     <span class="comment">/* Slave -&gt; Master SYNC connection */</span></span><br><span class="line">    <span class="type">int</span> repl_transfer_fd;    <span class="comment">/* Slave -&gt; Master SYNC temp file descriptor */</span></span><br><span class="line">    <span class="type">char</span> *repl_transfer_tmpfile; <span class="comment">/* Slave-&gt; master SYNC temp file name */</span></span><br><span class="line">    <span class="type">time_t</span> repl_transfer_lastio; <span class="comment">/* Unix time of the latest read, for timeout */</span></span><br><span class="line">    <span class="type">int</span> repl_serve_stale_data; <span class="comment">/* Serve stale data when link is down? */</span></span><br><span class="line">    <span class="type">int</span> repl_slave_ro;          <span class="comment">/* Slave is read only? */</span></span><br><span class="line">    <span class="type">int</span> repl_slave_ignore_maxmemory;    <span class="comment">/* If true slaves do not evict. */</span></span><br><span class="line">    <span class="type">time_t</span> repl_down_since; <span class="comment">/* Unix time at which link with master went down */</span></span><br><span class="line">    <span class="type">int</span> repl_disable_tcp_nodelay;   <span class="comment">/* Disable TCP_NODELAY after SYNC? */</span></span><br><span class="line">    <span class="type">int</span> slave_priority;             <span class="comment">/* Reported in INFO and used by Sentinel. */</span></span><br><span class="line">    <span class="type">int</span> replica_announced;          <span class="comment">/* If true, replica is announced by Sentinel */</span></span><br><span class="line">    <span class="type">int</span> slave_announce_port;        <span class="comment">/* Give the master this listening port. */</span></span><br><span class="line">    <span class="type">char</span> *slave_announce_ip;        <span class="comment">/* Give the master this ip address. */</span></span><br><span class="line">    <span class="type">int</span> propagation_error_behavior; <span class="comment">/* Configures the behavior of the replica</span></span><br><span class="line"><span class="comment">                                     * when it receives an error on the replication stream */</span></span><br><span class="line">    <span class="type">int</span> repl_ignore_disk_write_error;   <span class="comment">/* Configures whether replicas panic when unable to</span></span><br><span class="line"><span class="comment">                                         * persist writes to AOF. */</span></span><br><span class="line">    <span class="comment">/* The following two fields is where we store master PSYNC replid/offset</span></span><br><span class="line"><span class="comment">     * while the PSYNC is in progress. At the end we&#x27;ll copy the fields into</span></span><br><span class="line"><span class="comment">     * the server-&gt;master client structure. */</span></span><br><span class="line">    <span class="type">char</span> master_replid[CONFIG_RUN_ID_SIZE+<span class="number">1</span>];  <span class="comment">/* Master PSYNC runid. */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> master_initial_offset;           <span class="comment">/* Master PSYNC offset. */</span></span><br><span class="line">    <span class="type">int</span> repl_slave_lazy_flush;          <span class="comment">/* Lazy FLUSHALL before loading DB? */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Synchronous replication. */</span></span><br><span class="line">    <span class="built_in">list</span> *clients_waiting_acks;         <span class="comment">/* Clients waiting in WAIT command. */</span></span><br><span class="line">    <span class="type">int</span> get_ack_from_slaves;            <span class="comment">/* If true we send REPLCONF GETACK. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Limits */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> maxclients;            <span class="comment">/* Max number of simultaneous clients */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> maxmemory;   <span class="comment">/* Max number of memory bytes to use */</span></span><br><span class="line">    <span class="type">ssize_t</span> maxmemory_clients;       <span class="comment">/* Memory limit for total client buffers */</span></span><br><span class="line">    <span class="type">int</span> maxmemory_policy;           <span class="comment">/* Policy for key eviction */</span></span><br><span class="line">    <span class="type">int</span> maxmemory_samples;          <span class="comment">/* Precision of random sampling */</span></span><br><span class="line">    <span class="type">int</span> maxmemory_eviction_tenacity;<span class="comment">/* Aggressiveness of eviction processing */</span></span><br><span class="line">    <span class="type">int</span> lfu_log_factor;             <span class="comment">/* LFU logarithmic counter factor. */</span></span><br><span class="line">    <span class="type">int</span> lfu_decay_time;             <span class="comment">/* LFU counter decay factor. */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> proto_max_bulk_len;   <span class="comment">/* Protocol bulk length maximum size. */</span></span><br><span class="line">    <span class="type">int</span> oom_score_adj_values[CONFIG_OOM_COUNT];   <span class="comment">/* Linux oom_score_adj configuration */</span></span><br><span class="line">    <span class="type">int</span> oom_score_adj;                            <span class="comment">/* If true, oom_score_adj is managed */</span></span><br><span class="line">    <span class="type">int</span> disable_thp;                              <span class="comment">/* If true, disable THP by syscall */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Blocked clients */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> blocked_clients;   <span class="comment">/* # of clients executing a blocking cmd.*/</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> blocked_clients_by_type[BLOCKED_NUM];</span><br><span class="line">    <span class="built_in">list</span> *unblocked_clients; <span class="comment">/* list of clients to unblock before next loop */</span></span><br><span class="line">    <span class="built_in">list</span> *ready_keys;        <span class="comment">/* List of readyList structures for BLPOP &amp; co */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Client side caching. */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> tracking_clients;  <span class="comment">/* # of clients with tracking enabled.*/</span></span><br><span class="line">    <span class="type">size_t</span> tracking_table_max_keys; <span class="comment">/* Max number of keys in tracking table. */</span></span><br><span class="line">    <span class="built_in">list</span> *tracking_pending_keys; <span class="comment">/* tracking invalidation keys pending to flush */</span></span><br><span class="line">    <span class="comment">/* Sort parameters - qsort_r() is only available under BSD so we</span></span><br><span class="line"><span class="comment">     * have to take this state global, in order to pass it to sortCompare() */</span></span><br><span class="line">    <span class="type">int</span> sort_desc;</span><br><span class="line">    <span class="type">int</span> sort_alpha;</span><br><span class="line">    <span class="type">int</span> sort_bypattern;</span><br><span class="line">    <span class="type">int</span> sort_store;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Zip structure config, see redis.conf for more information  */</span></span><br><span class="line">    <span class="type">size_t</span> hash_max_listpack_entries;</span><br><span class="line">    <span class="type">size_t</span> hash_max_listpack_value;</span><br><span class="line">    <span class="type">size_t</span> set_max_intset_entries;</span><br><span class="line">    <span class="type">size_t</span> zset_max_listpack_entries;</span><br><span class="line">    <span class="type">size_t</span> zset_max_listpack_value;</span><br><span class="line">    <span class="type">size_t</span> hll_sparse_max_bytes;</span><br><span class="line">    <span class="type">size_t</span> stream_node_max_bytes;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> stream_node_max_entries;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* List parameters */</span></span><br><span class="line">    <span class="type">int</span> list_max_listpack_size;</span><br><span class="line">    <span class="type">int</span> list_compress_depth;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* time cache */</span></span><br><span class="line">    redisAtomic <span class="type">time_t</span> unixtime; <span class="comment">/* Unix time sampled every cron cycle. */</span></span><br><span class="line">    <span class="type">time_t</span> timezone;            <span class="comment">/* Cached timezone. As set by tzset(). */</span></span><br><span class="line">    <span class="type">int</span> daylight_active;        <span class="comment">/* Currently in daylight saving time. */</span></span><br><span class="line">    <span class="type">mstime_t</span> mstime;            <span class="comment">/* &#x27;unixtime&#x27; in milliseconds. */</span></span><br><span class="line">    <span class="type">ustime_t</span> ustime;            <span class="comment">/* &#x27;unixtime&#x27; in microseconds. */</span></span><br><span class="line">    <span class="type">size_t</span> blocking_op_nesting; <span class="comment">/* Nesting level of blocking operation, used to reset blocked_last_cron. */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> blocked_last_cron; <span class="comment">/* Indicate the mstime of the last time we did cron jobs from a blocking operation */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Pubsub */</span></span><br><span class="line">    dict *pubsub_channels;  <span class="comment">/* Map channels to list of subscribed clients */</span></span><br><span class="line">    dict *pubsub_patterns;  <span class="comment">/* A dict of pubsub_patterns */</span></span><br><span class="line">    <span class="type">int</span> notify_keyspace_events; <span class="comment">/* Events to propagate via Pub/Sub. This is an</span></span><br><span class="line"><span class="comment">                                   xor of NOTIFY_... flags. */</span></span><br><span class="line">    dict *pubsubshard_channels;  <span class="comment">/* Map shard channels to list of subscribed clients */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Cluster */</span></span><br><span class="line">    <span class="type">int</span> cluster_enabled;      <span class="comment">/* Is cluster enabled? 是否启用 cluster */</span></span><br><span class="line">    <span class="type">int</span> cluster_port;         <span class="comment">/* Set the cluster port for a node. */</span></span><br><span class="line">    <span class="type">mstime_t</span> cluster_node_timeout; <span class="comment">/* Cluster node timeout. */</span></span><br><span class="line">    <span class="type">char</span> *cluster_configfile; <span class="comment">/* Cluster auto-generated config file name. */</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">clusterState</span> *<span class="title">cluster</span>;</span>  <span class="comment">/* State of the cluster */</span></span><br><span class="line">    <span class="type">int</span> cluster_migration_barrier; <span class="comment">/* Cluster replicas migration barrier. */</span></span><br><span class="line">    <span class="type">int</span> cluster_allow_replica_migration; <span class="comment">/* Automatic replica migrations to orphaned masters and from empty masters */</span></span><br><span class="line">    <span class="type">int</span> cluster_slave_validity_factor; <span class="comment">/* Slave max data age for failover. */</span></span><br><span class="line">    <span class="type">int</span> cluster_require_full_coverage; <span class="comment">/* If true, put the cluster down if</span></span><br><span class="line"><span class="comment">                                          there is at least an uncovered slot.*/</span></span><br><span class="line">    <span class="type">int</span> cluster_slave_no_failover;  <span class="comment">/* Prevent slave from starting a failover</span></span><br><span class="line"><span class="comment">                                       if the master is in failure state. */</span></span><br><span class="line">    <span class="type">char</span> *cluster_announce_ip;  <span class="comment">/* IP address to announce on cluster bus. */</span></span><br><span class="line">    <span class="type">char</span> *cluster_announce_hostname;  <span class="comment">/* hostname to announce on cluster bus. */</span></span><br><span class="line">    <span class="type">int</span> cluster_preferred_endpoint_type; <span class="comment">/* Use the announced hostname when available. */</span></span><br><span class="line">    <span class="type">int</span> cluster_announce_port;     <span class="comment">/* base port to announce on cluster bus. */</span></span><br><span class="line">    <span class="type">int</span> cluster_announce_tls_port; <span class="comment">/* TLS port to announce on cluster bus. */</span></span><br><span class="line">    <span class="type">int</span> cluster_announce_bus_port; <span class="comment">/* bus port to announce on cluster bus. */</span></span><br><span class="line">    <span class="type">int</span> cluster_module_flags;      <span class="comment">/* Set of flags that Redis modules are able</span></span><br><span class="line"><span class="comment">                                      to set in order to suppress certain</span></span><br><span class="line"><span class="comment">                                      native Redis Cluster features. Check the</span></span><br><span class="line"><span class="comment">                                      REDISMODULE_CLUSTER_FLAG_*. */</span></span><br><span class="line">    <span class="type">int</span> cluster_allow_reads_when_down; <span class="comment">/* Are reads allowed when the cluster</span></span><br><span class="line"><span class="comment">                                        is down? */</span></span><br><span class="line">    <span class="type">int</span> cluster_config_file_lock_fd;   <span class="comment">/* cluster config fd, will be flock */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> cluster_link_sendbuf_limit_bytes;  <span class="comment">/* Memory usage limit on individual link send buffers*/</span></span><br><span class="line">    <span class="type">int</span> cluster_drop_packet_filter; <span class="comment">/* Debug config that allows tactically</span></span><br><span class="line"><span class="comment">                                   * dropping packets of a specific type */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Scripting */</span></span><br><span class="line">    client *script_caller;       <span class="comment">/* The client running script right now, or NULL */</span></span><br><span class="line">    <span class="type">mstime_t</span> busy_reply_threshold;  <span class="comment">/* Script / module timeout in milliseconds */</span></span><br><span class="line">    <span class="type">int</span> pre_command_oom_state;         <span class="comment">/* OOM before command (script?) was started */</span></span><br><span class="line">    <span class="type">int</span> script_disable_deny_script;    <span class="comment">/* Allow running commands marked &quot;no-script&quot; inside a script. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Lazy free */</span></span><br><span class="line">    <span class="type">int</span> lazyfree_lazy_eviction;</span><br><span class="line">    <span class="type">int</span> lazyfree_lazy_expire;</span><br><span class="line">    <span class="type">int</span> lazyfree_lazy_server_del;</span><br><span class="line">    <span class="type">int</span> lazyfree_lazy_user_del;</span><br><span class="line">    <span class="type">int</span> lazyfree_lazy_user_flush;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Latency monitor */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> latency_monitor_threshold;</span><br><span class="line">    dict *latency_events;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* ACLs */</span></span><br><span class="line">    <span class="type">char</span> *acl_filename;           <span class="comment">/* ACL Users file. NULL if not configured. */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> acllog_max_len; <span class="comment">/* Maximum length of the ACL LOG list. */</span></span><br><span class="line">    sds requirepass;              <span class="comment">/* Remember the cleartext password set with</span></span><br><span class="line"><span class="comment">                                     the old &quot;requirepass&quot; directive for</span></span><br><span class="line"><span class="comment">                                     backward compatibility with Redis &lt;= 5. */</span></span><br><span class="line">    <span class="type">int</span> acl_pubsub_default;      <span class="comment">/* Default ACL pub/sub channels flag */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Assert &amp; bug reporting */</span></span><br><span class="line">    <span class="type">int</span> watchdog_period;  <span class="comment">/* Software watchdog period in ms. 0 = off */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* System hardware info */</span></span><br><span class="line">    <span class="type">size_t</span> system_memory_size;  <span class="comment">/* Total memory in system as reported by OS */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* TLS Configuration */</span></span><br><span class="line">    <span class="type">int</span> tls_cluster;</span><br><span class="line">    <span class="type">int</span> tls_replication;</span><br><span class="line">    <span class="type">int</span> tls_auth_clients;</span><br><span class="line">    redisTLSContextConfig tls_ctx_config;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* cpu affinity */</span></span><br><span class="line">    <span class="type">char</span> *server_cpulist; <span class="comment">/* cpu affinity list of redis server main/io thread. */</span></span><br><span class="line">    <span class="type">char</span> *bio_cpulist; <span class="comment">/* cpu affinity list of bio thread. */</span></span><br><span class="line">    <span class="type">char</span> *aof_rewrite_cpulist; <span class="comment">/* cpu affinity list of aof rewrite process. */</span></span><br><span class="line">    <span class="type">char</span> *bgsave_cpulist; <span class="comment">/* cpu affinity list of bgsave process. */</span></span><br><span class="line">    <span class="comment">/* Sentinel config */</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sentinelConfig</span> *<span class="title">sentinel_config</span>;</span> <span class="comment">/* sentinel config to load at startup time. */</span></span><br><span class="line">    <span class="comment">/* Coordinate failover info */</span></span><br><span class="line">    <span class="type">mstime_t</span> failover_end_time; <span class="comment">/* Deadline for failover command. */</span></span><br><span class="line">    <span class="type">int</span> force_failover; <span class="comment">/* If true then failover will be forced at the</span></span><br><span class="line"><span class="comment">                         * deadline, otherwise failover is aborted. */</span></span><br><span class="line">    <span class="type">char</span> *target_replica_host; <span class="comment">/* Failover target host. If null during a</span></span><br><span class="line"><span class="comment">                                * failover then any replica can be used. */</span></span><br><span class="line">    <span class="type">int</span> target_replica_port; <span class="comment">/* Failover target port */</span></span><br><span class="line">    <span class="type">int</span> failover_state; <span class="comment">/* Failover state */</span></span><br><span class="line">    <span class="type">int</span> cluster_allow_pubsubshard_when_down; <span class="comment">/* Is pubsubshard allowed when the cluster</span></span><br><span class="line"><span class="comment">                                                is down, doesn&#x27;t affect pubsub global. */</span></span><br><span class="line">    <span class="type">long</span> reply_buffer_peak_reset_time; <span class="comment">/* The amount of time (in milliseconds) to wait between reply buffer peak resets */</span></span><br><span class="line">    <span class="type">int</span> reply_buffer_resizing_enabled; <span class="comment">/* Is reply buffer resizing enabled (1 by default) */</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 文件位置：src/server.h</span></span><br><span class="line"><span class="comment">// 数据库结构体</span></span><br><span class="line"><span class="comment">/* Redis database representation. There are multiple databases identified</span></span><br><span class="line"><span class="comment"> * by integers from 0 (the default database) up to the max configured</span></span><br><span class="line"><span class="comment"> * database. The database number is the &#x27;id&#x27; field in the structure. */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">redisDb</span> &#123;</span></span><br><span class="line">    dict *dict;                 <span class="comment">/* The keyspace for this DB */</span></span><br><span class="line">    dict *expires;              <span class="comment">/* Timeout of keys with a timeout set */</span></span><br><span class="line">    dict *blocking_keys;        <span class="comment">/* Keys with clients waiting for data (BLPOP)*/</span></span><br><span class="line">    dict *ready_keys;           <span class="comment">/* Blocked keys that received a PUSH */</span></span><br><span class="line">    dict *watched_keys;         <span class="comment">/* WATCHED keys for MULTI/EXEC CAS */</span></span><br><span class="line">    <span class="type">int</span> id;                     <span class="comment">/* Database ID */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> avg_ttl;          <span class="comment">/* Average TTL, just for stats */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> expires_cursor; <span class="comment">/* Cursor of the active expire cycle. */</span></span><br><span class="line">    <span class="built_in">list</span> *defrag_later;         <span class="comment">/* List of key names to attempt to defrag one by one, gradually. */</span></span><br><span class="line">    clusterSlotToKeyMapping *slots_to_keys; <span class="comment">/* 到键的槽数组。仅在集群模式下使用 Array of slots to keys. Only used in cluster mode (db 0). */</span></span><br><span class="line">&#125; redisDb;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 文件位置：src/dict.h</span></span><br><span class="line"><span class="comment">// 数据字典结构体</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">dict</span> &#123;</span></span><br><span class="line">    dictType *type; <span class="comment">// 包含多个操作的函数句柄</span></span><br><span class="line"></span><br><span class="line">    dictEntry **ht_table[<span class="number">2</span>];</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> ht_used[<span class="number">2</span>]; <span class="comment">// 2个hashtable分别存储的key的数量</span></span><br><span class="line"></span><br><span class="line">    <span class="type">long</span> rehashidx; <span class="comment">/* rehashing not in progress if rehashidx == -1 */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Keep small vars at end for optimal (minimal) struct padding */</span></span><br><span class="line">    <span class="type">int16_t</span> pauserehash; <span class="comment">/* If &gt;0 rehashing is paused (&lt;0 indicates coding error) */</span></span><br><span class="line">    <span class="type">signed</span> <span class="type">char</span> ht_size_exp[<span class="number">2</span>]; <span class="comment">/* table大小的指数 exponent of size. (size = 1&lt;&lt;exp) */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="redis-client如何与数据库建立联系"><a href="#redis-client如何与数据库建立联系" class="headerlink" title="redis client如何与数据库建立联系"></a>redis client如何与数据库建立联系</h2><p>每当redis client客户端与Redis Server服务端建立连接之后，Redis Server为该客户端创建结构体 client 用于存储客户端相关信息，其中就包含客户端所使用的数据库(默认为0，可以通过select指令选择其他数据库)。然后Redis Server服务端通过双向链表把这些client连接起来，存储到全局变量redisServer的clients字段中。就这样redis client客户端与Redis数据库建立了联系，后续就能直接找到对应数据库进行读、写等操作。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2023/04/redis-server-client.png">

<p>代表客户端的client结构体如下所示：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 代码位置：src/server.h</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">client</span> &#123;</span></span><br><span class="line">    <span class="type">uint64_t</span> id;            <span class="comment">/* Client incremental unique ID. */</span></span><br><span class="line">    <span class="type">uint64_t</span> flags;         <span class="comment">/* Client flags: CLIENT_* macros. */</span></span><br><span class="line">    connection *conn;</span><br><span class="line">    <span class="type">int</span> resp;               <span class="comment">/* RESP protocol version. Can be 2 or 3. */</span></span><br><span class="line">    redisDb *db;            <span class="comment">/* Pointer to currently SELECTed DB. */</span></span><br><span class="line">    robj *name;             <span class="comment">/* As set by CLIENT SETNAME. */</span></span><br><span class="line">    sds querybuf;           <span class="comment">/* Buffer we use to accumulate client queries. */</span></span><br><span class="line">    <span class="type">size_t</span> qb_pos;          <span class="comment">/* The position we have read in querybuf. */</span></span><br><span class="line">    <span class="type">size_t</span> querybuf_peak;   <span class="comment">/* Recent (100ms or more) peak of querybuf size. */</span></span><br><span class="line">    <span class="type">int</span> argc;               <span class="comment">/* Num of arguments of current command. */</span></span><br><span class="line">    robj **argv;            <span class="comment">/* Arguments of current command. */</span></span><br><span class="line">    <span class="type">int</span> argv_len;           <span class="comment">/* Size of argv array (may be more than argc) */</span></span><br><span class="line">    <span class="type">int</span> original_argc;      <span class="comment">/* Num of arguments of original command if arguments were rewritten. */</span></span><br><span class="line">    robj **original_argv;   <span class="comment">/* Arguments of original command if arguments were rewritten. */</span></span><br><span class="line">    <span class="type">size_t</span> argv_len_sum;    <span class="comment">/* Sum of lengths of objects in argv list. */</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">redisCommand</span> *<span class="title">cmd</span>, *<span class="title">lastcmd</span>;</span>  <span class="comment">/* Last command executed. */</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">redisCommand</span> *<span class="title">realcmd</span>;</span> <span class="comment">/* The original command that was executed by the client,</span></span><br><span class="line"><span class="comment">                                     Used to update error stats in case the c-&gt;cmd was modified</span></span><br><span class="line"><span class="comment">                                     during the command invocation (like on GEOADD for example). */</span></span><br><span class="line">    user *user;             <span class="comment">/* User associated with this connection. If the</span></span><br><span class="line"><span class="comment">                               user is set to NULL the connection can do</span></span><br><span class="line"><span class="comment">                               anything (admin). */</span></span><br><span class="line">    <span class="type">int</span> reqtype;            <span class="comment">/* Request protocol type: PROTO_REQ_* */</span></span><br><span class="line">    <span class="type">int</span> multibulklen;       <span class="comment">/* Number of multi bulk arguments left to read. */</span></span><br><span class="line">    <span class="type">long</span> bulklen;           <span class="comment">/* Length of bulk argument in multi bulk request. */</span></span><br><span class="line">    <span class="built_in">list</span> *reply;            <span class="comment">/* List of reply objects to send to the client. */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> reply_bytes; <span class="comment">/* Tot bytes of objects in reply list. */</span></span><br><span class="line">    <span class="built_in">list</span> *deferred_reply_errors;    <span class="comment">/* Used for module thread safe contexts. */</span></span><br><span class="line">    <span class="type">size_t</span> sentlen;         <span class="comment">/* Amount of bytes already sent in the current</span></span><br><span class="line"><span class="comment">                               buffer or object being sent. */</span></span><br><span class="line">    <span class="type">time_t</span> ctime;           <span class="comment">/* Client creation time. */</span></span><br><span class="line">    <span class="type">long</span> duration;          <span class="comment">/* Current command duration. Used for measuring latency of blocking/non-blocking cmds */</span></span><br><span class="line">    <span class="type">int</span> slot;               <span class="comment">/* The slot the client is executing against. Set to -1 if no slot is being used */</span></span><br><span class="line">    dictEntry *cur_script;  <span class="comment">/* Cached pointer to the dictEntry of the script being executed. */</span></span><br><span class="line">    <span class="type">time_t</span> lastinteraction; <span class="comment">/* Time of the last interaction, used for timeout */</span></span><br><span class="line">    <span class="type">time_t</span> obuf_soft_limit_reached_time;</span><br><span class="line">    <span class="type">int</span> authenticated;      <span class="comment">/* Needed when the default user requires auth. */</span></span><br><span class="line">    <span class="type">int</span> replstate;          <span class="comment">/* Replication state if this is a slave. */</span></span><br><span class="line">    <span class="type">int</span> repl_start_cmd_stream_on_ack; <span class="comment">/* Install slave write handler on first ACK. */</span></span><br><span class="line">    <span class="type">int</span> repldbfd;           <span class="comment">/* Replication DB file descriptor. */</span></span><br><span class="line">    <span class="type">off_t</span> repldboff;        <span class="comment">/* Replication DB file offset. */</span></span><br><span class="line">    <span class="type">off_t</span> repldbsize;       <span class="comment">/* Replication DB file size. */</span></span><br><span class="line">    sds replpreamble;       <span class="comment">/* Replication DB preamble. */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> read_reploff; <span class="comment">/* Read replication offset if this is a master. */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> reploff;      <span class="comment">/* Applied replication offset if this is a master. */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> repl_applied; <span class="comment">/* Applied replication data count in querybuf, if this is a replica. */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> repl_ack_off; <span class="comment">/* Replication ack offset, if this is a slave. */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> repl_ack_time;<span class="comment">/* Replication ack time, if this is a slave. */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> repl_last_partial_write; <span class="comment">/* The last time the server did a partial write from the RDB child pipe to this replica  */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> psync_initial_offset; <span class="comment">/* FULLRESYNC reply offset other slaves</span></span><br><span class="line"><span class="comment">                                       copying this slave output buffer</span></span><br><span class="line"><span class="comment">                                       should use. */</span></span><br><span class="line">    <span class="type">char</span> replid[CONFIG_RUN_ID_SIZE+<span class="number">1</span>]; <span class="comment">/* Master replication ID (if master). */</span></span><br><span class="line">    <span class="type">int</span> slave_listening_port; <span class="comment">/* As configured with: REPLCONF listening-port */</span></span><br><span class="line">    <span class="type">char</span> *slave_addr;       <span class="comment">/* Optionally given by REPLCONF ip-address */</span></span><br><span class="line">    <span class="type">int</span> slave_capa;         <span class="comment">/* Slave capabilities: SLAVE_CAPA_* bitwise OR. */</span></span><br><span class="line">    <span class="type">int</span> slave_req;          <span class="comment">/* Slave requirements: SLAVE_REQ_* */</span></span><br><span class="line">    multiState mstate;      <span class="comment">/* MULTI/EXEC state */</span></span><br><span class="line">    <span class="type">int</span> btype;              <span class="comment">/* Type of blocking op if CLIENT_BLOCKED. */</span></span><br><span class="line">    blockingState bpop;     <span class="comment">/* blocking state */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> woff;         <span class="comment">/* Last write global replication offset. */</span></span><br><span class="line">    <span class="built_in">list</span> *watched_keys;     <span class="comment">/* Keys WATCHED for MULTI/EXEC CAS */</span></span><br><span class="line">    dict *pubsub_channels;  <span class="comment">/* channels a client is interested in (SUBSCRIBE) */</span></span><br><span class="line">    <span class="built_in">list</span> *pubsub_patterns;  <span class="comment">/* patterns a client is interested in (SUBSCRIBE) */</span></span><br><span class="line">    dict *pubsubshard_channels;  <span class="comment">/* shard level channels a client is interested in (SSUBSCRIBE) */</span></span><br><span class="line">    sds peerid;             <span class="comment">/* Cached peer ID. */</span></span><br><span class="line">    sds sockname;           <span class="comment">/* Cached connection target address. */</span></span><br><span class="line">    listNode *client_list_node; <span class="comment">/* list node in client list */</span></span><br><span class="line">    listNode *postponed_list_node; <span class="comment">/* list node within the postponed list */</span></span><br><span class="line">    listNode *pending_read_list_node; <span class="comment">/* list node in clients pending read list */</span></span><br><span class="line">    RedisModuleUserChangedFunc auth_callback; <span class="comment">/* Module callback to execute</span></span><br><span class="line"><span class="comment">                                               * when the authenticated user</span></span><br><span class="line"><span class="comment">                                               * changes. */</span></span><br><span class="line">    <span class="type">void</span> *auth_callback_privdata; <span class="comment">/* Private data that is passed when the auth</span></span><br><span class="line"><span class="comment">                                   * changed callback is executed. Opaque for</span></span><br><span class="line"><span class="comment">                                   * Redis Core. */</span></span><br><span class="line">    <span class="type">void</span> *auth_module;      <span class="comment">/* The module that owns the callback, which is used</span></span><br><span class="line"><span class="comment">                             * to disconnect the client if the module is</span></span><br><span class="line"><span class="comment">                             * unloaded for cleanup. Opaque for Redis Core.*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* If this client is in tracking mode and this field is non zero,</span></span><br><span class="line"><span class="comment">     * invalidation messages for keys fetched by this client will be send to</span></span><br><span class="line"><span class="comment">     * the specified client ID. */</span></span><br><span class="line">    <span class="type">uint64_t</span> client_tracking_redirection;</span><br><span class="line">    rax *client_tracking_prefixes; <span class="comment">/* A dictionary of prefixes we are already</span></span><br><span class="line"><span class="comment">                                      subscribed to in BCAST mode, in the</span></span><br><span class="line"><span class="comment">                                      context of client side caching. */</span></span><br><span class="line">    <span class="comment">/* In updateClientMemoryUsage() we track the memory usage of</span></span><br><span class="line"><span class="comment">     * each client and add it to the sum of all the clients of a given type,</span></span><br><span class="line"><span class="comment">     * however we need to remember what was the old contribution of each</span></span><br><span class="line"><span class="comment">     * client, and in which category the client was, in order to remove it</span></span><br><span class="line"><span class="comment">     * before adding it the new value. */</span></span><br><span class="line">    <span class="type">size_t</span> last_memory_usage;</span><br><span class="line">    <span class="type">int</span> last_memory_type;</span><br><span class="line"></span><br><span class="line">    listNode *mem_usage_bucket_node;</span><br><span class="line">    clientMemUsageBucket *mem_usage_bucket;</span><br><span class="line"></span><br><span class="line">    listNode *ref_repl_buf_node; <span class="comment">/* Referenced node of replication buffer blocks,</span></span><br><span class="line"><span class="comment">                                  * see the definition of replBufBlock. */</span></span><br><span class="line">    <span class="type">size_t</span> ref_block_pos;        <span class="comment">/* Access position of referenced buffer block,</span></span><br><span class="line"><span class="comment">                                  * i.e. the next offset to send. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Response buffer */</span></span><br><span class="line">    <span class="type">size_t</span> buf_peak; <span class="comment">/* Peak used size of buffer in last 5 sec interval. */</span></span><br><span class="line">    <span class="type">mstime_t</span> buf_peak_last_reset_time; <span class="comment">/* keeps the last time the buffer peak value was reset */</span></span><br><span class="line">    <span class="type">int</span> bufpos;</span><br><span class="line">    <span class="type">size_t</span> buf_usable_size; <span class="comment">/* Usable size of buffer. */</span></span><br><span class="line">    <span class="type">char</span> *buf;</span><br><span class="line">&#125; client;</span><br></pre></td></tr></table></figure>

<p>每当redis client客户端发送命令到服务端之后，Redis Server通过 client.db 找到对应的数据库，然后进行相关操作。</p>
<h2 id="Set指令执行过程代码追溯"><a href="#Set指令执行过程代码追溯" class="headerlink" title="Set指令执行过程代码追溯"></a>Set指令执行过程代码追溯</h2><p>set指令核心操作步骤如下图所示：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2023/04/redis-set-001.png">

<p>Set指令代码如下所示：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 代码位置：src/t_string.c</span></span><br><span class="line"><span class="comment">/* SET key value [NX] [XX] [KEEPTTL] [GET] [EX &lt;seconds&gt;] [PX &lt;milliseconds&gt;]</span></span><br><span class="line"><span class="comment"> *     [EXAT &lt;seconds-timestamp&gt;][PXAT &lt;milliseconds-timestamp&gt;] */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">setCommand</span><span class="params">(client *c)</span> &#123;</span><br><span class="line">    robj *expire = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="type">int</span> unit = UNIT_SECONDS;</span><br><span class="line">    <span class="type">int</span> flags = OBJ_NO_FLAGS;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通过参数解析过期key的过期时间、过期时间单位以及操作标识符flags</span></span><br><span class="line">    <span class="comment">// flags,unit,expire在真正设置的时候会被使用</span></span><br><span class="line">    <span class="comment">// 如果带有 KEEPTTL 选项，则 flags|=OBJ_SET_GET</span></span><br><span class="line">    <span class="keyword">if</span> (parseExtendedStringArgumentsOrReply(c,&amp;flags,&amp;unit,&amp;expire,COMMAND_SET) != C_OK) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 对key的value进行编码</span></span><br><span class="line">    c-&gt;argv[<span class="number">2</span>] = tryObjectEncoding(c-&gt;argv[<span class="number">2</span>]);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 执行通用的set操作</span></span><br><span class="line">    <span class="comment">// 因为set操作包含多个不同的指令，但是底层操作基本相同</span></span><br><span class="line">    <span class="comment">// c-&gt;argv[1]:需要设置的key名称, c-&gt;argv[2]:需要设置key对应的value内容</span></span><br><span class="line">    setGenericCommand(c,flags,c-&gt;argv[<span class="number">1</span>],c-&gt;argv[<span class="number">2</span>],expire,unit,<span class="literal">NULL</span>,<span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文件位置：src/t_string.c</span></span><br><span class="line"><span class="comment">// 通用的set操作方法</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">setGenericCommand</span><span class="params">(client *c, <span class="type">int</span> flags, robj *key, robj *val, robj *expire, <span class="type">int</span> unit, robj *ok_reply, robj *abort_reply)</span> &#123;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> milliseconds = <span class="number">0</span>; <span class="comment">/* initialized to avoid any harmness warning */</span></span><br><span class="line">    <span class="type">int</span> found = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> setkey_flags = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 过期时间校验</span></span><br><span class="line">    <span class="keyword">if</span> (expire &amp;&amp; getExpireMillisecondsOrReply(c, expire, flags, unit, &amp;milliseconds) != C_OK) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// getset 处理</span></span><br><span class="line">    <span class="keyword">if</span> (flags &amp; OBJ_SET_GET) &#123;</span><br><span class="line">        <span class="keyword">if</span> (getGenericCommand(c) == C_ERR) <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查找key是否已经存在</span></span><br><span class="line">    found = (lookupKeyWrite(c-&gt;db,key) != <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// key不存在则设置，但是存在。key存在则设置，但是不存在</span></span><br><span class="line">    <span class="comment">// 对于2种异常情况处理</span></span><br><span class="line">    <span class="keyword">if</span> ((flags &amp; OBJ_SET_NX &amp;&amp; found) ||</span><br><span class="line">        (flags &amp; OBJ_SET_XX &amp;&amp; !found))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!(flags &amp; OBJ_SET_GET)) &#123;</span><br><span class="line">            addReply(c, abort_reply ? abort_reply : shared.null[c-&gt;resp]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 设置key时需要使用的标识符</span></span><br><span class="line">    setkey_flags |= (flags &amp; OBJ_KEEPTTL) ? SETKEY_KEEPTTL : <span class="number">0</span>; <span class="comment">// 是否保持key的过期时间不变</span></span><br><span class="line">    setkey_flags |= found ? SETKEY_ALREADY_EXIST : SETKEY_DOESNT_EXIST; <span class="comment">// key是否已经存在</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 真正的设置key在这里</span></span><br><span class="line">    setKey(c,c-&gt;db,key,val,setkey_flags);</span><br><span class="line">    server.dirty++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 事件通知</span></span><br><span class="line">    notifyKeyspaceEvent(NOTIFY_STRING,<span class="string">&quot;set&quot;</span>,key,c-&gt;db-&gt;id);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (expire) &#123;</span><br><span class="line">        <span class="comment">// 设置key的过期时间</span></span><br><span class="line">        setExpire(c,c-&gt;db,key,milliseconds);</span><br><span class="line">        <span class="comment">/* Propagate as SET Key Value PXAT millisecond-timestamp if there is</span></span><br><span class="line"><span class="comment">         * EX/PX/EXAT/PXAT flag. */</span></span><br><span class="line">        robj *milliseconds_obj = createStringObjectFromLongLong(milliseconds);</span><br><span class="line">        rewriteClientCommandVector(c, <span class="number">5</span>, shared.<span class="built_in">set</span>, key, val, shared.pxat, milliseconds_obj);</span><br><span class="line">        decrRefCount(milliseconds_obj);</span><br><span class="line">        notifyKeyspaceEvent(NOTIFY_GENERIC,<span class="string">&quot;expire&quot;</span>,key,c-&gt;db-&gt;id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!(flags &amp; OBJ_SET_GET)) &#123;</span><br><span class="line">        addReply(c, ok_reply ? ok_reply : shared.ok);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Propagate without the GET argument (Isn&#x27;t needed if we had expire since in that case we completely re-written the command argv) */</span></span><br><span class="line">    <span class="keyword">if</span> ((flags &amp; OBJ_SET_GET) &amp;&amp; !expire) &#123;</span><br><span class="line">        <span class="type">int</span> argc = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> j;</span><br><span class="line">        robj **argv = zmalloc((c-&gt;argc<span class="number">-1</span>)*<span class="keyword">sizeof</span>(robj*));</span><br><span class="line">        <span class="keyword">for</span> (j=<span class="number">0</span>; j &lt; c-&gt;argc; j++) &#123;</span><br><span class="line">            <span class="type">char</span> *a = c-&gt;argv[j]-&gt;ptr;</span><br><span class="line">            <span class="comment">/* Skip GET which may be repeated multiple times. */</span></span><br><span class="line">            <span class="keyword">if</span> (j &gt;= <span class="number">3</span> &amp;&amp;</span><br><span class="line">                (a[<span class="number">0</span>] == <span class="string">&#x27;g&#x27;</span> || a[<span class="number">0</span>] == <span class="string">&#x27;G&#x27;</span>) &amp;&amp;</span><br><span class="line">                (a[<span class="number">1</span>] == <span class="string">&#x27;e&#x27;</span> || a[<span class="number">1</span>] == <span class="string">&#x27;E&#x27;</span>) &amp;&amp;</span><br><span class="line">                (a[<span class="number">2</span>] == <span class="string">&#x27;t&#x27;</span> || a[<span class="number">2</span>] == <span class="string">&#x27;T&#x27;</span>) &amp;&amp; a[<span class="number">3</span>] == <span class="string">&#x27;\0&#x27;</span>)</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            argv[argc++] = c-&gt;argv[j];</span><br><span class="line">            incrRefCount(c-&gt;argv[j]);</span><br><span class="line">        &#125;</span><br><span class="line">        replaceClientCommandVector(c, argc, argv);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 文件位置：src/db.c</span></span><br><span class="line"><span class="comment">// 真正的设置key的操作</span></span><br><span class="line"><span class="comment">/* High level Set operation. This function can be used in order to set</span></span><br><span class="line"><span class="comment"> * a key, whatever it was existing or not, to a new object.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 1) The ref count of the value object is incremented.</span></span><br><span class="line"><span class="comment"> * 2) clients WATCHing for the destination key notified.</span></span><br><span class="line"><span class="comment"> * 3) The expire time of the key is reset (the key is made persistent),</span></span><br><span class="line"><span class="comment"> *    unless &#x27;SETKEY_KEEPTTL&#x27; is enabled in flags.</span></span><br><span class="line"><span class="comment"> * 4) The key lookup can take place outside this interface outcome will be</span></span><br><span class="line"><span class="comment"> *    delivered with &#x27;SETKEY_ALREADY_EXIST&#x27; or &#x27;SETKEY_DOESNT_EXIST&#x27;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * All the new keys in the database should be created via this interface.</span></span><br><span class="line"><span class="comment"> * The client &#x27;c&#x27; argument may be set to NULL if the operation is performed</span></span><br><span class="line"><span class="comment"> * in a context where there is no clear client performing the operation. */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">setKey</span><span class="params">(client *c, redisDb *db, robj *key, robj *val, <span class="type">int</span> flags)</span> &#123;</span><br><span class="line">    <span class="type">int</span> keyfound = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (flags &amp; SETKEY_ALREADY_EXIST)</span><br><span class="line">        keyfound = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (!(flags &amp; SETKEY_DOESNT_EXIST))</span><br><span class="line">        keyfound = (lookupKeyWrite(db,key) != <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!keyfound) &#123;</span><br><span class="line">        dbAdd(db,key,val); <span class="comment">// key不存在，则添加</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        dbOverwrite(db,key,val); <span class="comment">// 存在key，找到则覆盖</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    incrRefCount(val); <span class="comment">// 引用计数+1</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 注意：没有 SETKEY_KEEPTTL 标识的话，需要试图去 [过期键空间] 删除key</span></span><br><span class="line">    <span class="comment">// </span></span><br><span class="line">    <span class="comment">// 正是下面的一行代码操作，会发生类似的如下现象：</span></span><br><span class="line">    <span class="comment">//  1.设置key，同时设置过期时间</span></span><br><span class="line">    <span class="comment">//  2.查询key过期时间，得到key在第1步设置的过期时间</span></span><br><span class="line">    <span class="comment">//  3.再次设置key(不设置过期时间，这里会把第1步设置的过期时间删掉)</span></span><br><span class="line">    <span class="comment">//  4.查询key过期时间，发现key永不过期</span></span><br><span class="line">    <span class="keyword">if</span> (!(flags &amp; SETKEY_KEEPTTL)) removeExpire(db,key);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (!(flags &amp; SETKEY_NO_SIGNAL)) signalModifiedKey(c,db,key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Redis主要命令"><a href="#Redis主要命令" class="headerlink" title="Redis主要命令"></a>Redis主要命令</h2><p>从Redis源码可知，v7.0 版本目前具有 240 个命令，代码如下所示：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 代码位置：src/commands.c</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Main command table */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">redisCommand</span> <span class="title">redisCommandTable</span>[] =</span> &#123;</span><br><span class="line">    <span class="comment">/* bitmap 位图 */</span></span><br><span class="line">    &#123;<span class="string">&quot;bitcount&quot;</span>,<span class="string">&quot;Count set bits in a string&quot;</span>,<span class="string">&quot;O(N)&quot;</span>,<span class="string">&quot;2.6.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_BITMAP,BITCOUNT_History,BITCOUNT_tips,bitcountCommand,<span class="number">-2</span>,CMD_READONLY,ACL_CATEGORY_BITMAP,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=BITCOUNT_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;bitfield&quot;</span>,<span class="string">&quot;Perform arbitrary bitfield integer operations on strings&quot;</span>,<span class="string">&quot;O(1) for each subcommand specified&quot;</span>,<span class="string">&quot;3.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_BITMAP,BITFIELD_History,BITFIELD_tips,bitfieldCommand,<span class="number">-2</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_BITMAP,&#123;&#123;<span class="string">&quot;This command allows both access and modification of the key&quot;</span>,CMD_KEY_RW|CMD_KEY_UPDATE|CMD_KEY_ACCESS|CMD_KEY_VARIABLE_FLAGS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,bitfieldGetKeys,.args=BITFIELD_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;bitfield_ro&quot;</span>,<span class="string">&quot;Perform arbitrary bitfield integer operations on strings. Read-only variant of BITFIELD&quot;</span>,<span class="string">&quot;O(1) for each subcommand specified&quot;</span>,<span class="string">&quot;6.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_BITMAP,BITFIELD_RO_History,BITFIELD_RO_tips,bitfieldroCommand,<span class="number">-2</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_BITMAP,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=BITFIELD_RO_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;bitop&quot;</span>,<span class="string">&quot;Perform bitwise operations between strings&quot;</span>,<span class="string">&quot;O(N)&quot;</span>,<span class="string">&quot;2.6.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_BITMAP,BITOP_History,BITOP_tips,bitopCommand,<span class="number">-4</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_BITMAP,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">3</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=BITOP_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;bitpos&quot;</span>,<span class="string">&quot;Find first bit set or clear in a string&quot;</span>,<span class="string">&quot;O(N)&quot;</span>,<span class="string">&quot;2.8.7&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_BITMAP,BITPOS_History,BITPOS_tips,bitposCommand,<span class="number">-3</span>,CMD_READONLY,ACL_CATEGORY_BITMAP,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=BITPOS_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;getbit&quot;</span>,<span class="string">&quot;Returns the bit value at offset in the string value stored at key&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_BITMAP,GETBIT_History,GETBIT_tips,getbitCommand,<span class="number">3</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_BITMAP,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=GETBIT_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;setbit&quot;</span>,<span class="string">&quot;Sets or clears the bit at offset in the string value stored at key&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_BITMAP,SETBIT_History,SETBIT_tips,setbitCommand,<span class="number">4</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_BITMAP,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SETBIT_Args&#125;,</span><br><span class="line">    <span class="comment">/* cluster 集群 */</span></span><br><span class="line">    &#123;<span class="string">&quot;asking&quot;</span>,<span class="string">&quot;Sent by cluster clients after an -ASK redirect&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;3.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_CLUSTER,ASKING_History,ASKING_tips,askingCommand,<span class="number">1</span>,CMD_FAST,ACL_CATEGORY_CONNECTION&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;cluster&quot;</span>,<span class="string">&quot;A container for cluster commands&quot;</span>,<span class="string">&quot;Depends on subcommand.&quot;</span>,<span class="string">&quot;3.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_CLUSTER,CLUSTER_History,CLUSTER_tips,<span class="literal">NULL</span>,<span class="number">-2</span>,<span class="number">0</span>,<span class="number">0</span>,.subcommands=CLUSTER_Subcommands&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;readonly&quot;</span>,<span class="string">&quot;Enables read queries for a connection to a cluster replica node&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;3.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_CLUSTER,READONLY_History,READONLY_tips,readonlyCommand,<span class="number">1</span>,CMD_FAST|CMD_LOADING|CMD_STALE,ACL_CATEGORY_CONNECTION&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;readwrite&quot;</span>,<span class="string">&quot;Disables read queries for a connection to a cluster replica node&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;3.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_CLUSTER,READWRITE_History,READWRITE_tips,readwriteCommand,<span class="number">1</span>,CMD_FAST|CMD_LOADING|CMD_STALE,ACL_CATEGORY_CONNECTION&#125;,</span><br><span class="line">    <span class="comment">/* connection 连接 */</span></span><br><span class="line">    &#123;<span class="string">&quot;auth&quot;</span>,<span class="string">&quot;Authenticate to the server&quot;</span>,<span class="string">&quot;O(N) where N is the number of passwords defined for the user&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_CONNECTION,AUTH_History,AUTH_tips,authCommand,<span class="number">-2</span>,CMD_NOSCRIPT|CMD_LOADING|CMD_STALE|CMD_FAST|CMD_NO_AUTH|CMD_SENTINEL|CMD_ALLOW_BUSY,ACL_CATEGORY_CONNECTION,.args=AUTH_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;client&quot;</span>,<span class="string">&quot;A container for client connection commands&quot;</span>,<span class="string">&quot;Depends on subcommand.&quot;</span>,<span class="string">&quot;2.4.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_CONNECTION,CLIENT_History,CLIENT_tips,<span class="literal">NULL</span>,<span class="number">-2</span>,CMD_SENTINEL,<span class="number">0</span>,.subcommands=CLIENT_Subcommands&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;echo&quot;</span>,<span class="string">&quot;Echo the given string&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_CONNECTION,ECHO_History,ECHO_tips,echoCommand,<span class="number">2</span>,CMD_LOADING|CMD_STALE|CMD_FAST,ACL_CATEGORY_CONNECTION,.args=ECHO_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;Handshake with Redis&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;6.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_CONNECTION,HELLO_History,HELLO_tips,helloCommand,<span class="number">-1</span>,CMD_NOSCRIPT|CMD_LOADING|CMD_STALE|CMD_FAST|CMD_NO_AUTH|CMD_SENTINEL|CMD_ALLOW_BUSY,ACL_CATEGORY_CONNECTION,.args=HELLO_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;ping&quot;</span>,<span class="string">&quot;Ping the server&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_CONNECTION,PING_History,PING_tips,pingCommand,<span class="number">-1</span>,CMD_FAST|CMD_SENTINEL,ACL_CATEGORY_CONNECTION,.args=PING_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;quit&quot;</span>,<span class="string">&quot;Close the connection&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_CONNECTION,QUIT_History,QUIT_tips,quitCommand,<span class="number">-1</span>,CMD_ALLOW_BUSY|CMD_NOSCRIPT|CMD_LOADING|CMD_STALE|CMD_FAST|CMD_NO_AUTH,ACL_CATEGORY_CONNECTION&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;reset&quot;</span>,<span class="string">&quot;Reset the connection&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_CONNECTION,RESET_History,RESET_tips,resetCommand,<span class="number">1</span>,CMD_NOSCRIPT|CMD_LOADING|CMD_STALE|CMD_FAST|CMD_NO_AUTH|CMD_ALLOW_BUSY,ACL_CATEGORY_CONNECTION&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;select&quot;</span>,<span class="string">&quot;Change the selected database for the current connection&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_CONNECTION,SELECT_History,SELECT_tips,selectCommand,<span class="number">2</span>,CMD_LOADING|CMD_STALE|CMD_FAST,ACL_CATEGORY_CONNECTION,.args=SELECT_Args&#125;,</span><br><span class="line">    <span class="comment">/* generic 通用 */</span></span><br><span class="line">    &#123;<span class="string">&quot;copy&quot;</span>,<span class="string">&quot;Copy a key&quot;</span>,<span class="string">&quot;O(N) worst case for collections, where N is the number of nested items. O(1) for string values.&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,COPY_History,COPY_tips,copyCommand,<span class="number">-3</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=COPY_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;del&quot;</span>,<span class="string">&quot;Delete a key&quot;</span>,<span class="string">&quot;O(N) where N is the number of keys that will be removed. When a key to remove holds a value other than a string, the individual complexity for this key is O(M) where M is the number of elements in the list, set, sorted set or hash. Removing a single key that holds a string value is O(1).&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,DEL_History,DEL_tips,delCommand,<span class="number">-2</span>,CMD_WRITE,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RM|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=DEL_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;dump&quot;</span>,<span class="string">&quot;Return a serialized version of the value stored at the specified key.&quot;</span>,<span class="string">&quot;O(1) to access the key and additional O(N*M) to serialize it, where N is the number of Redis objects composing the value and M their average size. For small string values the time complexity is thus O(1)+O(1*M) where M is small, so simply O(1).&quot;</span>,<span class="string">&quot;2.6.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,DUMP_History,DUMP_tips,dumpCommand,<span class="number">2</span>,CMD_READONLY,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=DUMP_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;exists&quot;</span>,<span class="string">&quot;Determine if a key exists&quot;</span>,<span class="string">&quot;O(N) where N is the number of keys to check.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,EXISTS_History,EXISTS_tips,existsCommand,<span class="number">-2</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=EXISTS_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;expire&quot;</span>,<span class="string">&quot;Set a key&#x27;s time to live in seconds&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,EXPIRE_History,EXPIRE_tips,expireCommand,<span class="number">-3</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=EXPIRE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;expireat&quot;</span>,<span class="string">&quot;Set the expiration for a key as a UNIX timestamp&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,EXPIREAT_History,EXPIREAT_tips,expireatCommand,<span class="number">-3</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=EXPIREAT_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;expiretime&quot;</span>,<span class="string">&quot;Get the expiration Unix timestamp for a key&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;7.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,EXPIRETIME_History,EXPIRETIME_tips,expiretimeCommand,<span class="number">2</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=EXPIRETIME_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;keys&quot;</span>,<span class="string">&quot;Find all keys matching the given pattern&quot;</span>,<span class="string">&quot;O(N) with N being the number of keys in the database, under the assumption that the key names in the database and the given pattern have limited length.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,KEYS_History,KEYS_tips,keysCommand,<span class="number">2</span>,CMD_READONLY,ACL_CATEGORY_KEYSPACE|ACL_CATEGORY_DANGEROUS,.args=KEYS_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;migrate&quot;</span>,<span class="string">&quot;Atomically transfer a key from a Redis instance to another one.&quot;</span>,<span class="string">&quot;This command actually executes a DUMP+DEL in the source instance, and a RESTORE in the target instance. See the pages of these commands for time complexity. Also an O(N) data transfer between the two instances is performed.&quot;</span>,<span class="string">&quot;2.6.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,MIGRATE_History,MIGRATE_tips,migrateCommand,<span class="number">-6</span>,CMD_WRITE,ACL_CATEGORY_KEYSPACE|ACL_CATEGORY_DANGEROUS,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">3</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE|CMD_KEY_INCOMPLETE,KSPEC_BS_KEYWORD,.bs.keyword=&#123;<span class="string">&quot;KEYS&quot;</span>,<span class="number">-2</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,migrateGetKeys,.args=MIGRATE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;move&quot;</span>,<span class="string">&quot;Move a key to another database&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,MOVE_History,MOVE_tips,moveCommand,<span class="number">3</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=MOVE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;object&quot;</span>,<span class="string">&quot;A container for object introspection commands&quot;</span>,<span class="string">&quot;Depends on subcommand.&quot;</span>,<span class="string">&quot;2.2.3&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,OBJECT_History,OBJECT_tips,<span class="literal">NULL</span>,<span class="number">-2</span>,<span class="number">0</span>,<span class="number">0</span>,.subcommands=OBJECT_Subcommands&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;persist&quot;</span>,<span class="string">&quot;Remove the expiration from a key&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,PERSIST_History,PERSIST_tips,persistCommand,<span class="number">2</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=PERSIST_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;pexpire&quot;</span>,<span class="string">&quot;Set a key&#x27;s time to live in milliseconds&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.6.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,PEXPIRE_History,PEXPIRE_tips,pexpireCommand,<span class="number">-3</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=PEXPIRE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;pexpireat&quot;</span>,<span class="string">&quot;Set the expiration for a key as a UNIX timestamp specified in milliseconds&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.6.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,PEXPIREAT_History,PEXPIREAT_tips,pexpireatCommand,<span class="number">-3</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=PEXPIREAT_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;pexpiretime&quot;</span>,<span class="string">&quot;Get the expiration Unix timestamp for a key in milliseconds&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;7.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,PEXPIRETIME_History,PEXPIRETIME_tips,pexpiretimeCommand,<span class="number">2</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=PEXPIRETIME_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;pttl&quot;</span>,<span class="string">&quot;Get the time to live for a key in milliseconds&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.6.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,PTTL_History,PTTL_tips,pttlCommand,<span class="number">2</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=PTTL_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;randomkey&quot;</span>,<span class="string">&quot;Return a random key from the keyspace&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,RANDOMKEY_History,RANDOMKEY_tips,randomkeyCommand,<span class="number">1</span>,CMD_READONLY|CMD_TOUCHES_ARBITRARY_KEYS,ACL_CATEGORY_KEYSPACE&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;rename&quot;</span>,<span class="string">&quot;Rename a key&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,RENAME_History,RENAME_tips,renameCommand,<span class="number">3</span>,CMD_WRITE,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=RENAME_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;renamenx&quot;</span>,<span class="string">&quot;Rename a key, only if the new key does not exist&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,RENAMENX_History,RENAMENX_tips,renamenxCommand,<span class="number">3</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_INSERT,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=RENAMENX_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;restore&quot;</span>,<span class="string">&quot;Create a key using the provided serialized value, previously obtained using DUMP.&quot;</span>,<span class="string">&quot;O(1) to create the new key and additional O(N*M) to reconstruct the serialized value, where N is the number of Redis objects composing the value and M their average size. For small string values the time complexity is thus O(1)+O(1*M) where M is small, so simply O(1). However for sorted set values the complexity is O(N*M*log(N)) because inserting values into sorted sets is O(log(N)).&quot;</span>,<span class="string">&quot;2.6.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,RESTORE_History,RESTORE_tips,restoreCommand,<span class="number">-4</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_KEYSPACE|ACL_CATEGORY_DANGEROUS,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=RESTORE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;scan&quot;</span>,<span class="string">&quot;Incrementally iterate the keys space&quot;</span>,<span class="string">&quot;O(1) for every call. O(N) for a complete iteration, including enough command calls for the cursor to return back to 0. N is the number of elements inside the collection.&quot;</span>,<span class="string">&quot;2.8.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,SCAN_History,SCAN_tips,scanCommand,<span class="number">-2</span>,CMD_READONLY|CMD_TOUCHES_ARBITRARY_KEYS,ACL_CATEGORY_KEYSPACE,.args=SCAN_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;sort&quot;</span>,<span class="string">&quot;Sort the elements in a list, set or sorted set&quot;</span>,<span class="string">&quot;O(N+M*log(M)) where N is the number of elements in the list or set to sort, and M the number of returned elements. When the elements are not sorted, complexity is O(N).&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,SORT_History,SORT_tips,sortCommand,<span class="number">-2</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_SET|ACL_CATEGORY_SORTEDSET|ACL_CATEGORY_LIST|ACL_CATEGORY_DANGEROUS,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="string">&quot;For the optional BY/GET keyword. It is marked &#x27;unknown&#x27; because the key names derive from the content of the key we sort&quot;</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_UNKNOWN,&#123;&#123;<span class="number">0</span>&#125;&#125;,KSPEC_FK_UNKNOWN,&#123;&#123;<span class="number">0</span>&#125;&#125;&#125;,&#123;<span class="string">&quot;For the optional STORE keyword. It is marked &#x27;unknown&#x27; because the keyword can appear anywhere in the argument array&quot;</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_UNKNOWN,&#123;&#123;<span class="number">0</span>&#125;&#125;,KSPEC_FK_UNKNOWN,&#123;&#123;<span class="number">0</span>&#125;&#125;&#125;&#125;,sortGetKeys,.args=SORT_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;sort_ro&quot;</span>,<span class="string">&quot;Sort the elements in a list, set or sorted set. Read-only variant of SORT.&quot;</span>,<span class="string">&quot;O(N+M*log(M)) where N is the number of elements in the list or set to sort, and M the number of returned elements. When the elements are not sorted, complexity is O(N).&quot;</span>,<span class="string">&quot;7.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,SORT_RO_History,SORT_RO_tips,sortroCommand,<span class="number">-2</span>,CMD_READONLY,ACL_CATEGORY_SET|ACL_CATEGORY_SORTEDSET|ACL_CATEGORY_LIST|ACL_CATEGORY_DANGEROUS,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="string">&quot;For the optional BY/GET keyword. It is marked &#x27;unknown&#x27; because the key names derive from the content of the key we sort&quot;</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_UNKNOWN,&#123;&#123;<span class="number">0</span>&#125;&#125;,KSPEC_FK_UNKNOWN,&#123;&#123;<span class="number">0</span>&#125;&#125;&#125;&#125;,sortROGetKeys,.args=SORT_RO_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;touch&quot;</span>,<span class="string">&quot;Alters the last access time of a key(s). Returns the number of existing keys specified.&quot;</span>,<span class="string">&quot;O(N) where N is the number of keys that will be touched.&quot;</span>,<span class="string">&quot;3.2.1&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,TOUCH_History,TOUCH_tips,touchCommand,<span class="number">-2</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=TOUCH_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;ttl&quot;</span>,<span class="string">&quot;Get the time to live for a key in seconds&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,TTL_History,TTL_tips,ttlCommand,<span class="number">2</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=TTL_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;type&quot;</span>,<span class="string">&quot;Determine the type stored at key&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,TYPE_History,TYPE_tips,typeCommand,<span class="number">2</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=TYPE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;unlink&quot;</span>,<span class="string">&quot;Delete a key asynchronously in another thread. Otherwise it is just as DEL, but non blocking.&quot;</span>,<span class="string">&quot;O(1) for each key removed regardless of its size. Then the command does O(N) work in a different thread in order to reclaim memory, where N is the number of allocations the deleted objects where composed of.&quot;</span>,<span class="string">&quot;4.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,UNLINK_History,UNLINK_tips,unlinkCommand,<span class="number">-2</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_KEYSPACE,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RM|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=UNLINK_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;wait&quot;</span>,<span class="string">&quot;Wait for the synchronous replication of all the write commands sent in the context of the current connection&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;3.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GENERIC,WAIT_History,WAIT_tips,waitCommand,<span class="number">3</span>,CMD_NOSCRIPT,ACL_CATEGORY_CONNECTION,.args=WAIT_Args&#125;,</span><br><span class="line">    <span class="comment">/* geo */</span></span><br><span class="line">    &#123;<span class="string">&quot;geoadd&quot;</span>,<span class="string">&quot;Add one or more geospatial items in the geospatial index represented using a sorted set&quot;</span>,<span class="string">&quot;O(log(N)) for each item added, where N is the number of elements in the sorted set.&quot;</span>,<span class="string">&quot;3.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GEO,GEOADD_History,GEOADD_tips,geoaddCommand,<span class="number">-5</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_GEO,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=GEOADD_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;geodist&quot;</span>,<span class="string">&quot;Returns the distance between two members of a geospatial index&quot;</span>,<span class="string">&quot;O(log(N))&quot;</span>,<span class="string">&quot;3.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GEO,GEODIST_History,GEODIST_tips,geodistCommand,<span class="number">-4</span>,CMD_READONLY,ACL_CATEGORY_GEO,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=GEODIST_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;geohash&quot;</span>,<span class="string">&quot;Returns members of a geospatial index as standard geohash strings&quot;</span>,<span class="string">&quot;O(log(N)) for each member requested, where N is the number of elements in the sorted set.&quot;</span>,<span class="string">&quot;3.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GEO,GEOHASH_History,GEOHASH_tips,geohashCommand,<span class="number">-2</span>,CMD_READONLY,ACL_CATEGORY_GEO,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=GEOHASH_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;geopos&quot;</span>,<span class="string">&quot;Returns longitude and latitude of members of a geospatial index&quot;</span>,<span class="string">&quot;O(N) where N is the number of members requested.&quot;</span>,<span class="string">&quot;3.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GEO,GEOPOS_History,GEOPOS_tips,geoposCommand,<span class="number">-2</span>,CMD_READONLY,ACL_CATEGORY_GEO,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=GEOPOS_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;georadius&quot;</span>,<span class="string">&quot;Query a sorted set representing a geospatial index to fetch members matching a given maximum distance from a point&quot;</span>,<span class="string">&quot;O(N+log(M)) where N is the number of elements inside the bounding box of the circular area delimited by center and radius and M is the number of items inside the index.&quot;</span>,<span class="string">&quot;3.2.0&quot;</span>,CMD_DOC_DEPRECATED,<span class="string">&quot;`GEOSEARCH` and `GEOSEARCHSTORE` with the `BYRADIUS` argument&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,COMMAND_GROUP_GEO,GEORADIUS_History,GEORADIUS_tips,georadiusCommand,<span class="number">-6</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_GEO,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_KEYWORD,.bs.keyword=&#123;<span class="string">&quot;STORE&quot;</span>,<span class="number">6</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_KEYWORD,.bs.keyword=&#123;<span class="string">&quot;STOREDIST&quot;</span>,<span class="number">6</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,georadiusGetKeys,.args=GEORADIUS_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;georadiusbymember&quot;</span>,<span class="string">&quot;Query a sorted set representing a geospatial index to fetch members matching a given maximum distance from a member&quot;</span>,<span class="string">&quot;O(N+log(M)) where N is the number of elements inside the bounding box of the circular area delimited by center and radius and M is the number of items inside the index.&quot;</span>,<span class="string">&quot;3.2.0&quot;</span>,CMD_DOC_DEPRECATED,<span class="string">&quot;`GEOSEARCH` and `GEOSEARCHSTORE` with the `BYRADIUS` and `FROMMEMBER` arguments&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,COMMAND_GROUP_GEO,GEORADIUSBYMEMBER_History,GEORADIUSBYMEMBER_tips,georadiusbymemberCommand,<span class="number">-5</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_GEO,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_KEYWORD,.bs.keyword=&#123;<span class="string">&quot;STORE&quot;</span>,<span class="number">5</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_KEYWORD,.bs.keyword=&#123;<span class="string">&quot;STOREDIST&quot;</span>,<span class="number">5</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,georadiusGetKeys,.args=GEORADIUSBYMEMBER_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;georadiusbymember_ro&quot;</span>,<span class="string">&quot;A read-only variant for GEORADIUSBYMEMBER&quot;</span>,<span class="string">&quot;O(N+log(M)) where N is the number of elements inside the bounding box of the circular area delimited by center and radius and M is the number of items inside the index.&quot;</span>,<span class="string">&quot;3.2.10&quot;</span>,CMD_DOC_DEPRECATED,<span class="string">&quot;`GEOSEARCH` with the `BYRADIUS` and `FROMMEMBER` arguments&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,COMMAND_GROUP_GEO,GEORADIUSBYMEMBER_RO_History,GEORADIUSBYMEMBER_RO_tips,georadiusbymemberroCommand,<span class="number">-5</span>,CMD_READONLY,ACL_CATEGORY_GEO,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=GEORADIUSBYMEMBER_RO_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;georadius_ro&quot;</span>,<span class="string">&quot;A read-only variant for GEORADIUS&quot;</span>,<span class="string">&quot;O(N+log(M)) where N is the number of elements inside the bounding box of the circular area delimited by center and radius and M is the number of items inside the index.&quot;</span>,<span class="string">&quot;3.2.10&quot;</span>,CMD_DOC_DEPRECATED,<span class="string">&quot;`GEOSEARCH` with the `BYRADIUS` argument&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,COMMAND_GROUP_GEO,GEORADIUS_RO_History,GEORADIUS_RO_tips,georadiusroCommand,<span class="number">-6</span>,CMD_READONLY,ACL_CATEGORY_GEO,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=GEORADIUS_RO_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;geosearch&quot;</span>,<span class="string">&quot;Query a sorted set representing a geospatial index to fetch members inside an area of a box or a circle.&quot;</span>,<span class="string">&quot;O(N+log(M)) where N is the number of elements in the grid-aligned bounding box area around the shape provided as the filter and M is the number of items inside the shape&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GEO,GEOSEARCH_History,GEOSEARCH_tips,geosearchCommand,<span class="number">-7</span>,CMD_READONLY,ACL_CATEGORY_GEO,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=GEOSEARCH_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;geosearchstore&quot;</span>,<span class="string">&quot;Query a sorted set representing a geospatial index to fetch members inside an area of a box or a circle, and store the result in another key.&quot;</span>,<span class="string">&quot;O(N+log(M)) where N is the number of elements in the grid-aligned bounding box area around the shape provided as the filter and M is the number of items inside the shape&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_GEO,GEOSEARCHSTORE_History,GEOSEARCHSTORE_tips,geosearchstoreCommand,<span class="number">-8</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_GEO,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=GEOSEARCHSTORE_Args&#125;,</span><br><span class="line">    <span class="comment">/* hash */</span></span><br><span class="line">    &#123;<span class="string">&quot;hdel&quot;</span>,<span class="string">&quot;Delete one or more hash fields&quot;</span>,<span class="string">&quot;O(N) where N is the number of fields to be removed.&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HASH,HDEL_History,HDEL_tips,hdelCommand,<span class="number">-3</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_HASH,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=HDEL_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;hexists&quot;</span>,<span class="string">&quot;Determine if a hash field exists&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HASH,HEXISTS_History,HEXISTS_tips,hexistsCommand,<span class="number">3</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_HASH,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=HEXISTS_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;hget&quot;</span>,<span class="string">&quot;Get the value of a hash field&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HASH,HGET_History,HGET_tips,hgetCommand,<span class="number">3</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_HASH,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=HGET_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;hgetall&quot;</span>,<span class="string">&quot;Get all the fields and values in a hash&quot;</span>,<span class="string">&quot;O(N) where N is the size of the hash.&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HASH,HGETALL_History,HGETALL_tips,hgetallCommand,<span class="number">2</span>,CMD_READONLY,ACL_CATEGORY_HASH,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=HGETALL_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;hincrby&quot;</span>,<span class="string">&quot;Increment the integer value of a hash field by the given number&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HASH,HINCRBY_History,HINCRBY_tips,hincrbyCommand,<span class="number">4</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_HASH,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=HINCRBY_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;hincrbyfloat&quot;</span>,<span class="string">&quot;Increment the float value of a hash field by the given amount&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.6.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HASH,HINCRBYFLOAT_History,HINCRBYFLOAT_tips,hincrbyfloatCommand,<span class="number">4</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_HASH,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=HINCRBYFLOAT_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;hkeys&quot;</span>,<span class="string">&quot;Get all the fields in a hash&quot;</span>,<span class="string">&quot;O(N) where N is the size of the hash.&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HASH,HKEYS_History,HKEYS_tips,hkeysCommand,<span class="number">2</span>,CMD_READONLY,ACL_CATEGORY_HASH,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=HKEYS_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;hlen&quot;</span>,<span class="string">&quot;Get the number of fields in a hash&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HASH,HLEN_History,HLEN_tips,hlenCommand,<span class="number">2</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_HASH,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=HLEN_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;hmget&quot;</span>,<span class="string">&quot;Get the values of all the given hash fields&quot;</span>,<span class="string">&quot;O(N) where N is the number of fields being requested.&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HASH,HMGET_History,HMGET_tips,hmgetCommand,<span class="number">-3</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_HASH,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=HMGET_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;hmset&quot;</span>,<span class="string">&quot;Set multiple hash fields to multiple values&quot;</span>,<span class="string">&quot;O(N) where N is the number of fields being set.&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_DEPRECATED,<span class="string">&quot;`HSET` with multiple field-value pairs&quot;</span>,<span class="string">&quot;4.0.0&quot;</span>,COMMAND_GROUP_HASH,HMSET_History,HMSET_tips,hsetCommand,<span class="number">-4</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_HASH,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=HMSET_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;hrandfield&quot;</span>,<span class="string">&quot;Get one or multiple random fields from a hash&quot;</span>,<span class="string">&quot;O(N) where N is the number of fields returned&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HASH,HRANDFIELD_History,HRANDFIELD_tips,hrandfieldCommand,<span class="number">-2</span>,CMD_READONLY,ACL_CATEGORY_HASH,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=HRANDFIELD_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;hscan&quot;</span>,<span class="string">&quot;Incrementally iterate hash fields and associated values&quot;</span>,<span class="string">&quot;O(1) for every call. O(N) for a complete iteration, including enough command calls for the cursor to return back to 0. N is the number of elements inside the collection..&quot;</span>,<span class="string">&quot;2.8.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HASH,HSCAN_History,HSCAN_tips,hscanCommand,<span class="number">-3</span>,CMD_READONLY,ACL_CATEGORY_HASH,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=HSCAN_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;hset&quot;</span>,<span class="string">&quot;Set the string value of a hash field&quot;</span>,<span class="string">&quot;O(1) for each field/value pair added, so O(N) to add N field/value pairs when the command is called with multiple field/value pairs.&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HASH,HSET_History,HSET_tips,hsetCommand,<span class="number">-4</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_HASH,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=HSET_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;hsetnx&quot;</span>,<span class="string">&quot;Set the value of a hash field, only if the field does not exist&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HASH,HSETNX_History,HSETNX_tips,hsetnxCommand,<span class="number">4</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_HASH,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_INSERT,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=HSETNX_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;hstrlen&quot;</span>,<span class="string">&quot;Get the length of the value of a hash field&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;3.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HASH,HSTRLEN_History,HSTRLEN_tips,hstrlenCommand,<span class="number">3</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_HASH,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=HSTRLEN_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;hvals&quot;</span>,<span class="string">&quot;Get all the values in a hash&quot;</span>,<span class="string">&quot;O(N) where N is the size of the hash.&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HASH,HVALS_History,HVALS_tips,hvalsCommand,<span class="number">2</span>,CMD_READONLY,ACL_CATEGORY_HASH,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=HVALS_Args&#125;,</span><br><span class="line">    <span class="comment">/* hyperloglog */</span></span><br><span class="line">    &#123;<span class="string">&quot;pfadd&quot;</span>,<span class="string">&quot;Adds the specified elements to the specified HyperLogLog.&quot;</span>,<span class="string">&quot;O(1) to add every element.&quot;</span>,<span class="string">&quot;2.8.9&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HYPERLOGLOG,PFADD_History,PFADD_tips,pfaddCommand,<span class="number">-2</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_HYPERLOGLOG,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_INSERT,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=PFADD_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;pfcount&quot;</span>,<span class="string">&quot;Return the approximated cardinality of the set(s) observed by the HyperLogLog at key(s).&quot;</span>,<span class="string">&quot;O(1) with a very small average constant time when called with a single key. O(N) with N being the number of keys, and much bigger constant times, when called with multiple keys.&quot;</span>,<span class="string">&quot;2.8.9&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HYPERLOGLOG,PFCOUNT_History,PFCOUNT_tips,pfcountCommand,<span class="number">-2</span>,CMD_READONLY|CMD_MAY_REPLICATE,ACL_CATEGORY_HYPERLOGLOG,&#123;&#123;<span class="string">&quot;RW because it may change the internal representation of the key, and propagate to replicas&quot;</span>,CMD_KEY_RW|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=PFCOUNT_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;pfdebug&quot;</span>,<span class="string">&quot;Internal commands for debugging HyperLogLog values&quot;</span>,<span class="string">&quot;N/A&quot;</span>,<span class="string">&quot;2.8.9&quot;</span>,CMD_DOC_SYSCMD,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HYPERLOGLOG,PFDEBUG_History,PFDEBUG_tips,pfdebugCommand,<span class="number">3</span>,CMD_WRITE|CMD_DENYOOM|CMD_ADMIN,ACL_CATEGORY_HYPERLOGLOG,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=PFDEBUG_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;pfmerge&quot;</span>,<span class="string">&quot;Merge N different HyperLogLogs into a single one.&quot;</span>,<span class="string">&quot;O(N) to merge N HyperLogLogs, but with high constant times.&quot;</span>,<span class="string">&quot;2.8.9&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HYPERLOGLOG,PFMERGE_History,PFMERGE_tips,pfmergeCommand,<span class="number">-2</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_HYPERLOGLOG,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_INSERT,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=PFMERGE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;pfselftest&quot;</span>,<span class="string">&quot;An internal command for testing HyperLogLog values&quot;</span>,<span class="string">&quot;N/A&quot;</span>,<span class="string">&quot;2.8.9&quot;</span>,CMD_DOC_SYSCMD,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_HYPERLOGLOG,PFSELFTEST_History,PFSELFTEST_tips,pfselftestCommand,<span class="number">1</span>,CMD_ADMIN,ACL_CATEGORY_HYPERLOGLOG&#125;,</span><br><span class="line">    <span class="comment">/* list */</span></span><br><span class="line">    &#123;<span class="string">&quot;blmove&quot;</span>,<span class="string">&quot;Pop an element from a list, push it to another list and return it; or block until one is available&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,BLMOVE_History,BLMOVE_tips,blmoveCommand,<span class="number">6</span>,CMD_WRITE|CMD_DENYOOM|CMD_NOSCRIPT|CMD_BLOCKING,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_INSERT,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=BLMOVE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;blmpop&quot;</span>,<span class="string">&quot;Pop elements from a list, or block until one is available&quot;</span>,<span class="string">&quot;O(N+M) where N is the number of provided keys and M is the number of elements returned.&quot;</span>,<span class="string">&quot;7.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,BLMPOP_History,BLMPOP_tips,blmpopCommand,<span class="number">-5</span>,CMD_WRITE|CMD_BLOCKING,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_KEYNUM,.fk.keynum=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;&#125;,blmpopGetKeys,.args=BLMPOP_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;blpop&quot;</span>,<span class="string">&quot;Remove and get the first element in a list, or block until one is available&quot;</span>,<span class="string">&quot;O(N) where N is the number of provided keys.&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,BLPOP_History,BLPOP_tips,blpopCommand,<span class="number">-3</span>,CMD_WRITE|CMD_NOSCRIPT|CMD_BLOCKING,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-2</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=BLPOP_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;brpop&quot;</span>,<span class="string">&quot;Remove and get the last element in a list, or block until one is available&quot;</span>,<span class="string">&quot;O(N) where N is the number of provided keys.&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,BRPOP_History,BRPOP_tips,brpopCommand,<span class="number">-3</span>,CMD_WRITE|CMD_NOSCRIPT|CMD_BLOCKING,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-2</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=BRPOP_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;brpoplpush&quot;</span>,<span class="string">&quot;Pop an element from a list, push it to another list and return it; or block until one is available&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.2.0&quot;</span>,CMD_DOC_DEPRECATED,<span class="string">&quot;`BLMOVE` with the `RIGHT` and `LEFT` arguments&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,COMMAND_GROUP_LIST,BRPOPLPUSH_History,BRPOPLPUSH_tips,brpoplpushCommand,<span class="number">4</span>,CMD_WRITE|CMD_DENYOOM|CMD_NOSCRIPT|CMD_BLOCKING,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_INSERT,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=BRPOPLPUSH_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;lindex&quot;</span>,<span class="string">&quot;Get an element from a list by its index&quot;</span>,<span class="string">&quot;O(N) where N is the number of elements to traverse to get to the element at index. This makes asking for the first or the last element of the list O(1).&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,LINDEX_History,LINDEX_tips,lindexCommand,<span class="number">3</span>,CMD_READONLY,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=LINDEX_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;linsert&quot;</span>,<span class="string">&quot;Insert an element before or after another element in a list&quot;</span>,<span class="string">&quot;O(N) where N is the number of elements to traverse before seeing the value pivot. This means that inserting somewhere on the left end on the list (head) can be considered O(1) and inserting somewhere on the right end (tail) is O(N).&quot;</span>,<span class="string">&quot;2.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,LINSERT_History,LINSERT_tips,linsertCommand,<span class="number">5</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_INSERT,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=LINSERT_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;llen&quot;</span>,<span class="string">&quot;Get the length of a list&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,LLEN_History,LLEN_tips,llenCommand,<span class="number">2</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=LLEN_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;lmove&quot;</span>,<span class="string">&quot;Pop an element from a list, push it to another list and return it&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,LMOVE_History,LMOVE_tips,lmoveCommand,<span class="number">5</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_INSERT,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=LMOVE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;lmpop&quot;</span>,<span class="string">&quot;Pop elements from a list&quot;</span>,<span class="string">&quot;O(N+M) where N is the number of provided keys and M is the number of elements returned.&quot;</span>,<span class="string">&quot;7.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,LMPOP_History,LMPOP_tips,lmpopCommand,<span class="number">-4</span>,CMD_WRITE,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_KEYNUM,.fk.keynum=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;&#125;,lmpopGetKeys,.args=LMPOP_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;lpop&quot;</span>,<span class="string">&quot;Remove and get the first elements in a list&quot;</span>,<span class="string">&quot;O(N) where N is the number of elements returned&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,LPOP_History,LPOP_tips,lpopCommand,<span class="number">-2</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=LPOP_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;lpos&quot;</span>,<span class="string">&quot;Return the index of matching elements on a list&quot;</span>,<span class="string">&quot;O(N) where N is the number of elements in the list, for the average case. When searching for elements near the head or the tail of the list, or when the MAXLEN option is provided, the command may run in constant time.&quot;</span>,<span class="string">&quot;6.0.6&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,LPOS_History,LPOS_tips,lposCommand,<span class="number">-3</span>,CMD_READONLY,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=LPOS_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;lpush&quot;</span>,<span class="string">&quot;Prepend one or multiple elements to a list&quot;</span>,<span class="string">&quot;O(1) for each element added, so O(N) to add N elements when the command is called with multiple arguments.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,LPUSH_History,LPUSH_tips,lpushCommand,<span class="number">-3</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_INSERT,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=LPUSH_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;lpushx&quot;</span>,<span class="string">&quot;Prepend an element to a list, only if the list exists&quot;</span>,<span class="string">&quot;O(1) for each element added, so O(N) to add N elements when the command is called with multiple arguments.&quot;</span>,<span class="string">&quot;2.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,LPUSHX_History,LPUSHX_tips,lpushxCommand,<span class="number">-3</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_INSERT,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=LPUSHX_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;lrange&quot;</span>,<span class="string">&quot;Get a range of elements from a list&quot;</span>,<span class="string">&quot;O(S+N) where S is the distance of start offset from HEAD for small lists, from nearest end (HEAD or TAIL) for large lists; and N is the number of elements in the specified range.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,LRANGE_History,LRANGE_tips,lrangeCommand,<span class="number">4</span>,CMD_READONLY,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=LRANGE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;lrem&quot;</span>,<span class="string">&quot;Remove elements from a list&quot;</span>,<span class="string">&quot;O(N+M) where N is the length of the list and M is the number of elements removed.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,LREM_History,LREM_tips,lremCommand,<span class="number">4</span>,CMD_WRITE,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=LREM_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;lset&quot;</span>,<span class="string">&quot;Set the value of an element in a list by its index&quot;</span>,<span class="string">&quot;O(N) where N is the length of the list. Setting either the first or the last element of the list is O(1).&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,LSET_History,LSET_tips,lsetCommand,<span class="number">4</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=LSET_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;ltrim&quot;</span>,<span class="string">&quot;Trim a list to the specified range&quot;</span>,<span class="string">&quot;O(N) where N is the number of elements to be removed by the operation.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,LTRIM_History,LTRIM_tips,ltrimCommand,<span class="number">4</span>,CMD_WRITE,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=LTRIM_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;rpop&quot;</span>,<span class="string">&quot;Remove and get the last elements in a list&quot;</span>,<span class="string">&quot;O(N) where N is the number of elements returned&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,RPOP_History,RPOP_tips,rpopCommand,<span class="number">-2</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=RPOP_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;rpoplpush&quot;</span>,<span class="string">&quot;Remove the last element in a list, prepend it to another list and return it&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.2.0&quot;</span>,CMD_DOC_DEPRECATED,<span class="string">&quot;`LMOVE` with the `RIGHT` and `LEFT` arguments&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,COMMAND_GROUP_LIST,RPOPLPUSH_History,RPOPLPUSH_tips,rpoplpushCommand,<span class="number">3</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_INSERT,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=RPOPLPUSH_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;rpush&quot;</span>,<span class="string">&quot;Append one or multiple elements to a list&quot;</span>,<span class="string">&quot;O(1) for each element added, so O(N) to add N elements when the command is called with multiple arguments.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,RPUSH_History,RPUSH_tips,rpushCommand,<span class="number">-3</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_INSERT,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=RPUSH_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;rpushx&quot;</span>,<span class="string">&quot;Append an element to a list, only if the list exists&quot;</span>,<span class="string">&quot;O(1) for each element added, so O(N) to add N elements when the command is called with multiple arguments.&quot;</span>,<span class="string">&quot;2.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_LIST,RPUSHX_History,RPUSHX_tips,rpushxCommand,<span class="number">-3</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_LIST,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_INSERT,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=RPUSHX_Args&#125;,</span><br><span class="line">    <span class="comment">/* pubsub */</span></span><br><span class="line">    &#123;<span class="string">&quot;psubscribe&quot;</span>,<span class="string">&quot;Listen for messages published to channels matching the given patterns&quot;</span>,<span class="string">&quot;O(N) where N is the number of patterns the client is already subscribed to.&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_PUBSUB,PSUBSCRIBE_History,PSUBSCRIBE_tips,psubscribeCommand,<span class="number">-2</span>,CMD_PUBSUB|CMD_NOSCRIPT|CMD_LOADING|CMD_STALE|CMD_SENTINEL,<span class="number">0</span>,.args=PSUBSCRIBE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;publish&quot;</span>,<span class="string">&quot;Post a message to a channel&quot;</span>,<span class="string">&quot;O(N+M) where N is the number of clients subscribed to the receiving channel and M is the total number of subscribed patterns (by any client).&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_PUBSUB,PUBLISH_History,PUBLISH_tips,publishCommand,<span class="number">3</span>,CMD_PUBSUB|CMD_LOADING|CMD_STALE|CMD_FAST|CMD_MAY_REPLICATE|CMD_SENTINEL,<span class="number">0</span>,.args=PUBLISH_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;pubsub&quot;</span>,<span class="string">&quot;A container for Pub/Sub commands&quot;</span>,<span class="string">&quot;Depends on subcommand.&quot;</span>,<span class="string">&quot;2.8.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_PUBSUB,PUBSUB_History,PUBSUB_tips,<span class="literal">NULL</span>,<span class="number">-2</span>,<span class="number">0</span>,<span class="number">0</span>,.subcommands=PUBSUB_Subcommands&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;punsubscribe&quot;</span>,<span class="string">&quot;Stop listening for messages posted to channels matching the given patterns&quot;</span>,<span class="string">&quot;O(N+M) where N is the number of patterns the client is already subscribed and M is the number of total patterns subscribed in the system (by any client).&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_PUBSUB,PUNSUBSCRIBE_History,PUNSUBSCRIBE_tips,punsubscribeCommand,<span class="number">-1</span>,CMD_PUBSUB|CMD_NOSCRIPT|CMD_LOADING|CMD_STALE|CMD_SENTINEL,<span class="number">0</span>,.args=PUNSUBSCRIBE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;spublish&quot;</span>,<span class="string">&quot;Post a message to a shard channel&quot;</span>,<span class="string">&quot;O(N) where N is the number of clients subscribed to the receiving shard channel.&quot;</span>,<span class="string">&quot;7.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_PUBSUB,SPUBLISH_History,SPUBLISH_tips,spublishCommand,<span class="number">3</span>,CMD_PUBSUB|CMD_LOADING|CMD_STALE|CMD_FAST|CMD_MAY_REPLICATE,<span class="number">0</span>,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_NOT_KEY,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SPUBLISH_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;ssubscribe&quot;</span>,<span class="string">&quot;Listen for messages published to the given shard channels&quot;</span>,<span class="string">&quot;O(N) where N is the number of shard channels to subscribe to.&quot;</span>,<span class="string">&quot;7.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_PUBSUB,SSUBSCRIBE_History,SSUBSCRIBE_tips,ssubscribeCommand,<span class="number">-2</span>,CMD_PUBSUB|CMD_NOSCRIPT|CMD_LOADING|CMD_STALE,<span class="number">0</span>,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_NOT_KEY,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SSUBSCRIBE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;subscribe&quot;</span>,<span class="string">&quot;Listen for messages published to the given channels&quot;</span>,<span class="string">&quot;O(N) where N is the number of channels to subscribe to.&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_PUBSUB,SUBSCRIBE_History,SUBSCRIBE_tips,subscribeCommand,<span class="number">-2</span>,CMD_PUBSUB|CMD_NOSCRIPT|CMD_LOADING|CMD_STALE|CMD_SENTINEL,<span class="number">0</span>,.args=SUBSCRIBE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;sunsubscribe&quot;</span>,<span class="string">&quot;Stop listening for messages posted to the given shard channels&quot;</span>,<span class="string">&quot;O(N) where N is the number of clients already subscribed to a shard channel.&quot;</span>,<span class="string">&quot;7.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_PUBSUB,SUNSUBSCRIBE_History,SUNSUBSCRIBE_tips,sunsubscribeCommand,<span class="number">-1</span>,CMD_PUBSUB|CMD_NOSCRIPT|CMD_LOADING|CMD_STALE,<span class="number">0</span>,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_NOT_KEY,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SUNSUBSCRIBE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;unsubscribe&quot;</span>,<span class="string">&quot;Stop listening for messages posted to the given channels&quot;</span>,<span class="string">&quot;O(N) where N is the number of clients already subscribed to a channel.&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_PUBSUB,UNSUBSCRIBE_History,UNSUBSCRIBE_tips,unsubscribeCommand,<span class="number">-1</span>,CMD_PUBSUB|CMD_NOSCRIPT|CMD_LOADING|CMD_STALE|CMD_SENTINEL,<span class="number">0</span>,.args=UNSUBSCRIBE_Args&#125;,</span><br><span class="line">    <span class="comment">/* scripting */</span></span><br><span class="line">    &#123;<span class="string">&quot;eval&quot;</span>,<span class="string">&quot;Execute a Lua script server side&quot;</span>,<span class="string">&quot;Depends on the script that is executed.&quot;</span>,<span class="string">&quot;2.6.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SCRIPTING,EVAL_History,EVAL_tips,evalCommand,<span class="number">-3</span>,CMD_NOSCRIPT|CMD_SKIP_MONITOR|CMD_MAY_REPLICATE|CMD_NO_MANDATORY_KEYS|CMD_STALE,ACL_CATEGORY_SCRIPTING,&#123;&#123;<span class="string">&quot;We cannot tell how the keys will be used so we assume the worst, RW and UPDATE&quot;</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_KEYNUM,.fk.keynum=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;&#125;,evalGetKeys,.args=EVAL_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;evalsha&quot;</span>,<span class="string">&quot;Execute a Lua script server side&quot;</span>,<span class="string">&quot;Depends on the script that is executed.&quot;</span>,<span class="string">&quot;2.6.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SCRIPTING,EVALSHA_History,EVALSHA_tips,evalShaCommand,<span class="number">-3</span>,CMD_NOSCRIPT|CMD_SKIP_MONITOR|CMD_MAY_REPLICATE|CMD_NO_MANDATORY_KEYS|CMD_STALE,ACL_CATEGORY_SCRIPTING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_KEYNUM,.fk.keynum=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;&#125;,evalGetKeys,.args=EVALSHA_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;evalsha_ro&quot;</span>,<span class="string">&quot;Execute a read-only Lua script server side&quot;</span>,<span class="string">&quot;Depends on the script that is executed.&quot;</span>,<span class="string">&quot;7.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SCRIPTING,EVALSHA_RO_History,EVALSHA_RO_tips,evalShaRoCommand,<span class="number">-3</span>,CMD_NOSCRIPT|CMD_SKIP_MONITOR|CMD_NO_MANDATORY_KEYS|CMD_STALE|CMD_READONLY,ACL_CATEGORY_SCRIPTING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_KEYNUM,.fk.keynum=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;&#125;,evalGetKeys,.args=EVALSHA_RO_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;eval_ro&quot;</span>,<span class="string">&quot;Execute a read-only Lua script server side&quot;</span>,<span class="string">&quot;Depends on the script that is executed.&quot;</span>,<span class="string">&quot;7.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SCRIPTING,EVAL_RO_History,EVAL_RO_tips,evalRoCommand,<span class="number">-3</span>,CMD_NOSCRIPT|CMD_SKIP_MONITOR|CMD_NO_MANDATORY_KEYS|CMD_STALE|CMD_READONLY,ACL_CATEGORY_SCRIPTING,&#123;&#123;<span class="string">&quot;We cannot tell how the keys will be used so we assume the worst, RO and ACCESS&quot;</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_KEYNUM,.fk.keynum=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;&#125;,evalGetKeys,.args=EVAL_RO_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;fcall&quot;</span>,<span class="string">&quot;Invoke a function&quot;</span>,<span class="string">&quot;Depends on the function that is executed.&quot;</span>,<span class="string">&quot;7.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SCRIPTING,FCALL_History,FCALL_tips,fcallCommand,<span class="number">-3</span>,CMD_NOSCRIPT|CMD_SKIP_MONITOR|CMD_MAY_REPLICATE|CMD_NO_MANDATORY_KEYS|CMD_STALE,ACL_CATEGORY_SCRIPTING,&#123;&#123;<span class="string">&quot;We cannot tell how the keys will be used so we assume the worst, RW and UPDATE&quot;</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_KEYNUM,.fk.keynum=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;&#125;,functionGetKeys,.args=FCALL_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;fcall_ro&quot;</span>,<span class="string">&quot;Invoke a read-only function&quot;</span>,<span class="string">&quot;Depends on the function that is executed.&quot;</span>,<span class="string">&quot;7.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SCRIPTING,FCALL_RO_History,FCALL_RO_tips,fcallroCommand,<span class="number">-3</span>,CMD_NOSCRIPT|CMD_SKIP_MONITOR|CMD_NO_MANDATORY_KEYS|CMD_STALE|CMD_READONLY,ACL_CATEGORY_SCRIPTING,&#123;&#123;<span class="string">&quot;We cannot tell how the keys will be used so we assume the worst, RO and ACCESS&quot;</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_KEYNUM,.fk.keynum=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;&#125;,functionGetKeys,.args=FCALL_RO_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;function&quot;</span>,<span class="string">&quot;A container for function commands&quot;</span>,<span class="string">&quot;Depends on subcommand.&quot;</span>,<span class="string">&quot;7.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SCRIPTING,FUNCTION_History,FUNCTION_tips,<span class="literal">NULL</span>,<span class="number">-2</span>,<span class="number">0</span>,<span class="number">0</span>,.subcommands=FUNCTION_Subcommands&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;script&quot;</span>,<span class="string">&quot;A container for Lua scripts management commands&quot;</span>,<span class="string">&quot;Depends on subcommand.&quot;</span>,<span class="string">&quot;2.6.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SCRIPTING,SCRIPT_History,SCRIPT_tips,<span class="literal">NULL</span>,<span class="number">-2</span>,<span class="number">0</span>,<span class="number">0</span>,.subcommands=SCRIPT_Subcommands&#125;,</span><br><span class="line">    <span class="comment">/* sentinel 哨兵 */</span></span><br><span class="line">    &#123;<span class="string">&quot;sentinel&quot;</span>,<span class="string">&quot;A container for Sentinel commands&quot;</span>,<span class="string">&quot;Depends on subcommand.&quot;</span>,<span class="string">&quot;2.8.4&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SENTINEL,SENTINEL_History,SENTINEL_tips,<span class="literal">NULL</span>,<span class="number">-2</span>,CMD_ADMIN|CMD_SENTINEL|CMD_ONLY_SENTINEL,<span class="number">0</span>,.subcommands=SENTINEL_Subcommands&#125;,</span><br><span class="line">    <span class="comment">/* server 服务 */</span></span><br><span class="line">    &#123;<span class="string">&quot;acl&quot;</span>,<span class="string">&quot;A container for Access List Control commands &quot;</span>,<span class="string">&quot;Depends on subcommand.&quot;</span>,<span class="string">&quot;6.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,ACL_History,ACL_tips,<span class="literal">NULL</span>,<span class="number">-2</span>,CMD_SENTINEL,<span class="number">0</span>,.subcommands=ACL_Subcommands&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;bgrewriteaof&quot;</span>,<span class="string">&quot;Asynchronously rewrite the append-only file&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,BGREWRITEAOF_History,BGREWRITEAOF_tips,bgrewriteaofCommand,<span class="number">1</span>,CMD_NO_ASYNC_LOADING|CMD_ADMIN|CMD_NOSCRIPT,<span class="number">0</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;bgsave&quot;</span>,<span class="string">&quot;Asynchronously save the dataset to disk&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,BGSAVE_History,BGSAVE_tips,bgsaveCommand,<span class="number">-1</span>,CMD_NO_ASYNC_LOADING|CMD_ADMIN|CMD_NOSCRIPT,<span class="number">0</span>,.args=BGSAVE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;command&quot;</span>,<span class="string">&quot;Get array of Redis command details&quot;</span>,<span class="string">&quot;O(N) where N is the total number of Redis commands&quot;</span>,<span class="string">&quot;2.8.13&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,COMMAND_History,COMMAND_tips,commandCommand,<span class="number">-1</span>,CMD_LOADING|CMD_STALE|CMD_SENTINEL,ACL_CATEGORY_CONNECTION,.subcommands=COMMAND_Subcommands&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;config&quot;</span>,<span class="string">&quot;A container for server configuration commands&quot;</span>,<span class="string">&quot;Depends on subcommand.&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,CONFIG_History,CONFIG_tips,<span class="literal">NULL</span>,<span class="number">-2</span>,<span class="number">0</span>,<span class="number">0</span>,.subcommands=CONFIG_Subcommands&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;dbsize&quot;</span>,<span class="string">&quot;Return the number of keys in the selected database&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,DBSIZE_History,DBSIZE_tips,dbsizeCommand,<span class="number">1</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_KEYSPACE&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;debug&quot;</span>,<span class="string">&quot;A container for debugging commands&quot;</span>,<span class="string">&quot;Depends on subcommand.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_SYSCMD,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,DEBUG_History,DEBUG_tips,debugCommand,<span class="number">-2</span>,CMD_ADMIN|CMD_NOSCRIPT|CMD_LOADING|CMD_STALE|CMD_PROTECTED,<span class="number">0</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;failover&quot;</span>,<span class="string">&quot;Start a coordinated failover between this server and one of its replicas.&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,FAILOVER_History,FAILOVER_tips,failoverCommand,<span class="number">-1</span>,CMD_ADMIN|CMD_NOSCRIPT|CMD_STALE,<span class="number">0</span>,.args=FAILOVER_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;flushall&quot;</span>,<span class="string">&quot;Remove all keys from all databases&quot;</span>,<span class="string">&quot;O(N) where N is the total number of keys in all databases&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,FLUSHALL_History,FLUSHALL_tips,flushallCommand,<span class="number">-1</span>,CMD_WRITE,ACL_CATEGORY_KEYSPACE|ACL_CATEGORY_DANGEROUS,.args=FLUSHALL_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;flushdb&quot;</span>,<span class="string">&quot;Remove all keys from the current database&quot;</span>,<span class="string">&quot;O(N) where N is the number of keys in the selected database&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,FLUSHDB_History,FLUSHDB_tips,flushdbCommand,<span class="number">-1</span>,CMD_WRITE,ACL_CATEGORY_KEYSPACE|ACL_CATEGORY_DANGEROUS,.args=FLUSHDB_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;info&quot;</span>,<span class="string">&quot;Get information and statistics about the server&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,INFO_History,INFO_tips,infoCommand,<span class="number">-1</span>,CMD_LOADING|CMD_STALE|CMD_SENTINEL,ACL_CATEGORY_DANGEROUS,.args=INFO_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;lastsave&quot;</span>,<span class="string">&quot;Get the UNIX time stamp of the last successful save to disk&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,LASTSAVE_History,LASTSAVE_tips,lastsaveCommand,<span class="number">1</span>,CMD_LOADING|CMD_STALE|CMD_FAST,ACL_CATEGORY_ADMIN|ACL_CATEGORY_DANGEROUS&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;latency&quot;</span>,<span class="string">&quot;A container for latency diagnostics commands&quot;</span>,<span class="string">&quot;Depends on subcommand.&quot;</span>,<span class="string">&quot;2.8.13&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,LATENCY_History,LATENCY_tips,<span class="literal">NULL</span>,<span class="number">-2</span>,<span class="number">0</span>,<span class="number">0</span>,.subcommands=LATENCY_Subcommands&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;lolwut&quot;</span>,<span class="string">&quot;Display some computer art and the Redis version&quot;</span>,<span class="literal">NULL</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,LOLWUT_History,LOLWUT_tips,lolwutCommand,<span class="number">-1</span>,CMD_READONLY|CMD_FAST,<span class="number">0</span>,.args=LOLWUT_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;memory&quot;</span>,<span class="string">&quot;A container for memory diagnostics commands&quot;</span>,<span class="string">&quot;Depends on subcommand.&quot;</span>,<span class="string">&quot;4.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,MEMORY_History,MEMORY_tips,<span class="literal">NULL</span>,<span class="number">-2</span>,<span class="number">0</span>,<span class="number">0</span>,.subcommands=MEMORY_Subcommands&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;module&quot;</span>,<span class="string">&quot;A container for module commands&quot;</span>,<span class="string">&quot;Depends on subcommand.&quot;</span>,<span class="string">&quot;4.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,MODULE_History,MODULE_tips,<span class="literal">NULL</span>,<span class="number">-2</span>,<span class="number">0</span>,<span class="number">0</span>,.subcommands=MODULE_Subcommands&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;monitor&quot;</span>,<span class="string">&quot;Listen for all requests received by the server in real time&quot;</span>,<span class="literal">NULL</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,MONITOR_History,MONITOR_tips,monitorCommand,<span class="number">1</span>,CMD_ADMIN|CMD_NOSCRIPT|CMD_LOADING|CMD_STALE,<span class="number">0</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;psync&quot;</span>,<span class="string">&quot;Internal command used for replication&quot;</span>,<span class="literal">NULL</span>,<span class="string">&quot;2.8.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,PSYNC_History,PSYNC_tips,syncCommand,<span class="number">-3</span>,CMD_NO_ASYNC_LOADING|CMD_ADMIN|CMD_NO_MULTI|CMD_NOSCRIPT,<span class="number">0</span>,.args=PSYNC_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;replconf&quot;</span>,<span class="string">&quot;An internal command for configuring the replication stream&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;3.0.0&quot;</span>,CMD_DOC_SYSCMD,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,REPLCONF_History,REPLCONF_tips,replconfCommand,<span class="number">-1</span>,CMD_ADMIN|CMD_NOSCRIPT|CMD_LOADING|CMD_STALE|CMD_ALLOW_BUSY,<span class="number">0</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;replicaof&quot;</span>,<span class="string">&quot;Make the server a replica of another instance, or promote it as master.&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,REPLICAOF_History,REPLICAOF_tips,replicaofCommand,<span class="number">3</span>,CMD_NO_ASYNC_LOADING|CMD_ADMIN|CMD_NOSCRIPT|CMD_STALE,<span class="number">0</span>,.args=REPLICAOF_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;restore-asking&quot;</span>,<span class="string">&quot;An internal command for migrating keys in a cluster&quot;</span>,<span class="string">&quot;O(1) to create the new key and additional O(N*M) to reconstruct the serialized value, where N is the number of Redis objects composing the value and M their average size. For small string values the time complexity is thus O(1)+O(1*M) where M is small, so simply O(1). However for sorted set values the complexity is O(N*M*log(N)) because inserting values into sorted sets is O(log(N)).&quot;</span>,<span class="string">&quot;3.0.0&quot;</span>,CMD_DOC_SYSCMD,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,RESTORE_ASKING_History,RESTORE_ASKING_tips,restoreCommand,<span class="number">-4</span>,CMD_WRITE|CMD_DENYOOM|CMD_ASKING,ACL_CATEGORY_KEYSPACE|ACL_CATEGORY_DANGEROUS,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=RESTORE_ASKING_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;role&quot;</span>,<span class="string">&quot;Return the role of the instance in the context of replication&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.8.12&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,ROLE_History,ROLE_tips,roleCommand,<span class="number">1</span>,CMD_NOSCRIPT|CMD_LOADING|CMD_STALE|CMD_FAST|CMD_SENTINEL,ACL_CATEGORY_ADMIN|ACL_CATEGORY_DANGEROUS&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;save&quot;</span>,<span class="string">&quot;Synchronously save the dataset to disk&quot;</span>,<span class="string">&quot;O(N) where N is the total number of keys in all databases&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,SAVE_History,SAVE_tips,saveCommand,<span class="number">1</span>,CMD_NO_ASYNC_LOADING|CMD_ADMIN|CMD_NOSCRIPT|CMD_NO_MULTI,<span class="number">0</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;shutdown&quot;</span>,<span class="string">&quot;Synchronously save the dataset to disk and then shut down the server&quot;</span>,<span class="string">&quot;O(N) when saving, where N is the total number of keys in all databases when saving data, otherwise O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,SHUTDOWN_History,SHUTDOWN_tips,shutdownCommand,<span class="number">-1</span>,CMD_ADMIN|CMD_NOSCRIPT|CMD_LOADING|CMD_STALE|CMD_NO_MULTI|CMD_SENTINEL|CMD_ALLOW_BUSY,<span class="number">0</span>,.args=SHUTDOWN_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;slaveof&quot;</span>,<span class="string">&quot;Make the server a replica of another instance, or promote it as master.&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_DEPRECATED,<span class="string">&quot;`REPLICAOF`&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,COMMAND_GROUP_SERVER,SLAVEOF_History,SLAVEOF_tips,replicaofCommand,<span class="number">3</span>,CMD_NO_ASYNC_LOADING|CMD_ADMIN|CMD_NOSCRIPT|CMD_STALE,<span class="number">0</span>,.args=SLAVEOF_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;slowlog&quot;</span>,<span class="string">&quot;A container for slow log commands&quot;</span>,<span class="string">&quot;Depends on subcommand.&quot;</span>,<span class="string">&quot;2.2.12&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,SLOWLOG_History,SLOWLOG_tips,<span class="literal">NULL</span>,<span class="number">-2</span>,<span class="number">0</span>,<span class="number">0</span>,.subcommands=SLOWLOG_Subcommands&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;swapdb&quot;</span>,<span class="string">&quot;Swaps two Redis databases&quot;</span>,<span class="string">&quot;O(N) where N is the count of clients watching or blocking on keys from both databases.&quot;</span>,<span class="string">&quot;4.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,SWAPDB_History,SWAPDB_tips,swapdbCommand,<span class="number">3</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_KEYSPACE|ACL_CATEGORY_DANGEROUS,.args=SWAPDB_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;sync&quot;</span>,<span class="string">&quot;Internal command used for replication&quot;</span>,<span class="literal">NULL</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,SYNC_History,SYNC_tips,syncCommand,<span class="number">1</span>,CMD_NO_ASYNC_LOADING|CMD_ADMIN|CMD_NO_MULTI|CMD_NOSCRIPT,<span class="number">0</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;time&quot;</span>,<span class="string">&quot;Return the current server time&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.6.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SERVER,TIME_History,TIME_tips,timeCommand,<span class="number">1</span>,CMD_LOADING|CMD_STALE|CMD_FAST,<span class="number">0</span>&#125;,</span><br><span class="line">    <span class="comment">/* set */</span></span><br><span class="line">    &#123;<span class="string">&quot;sadd&quot;</span>,<span class="string">&quot;Add one or more members to a set&quot;</span>,<span class="string">&quot;O(1) for each element added, so O(N) to add N elements when the command is called with multiple arguments.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SET,SADD_History,SADD_tips,saddCommand,<span class="number">-3</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_SET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_INSERT,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SADD_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;scard&quot;</span>,<span class="string">&quot;Get the number of members in a set&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SET,SCARD_History,SCARD_tips,scardCommand,<span class="number">2</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_SET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SCARD_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;sdiff&quot;</span>,<span class="string">&quot;Subtract multiple sets&quot;</span>,<span class="string">&quot;O(N) where N is the total number of elements in all given sets.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SET,SDIFF_History,SDIFF_tips,sdiffCommand,<span class="number">-2</span>,CMD_READONLY,ACL_CATEGORY_SET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SDIFF_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;sdiffstore&quot;</span>,<span class="string">&quot;Subtract multiple sets and store the resulting set in a key&quot;</span>,<span class="string">&quot;O(N) where N is the total number of elements in all given sets.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SET,SDIFFSTORE_History,SDIFFSTORE_tips,sdiffstoreCommand,<span class="number">-3</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_SET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SDIFFSTORE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;sinter&quot;</span>,<span class="string">&quot;Intersect multiple sets&quot;</span>,<span class="string">&quot;O(N*M) worst case where N is the cardinality of the smallest set and M is the number of sets.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SET,SINTER_History,SINTER_tips,sinterCommand,<span class="number">-2</span>,CMD_READONLY,ACL_CATEGORY_SET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SINTER_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;sintercard&quot;</span>,<span class="string">&quot;Intersect multiple sets and return the cardinality of the result&quot;</span>,<span class="string">&quot;O(N*M) worst case where N is the cardinality of the smallest set and M is the number of sets.&quot;</span>,<span class="string">&quot;7.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SET,SINTERCARD_History,SINTERCARD_tips,sinterCardCommand,<span class="number">-3</span>,CMD_READONLY,ACL_CATEGORY_SET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_KEYNUM,.fk.keynum=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;&#125;,sintercardGetKeys,.args=SINTERCARD_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;sinterstore&quot;</span>,<span class="string">&quot;Intersect multiple sets and store the resulting set in a key&quot;</span>,<span class="string">&quot;O(N*M) worst case where N is the cardinality of the smallest set and M is the number of sets.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SET,SINTERSTORE_History,SINTERSTORE_tips,sinterstoreCommand,<span class="number">-3</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_SET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SINTERSTORE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;sismember&quot;</span>,<span class="string">&quot;Determine if a given value is a member of a set&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SET,SISMEMBER_History,SISMEMBER_tips,sismemberCommand,<span class="number">3</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_SET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SISMEMBER_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;smembers&quot;</span>,<span class="string">&quot;Get all the members in a set&quot;</span>,<span class="string">&quot;O(N) where N is the set cardinality.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SET,SMEMBERS_History,SMEMBERS_tips,sinterCommand,<span class="number">2</span>,CMD_READONLY,ACL_CATEGORY_SET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SMEMBERS_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;smismember&quot;</span>,<span class="string">&quot;Returns the membership associated with the given elements for a set&quot;</span>,<span class="string">&quot;O(N) where N is the number of elements being checked for membership&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SET,SMISMEMBER_History,SMISMEMBER_tips,smismemberCommand,<span class="number">-3</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_SET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SMISMEMBER_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;smove&quot;</span>,<span class="string">&quot;Move a member from one set to another&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SET,SMOVE_History,SMOVE_tips,smoveCommand,<span class="number">4</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_SET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_INSERT,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SMOVE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;spop&quot;</span>,<span class="string">&quot;Remove and return one or multiple random members from a set&quot;</span>,<span class="string">&quot;Without the count argument O(1), otherwise O(N) where N is the value of the passed count.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SET,SPOP_History,SPOP_tips,spopCommand,<span class="number">-2</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_SET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SPOP_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;srandmember&quot;</span>,<span class="string">&quot;Get one or multiple random members from a set&quot;</span>,<span class="string">&quot;Without the count argument O(1), otherwise O(N) where N is the absolute value of the passed count.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SET,SRANDMEMBER_History,SRANDMEMBER_tips,srandmemberCommand,<span class="number">-2</span>,CMD_READONLY,ACL_CATEGORY_SET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SRANDMEMBER_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;srem&quot;</span>,<span class="string">&quot;Remove one or more members from a set&quot;</span>,<span class="string">&quot;O(N) where N is the number of members to be removed.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SET,SREM_History,SREM_tips,sremCommand,<span class="number">-3</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_SET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SREM_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;sscan&quot;</span>,<span class="string">&quot;Incrementally iterate Set elements&quot;</span>,<span class="string">&quot;O(1) for every call. O(N) for a complete iteration, including enough command calls for the cursor to return back to 0. N is the number of elements inside the collection..&quot;</span>,<span class="string">&quot;2.8.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SET,SSCAN_History,SSCAN_tips,sscanCommand,<span class="number">-3</span>,CMD_READONLY,ACL_CATEGORY_SET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SSCAN_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;sunion&quot;</span>,<span class="string">&quot;Add multiple sets&quot;</span>,<span class="string">&quot;O(N) where N is the total number of elements in all given sets.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SET,SUNION_History,SUNION_tips,sunionCommand,<span class="number">-2</span>,CMD_READONLY,ACL_CATEGORY_SET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SUNION_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;sunionstore&quot;</span>,<span class="string">&quot;Add multiple sets and store the resulting set in a key&quot;</span>,<span class="string">&quot;O(N) where N is the total number of elements in all given sets.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SET,SUNIONSTORE_History,SUNIONSTORE_tips,sunionstoreCommand,<span class="number">-3</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_SET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SUNIONSTORE_Args&#125;,</span><br><span class="line">    <span class="comment">/* sorted_set */</span></span><br><span class="line">    &#123;<span class="string">&quot;bzmpop&quot;</span>,<span class="string">&quot;Remove and return members with scores in a sorted set or block until one is available&quot;</span>,<span class="string">&quot;O(K) + O(M*log(N)) where K is the number of provided keys, N being the number of elements in the sorted set, and M being the number of elements popped.&quot;</span>,<span class="string">&quot;7.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,BZMPOP_History,BZMPOP_tips,bzmpopCommand,<span class="number">-5</span>,CMD_WRITE|CMD_BLOCKING,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_KEYNUM,.fk.keynum=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;&#125;,blmpopGetKeys,.args=BZMPOP_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;bzpopmax&quot;</span>,<span class="string">&quot;Remove and return the member with the highest score from one or more sorted sets, or block until one is available&quot;</span>,<span class="string">&quot;O(log(N)) with N being the number of elements in the sorted set.&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,BZPOPMAX_History,BZPOPMAX_tips,bzpopmaxCommand,<span class="number">-3</span>,CMD_WRITE|CMD_NOSCRIPT|CMD_FAST|CMD_BLOCKING,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-2</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=BZPOPMAX_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;bzpopmin&quot;</span>,<span class="string">&quot;Remove and return the member with the lowest score from one or more sorted sets, or block until one is available&quot;</span>,<span class="string">&quot;O(log(N)) with N being the number of elements in the sorted set.&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,BZPOPMIN_History,BZPOPMIN_tips,bzpopminCommand,<span class="number">-3</span>,CMD_WRITE|CMD_NOSCRIPT|CMD_FAST|CMD_BLOCKING,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-2</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=BZPOPMIN_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zadd&quot;</span>,<span class="string">&quot;Add one or more members to a sorted set, or update its score if it already exists&quot;</span>,<span class="string">&quot;O(log(N)) for each item added, where N is the number of elements in the sorted set.&quot;</span>,<span class="string">&quot;1.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZADD_History,ZADD_tips,zaddCommand,<span class="number">-4</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZADD_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zcard&quot;</span>,<span class="string">&quot;Get the number of members in a sorted set&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZCARD_History,ZCARD_tips,zcardCommand,<span class="number">2</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZCARD_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zcount&quot;</span>,<span class="string">&quot;Count the members in a sorted set with scores within the given values&quot;</span>,<span class="string">&quot;O(log(N)) with N being the number of elements in the sorted set.&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZCOUNT_History,ZCOUNT_tips,zcountCommand,<span class="number">4</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZCOUNT_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zdiff&quot;</span>,<span class="string">&quot;Subtract multiple sorted sets&quot;</span>,<span class="string">&quot;O(L + (N-K)log(N)) worst case where L is the total number of elements in all the sets, N is the size of the first set, and K is the size of the result set.&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZDIFF_History,ZDIFF_tips,zdiffCommand,<span class="number">-3</span>,CMD_READONLY,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_KEYNUM,.fk.keynum=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;&#125;,zunionInterDiffGetKeys,.args=ZDIFF_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zdiffstore&quot;</span>,<span class="string">&quot;Subtract multiple sorted sets and store the resulting sorted set in a new key&quot;</span>,<span class="string">&quot;O(L + (N-K)log(N)) worst case where L is the total number of elements in all the sets, N is the size of the first set, and K is the size of the result set.&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZDIFFSTORE_History,ZDIFFSTORE_tips,zdiffstoreCommand,<span class="number">-4</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_KEYNUM,.fk.keynum=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;&#125;,zunionInterDiffStoreGetKeys,.args=ZDIFFSTORE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zincrby&quot;</span>,<span class="string">&quot;Increment the score of a member in a sorted set&quot;</span>,<span class="string">&quot;O(log(N)) where N is the number of elements in the sorted set.&quot;</span>,<span class="string">&quot;1.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZINCRBY_History,ZINCRBY_tips,zincrbyCommand,<span class="number">4</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZINCRBY_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zinter&quot;</span>,<span class="string">&quot;Intersect multiple sorted sets&quot;</span>,<span class="string">&quot;O(N*K)+O(M*log(M)) worst case with N being the smallest input sorted set, K being the number of input sorted sets and M being the number of elements in the resulting sorted set.&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZINTER_History,ZINTER_tips,zinterCommand,<span class="number">-3</span>,CMD_READONLY,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_KEYNUM,.fk.keynum=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;&#125;,zunionInterDiffGetKeys,.args=ZINTER_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zintercard&quot;</span>,<span class="string">&quot;Intersect multiple sorted sets and return the cardinality of the result&quot;</span>,<span class="string">&quot;O(N*K) worst case with N being the smallest input sorted set, K being the number of input sorted sets.&quot;</span>,<span class="string">&quot;7.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZINTERCARD_History,ZINTERCARD_tips,zinterCardCommand,<span class="number">-3</span>,CMD_READONLY,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_KEYNUM,.fk.keynum=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;&#125;,zunionInterDiffGetKeys,.args=ZINTERCARD_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zinterstore&quot;</span>,<span class="string">&quot;Intersect multiple sorted sets and store the resulting sorted set in a new key&quot;</span>,<span class="string">&quot;O(N*K)+O(M*log(M)) worst case with N being the smallest input sorted set, K being the number of input sorted sets and M being the number of elements in the resulting sorted set.&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZINTERSTORE_History,ZINTERSTORE_tips,zinterstoreCommand,<span class="number">-4</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_KEYNUM,.fk.keynum=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;&#125;,zunionInterDiffStoreGetKeys,.args=ZINTERSTORE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zlexcount&quot;</span>,<span class="string">&quot;Count the number of members in a sorted set between a given lexicographical range&quot;</span>,<span class="string">&quot;O(log(N)) with N being the number of elements in the sorted set.&quot;</span>,<span class="string">&quot;2.8.9&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZLEXCOUNT_History,ZLEXCOUNT_tips,zlexcountCommand,<span class="number">4</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZLEXCOUNT_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zmpop&quot;</span>,<span class="string">&quot;Remove and return members with scores in a sorted set&quot;</span>,<span class="string">&quot;O(K) + O(M*log(N)) where K is the number of provided keys, N being the number of elements in the sorted set, and M being the number of elements popped.&quot;</span>,<span class="string">&quot;7.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZMPOP_History,ZMPOP_tips,zmpopCommand,<span class="number">-4</span>,CMD_WRITE,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_KEYNUM,.fk.keynum=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;&#125;,zmpopGetKeys,.args=ZMPOP_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zmscore&quot;</span>,<span class="string">&quot;Get the score associated with the given members in a sorted set&quot;</span>,<span class="string">&quot;O(N) where N is the number of members being requested.&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZMSCORE_History,ZMSCORE_tips,zmscoreCommand,<span class="number">-3</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZMSCORE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zpopmax&quot;</span>,<span class="string">&quot;Remove and return members with the highest scores in a sorted set&quot;</span>,<span class="string">&quot;O(log(N)*M) with N being the number of elements in the sorted set, and M being the number of elements popped.&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZPOPMAX_History,ZPOPMAX_tips,zpopmaxCommand,<span class="number">-2</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZPOPMAX_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zpopmin&quot;</span>,<span class="string">&quot;Remove and return members with the lowest scores in a sorted set&quot;</span>,<span class="string">&quot;O(log(N)*M) with N being the number of elements in the sorted set, and M being the number of elements popped.&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZPOPMIN_History,ZPOPMIN_tips,zpopminCommand,<span class="number">-2</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZPOPMIN_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zrandmember&quot;</span>,<span class="string">&quot;Get one or multiple random elements from a sorted set&quot;</span>,<span class="string">&quot;O(N) where N is the number of elements returned&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZRANDMEMBER_History,ZRANDMEMBER_tips,zrandmemberCommand,<span class="number">-2</span>,CMD_READONLY,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZRANDMEMBER_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zrange&quot;</span>,<span class="string">&quot;Return a range of members in a sorted set&quot;</span>,<span class="string">&quot;O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements returned.&quot;</span>,<span class="string">&quot;1.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZRANGE_History,ZRANGE_tips,zrangeCommand,<span class="number">-4</span>,CMD_READONLY,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZRANGE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zrangebylex&quot;</span>,<span class="string">&quot;Return a range of members in a sorted set, by lexicographical range&quot;</span>,<span class="string">&quot;O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements being returned. If M is constant (e.g. always asking for the first 10 elements with LIMIT), you can consider it O(log(N)).&quot;</span>,<span class="string">&quot;2.8.9&quot;</span>,CMD_DOC_DEPRECATED,<span class="string">&quot;`ZRANGE` with the `BYLEX` argument&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,COMMAND_GROUP_SORTED_SET,ZRANGEBYLEX_History,ZRANGEBYLEX_tips,zrangebylexCommand,<span class="number">-4</span>,CMD_READONLY,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZRANGEBYLEX_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zrangebyscore&quot;</span>,<span class="string">&quot;Return a range of members in a sorted set, by score&quot;</span>,<span class="string">&quot;O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements being returned. If M is constant (e.g. always asking for the first 10 elements with LIMIT), you can consider it O(log(N)).&quot;</span>,<span class="string">&quot;1.0.5&quot;</span>,CMD_DOC_DEPRECATED,<span class="string">&quot;`ZRANGE` with the `BYSCORE` argument&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,COMMAND_GROUP_SORTED_SET,ZRANGEBYSCORE_History,ZRANGEBYSCORE_tips,zrangebyscoreCommand,<span class="number">-4</span>,CMD_READONLY,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZRANGEBYSCORE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zrangestore&quot;</span>,<span class="string">&quot;Store a range of members from sorted set into another key&quot;</span>,<span class="string">&quot;O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements stored into the destination key.&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZRANGESTORE_History,ZRANGESTORE_tips,zrangestoreCommand,<span class="number">-5</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZRANGESTORE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zrank&quot;</span>,<span class="string">&quot;Determine the index of a member in a sorted set&quot;</span>,<span class="string">&quot;O(log(N))&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZRANK_History,ZRANK_tips,zrankCommand,<span class="number">3</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZRANK_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zrem&quot;</span>,<span class="string">&quot;Remove one or more members from a sorted set&quot;</span>,<span class="string">&quot;O(M*log(N)) with N being the number of elements in the sorted set and M the number of elements to be removed.&quot;</span>,<span class="string">&quot;1.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZREM_History,ZREM_tips,zremCommand,<span class="number">-3</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZREM_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zremrangebylex&quot;</span>,<span class="string">&quot;Remove all members in a sorted set between the given lexicographical range&quot;</span>,<span class="string">&quot;O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements removed by the operation.&quot;</span>,<span class="string">&quot;2.8.9&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZREMRANGEBYLEX_History,ZREMRANGEBYLEX_tips,zremrangebylexCommand,<span class="number">4</span>,CMD_WRITE,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZREMRANGEBYLEX_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zremrangebyrank&quot;</span>,<span class="string">&quot;Remove all members in a sorted set within the given indexes&quot;</span>,<span class="string">&quot;O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements removed by the operation.&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZREMRANGEBYRANK_History,ZREMRANGEBYRANK_tips,zremrangebyrankCommand,<span class="number">4</span>,CMD_WRITE,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZREMRANGEBYRANK_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zremrangebyscore&quot;</span>,<span class="string">&quot;Remove all members in a sorted set within the given scores&quot;</span>,<span class="string">&quot;O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements removed by the operation.&quot;</span>,<span class="string">&quot;1.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZREMRANGEBYSCORE_History,ZREMRANGEBYSCORE_tips,zremrangebyscoreCommand,<span class="number">4</span>,CMD_WRITE,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZREMRANGEBYSCORE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zrevrange&quot;</span>,<span class="string">&quot;Return a range of members in a sorted set, by index, with scores ordered from high to low&quot;</span>,<span class="string">&quot;O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements returned.&quot;</span>,<span class="string">&quot;1.2.0&quot;</span>,CMD_DOC_DEPRECATED,<span class="string">&quot;`ZRANGE` with the `REV` argument&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,COMMAND_GROUP_SORTED_SET,ZREVRANGE_History,ZREVRANGE_tips,zrevrangeCommand,<span class="number">-4</span>,CMD_READONLY,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZREVRANGE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zrevrangebylex&quot;</span>,<span class="string">&quot;Return a range of members in a sorted set, by lexicographical range, ordered from higher to lower strings.&quot;</span>,<span class="string">&quot;O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements being returned. If M is constant (e.g. always asking for the first 10 elements with LIMIT), you can consider it O(log(N)).&quot;</span>,<span class="string">&quot;2.8.9&quot;</span>,CMD_DOC_DEPRECATED,<span class="string">&quot;`ZRANGE` with the `REV` and `BYLEX` arguments&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,COMMAND_GROUP_SORTED_SET,ZREVRANGEBYLEX_History,ZREVRANGEBYLEX_tips,zrevrangebylexCommand,<span class="number">-4</span>,CMD_READONLY,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZREVRANGEBYLEX_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zrevrangebyscore&quot;</span>,<span class="string">&quot;Return a range of members in a sorted set, by score, with scores ordered from high to low&quot;</span>,<span class="string">&quot;O(log(N)+M) with N being the number of elements in the sorted set and M the number of elements being returned. If M is constant (e.g. always asking for the first 10 elements with LIMIT), you can consider it O(log(N)).&quot;</span>,<span class="string">&quot;2.2.0&quot;</span>,CMD_DOC_DEPRECATED,<span class="string">&quot;`ZRANGE` with the `REV` and `BYSCORE` arguments&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,COMMAND_GROUP_SORTED_SET,ZREVRANGEBYSCORE_History,ZREVRANGEBYSCORE_tips,zrevrangebyscoreCommand,<span class="number">-4</span>,CMD_READONLY,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZREVRANGEBYSCORE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zrevrank&quot;</span>,<span class="string">&quot;Determine the index of a member in a sorted set, with scores ordered from high to low&quot;</span>,<span class="string">&quot;O(log(N))&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZREVRANK_History,ZREVRANK_tips,zrevrankCommand,<span class="number">3</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZREVRANK_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zscan&quot;</span>,<span class="string">&quot;Incrementally iterate sorted sets elements and associated scores&quot;</span>,<span class="string">&quot;O(1) for every call. O(N) for a complete iteration, including enough command calls for the cursor to return back to 0. N is the number of elements inside the collection..&quot;</span>,<span class="string">&quot;2.8.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZSCAN_History,ZSCAN_tips,zscanCommand,<span class="number">-3</span>,CMD_READONLY,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZSCAN_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zscore&quot;</span>,<span class="string">&quot;Get the score associated with the given member in a sorted set&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZSCORE_History,ZSCORE_tips,zscoreCommand,<span class="number">3</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=ZSCORE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zunion&quot;</span>,<span class="string">&quot;Add multiple sorted sets&quot;</span>,<span class="string">&quot;O(N)+O(M*log(M)) with N being the sum of the sizes of the input sorted sets, and M being the number of elements in the resulting sorted set.&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZUNION_History,ZUNION_tips,zunionCommand,<span class="number">-3</span>,CMD_READONLY,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_KEYNUM,.fk.keynum=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;&#125;,zunionInterDiffGetKeys,.args=ZUNION_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;zunionstore&quot;</span>,<span class="string">&quot;Add multiple sorted sets and store the resulting sorted set in a new key&quot;</span>,<span class="string">&quot;O(N)+O(M log(M)) with N being the sum of the sizes of the input sorted sets, and M being the number of elements in the resulting sorted set.&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_SORTED_SET,ZUNIONSTORE_History,ZUNIONSTORE_tips,zunionstoreCommand,<span class="number">-4</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_SORTEDSET,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;,&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">2</span>&#125;,KSPEC_FK_KEYNUM,.fk.keynum=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;&#125;,zunionInterDiffStoreGetKeys,.args=ZUNIONSTORE_Args&#125;,</span><br><span class="line">    <span class="comment">/* stream */</span></span><br><span class="line">    &#123;<span class="string">&quot;xack&quot;</span>,<span class="string">&quot;Marks a pending message as correctly processed, effectively removing it from the pending entries list of the consumer group. Return value of the command is the number of messages successfully acknowledged, that is, the IDs we were actually able to resolve in the PEL.&quot;</span>,<span class="string">&quot;O(1) for each message ID processed.&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STREAM,XACK_History,XACK_tips,xackCommand,<span class="number">-4</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_STREAM,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=XACK_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;xadd&quot;</span>,<span class="string">&quot;Appends a new entry to a stream&quot;</span>,<span class="string">&quot;O(1) when adding a new entry, O(N) when trimming where N being the number of entries evicted.&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STREAM,XADD_History,XADD_tips,xaddCommand,<span class="number">-5</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_STREAM,&#123;&#123;<span class="string">&quot;UPDATE instead of INSERT because of the optional trimming feature&quot;</span>,CMD_KEY_RW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=XADD_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;xautoclaim&quot;</span>,<span class="string">&quot;Changes (or acquires) ownership of messages in a consumer group, as if the messages were delivered to the specified consumer.&quot;</span>,<span class="string">&quot;O(1) if COUNT is small.&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STREAM,XAUTOCLAIM_History,XAUTOCLAIM_tips,xautoclaimCommand,<span class="number">-6</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_STREAM,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=XAUTOCLAIM_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;xclaim&quot;</span>,<span class="string">&quot;Changes (or acquires) ownership of a message in a consumer group, as if the message was delivered to the specified consumer.&quot;</span>,<span class="string">&quot;O(log N) with N being the number of messages in the PEL of the consumer group.&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STREAM,XCLAIM_History,XCLAIM_tips,xclaimCommand,<span class="number">-6</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_STREAM,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=XCLAIM_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;xdel&quot;</span>,<span class="string">&quot;Removes the specified entries from the stream. Returns the number of items actually deleted, that may be different from the number of IDs passed in case certain IDs do not exist.&quot;</span>,<span class="string">&quot;O(1) for each single item to delete in the stream, regardless of the stream size.&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STREAM,XDEL_History,XDEL_tips,xdelCommand,<span class="number">-3</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_STREAM,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=XDEL_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;xgroup&quot;</span>,<span class="string">&quot;A container for consumer groups commands&quot;</span>,<span class="string">&quot;Depends on subcommand.&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STREAM,XGROUP_History,XGROUP_tips,<span class="literal">NULL</span>,<span class="number">-2</span>,<span class="number">0</span>,<span class="number">0</span>,.subcommands=XGROUP_Subcommands&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;xinfo&quot;</span>,<span class="string">&quot;A container for stream introspection commands&quot;</span>,<span class="string">&quot;Depends on subcommand.&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STREAM,XINFO_History,XINFO_tips,<span class="literal">NULL</span>,<span class="number">-2</span>,<span class="number">0</span>,<span class="number">0</span>,.subcommands=XINFO_Subcommands&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;xlen&quot;</span>,<span class="string">&quot;Return the number of entries in a stream&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STREAM,XLEN_History,XLEN_tips,xlenCommand,<span class="number">2</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_STREAM,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=XLEN_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;xpending&quot;</span>,<span class="string">&quot;Return information and entries from a stream consumer group pending entries list, that are messages fetched but never acknowledged.&quot;</span>,<span class="string">&quot;O(N) with N being the number of elements returned, so asking for a small fixed number of entries per call is O(1). O(M), where M is the total number of entries scanned when used with the IDLE filter. When the command returns just the summary and the list of consumers is small, it runs in O(1) time; otherwise, an additional O(N) time for iterating every consumer.&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STREAM,XPENDING_History,XPENDING_tips,xpendingCommand,<span class="number">-3</span>,CMD_READONLY,ACL_CATEGORY_STREAM,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=XPENDING_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;xrange&quot;</span>,<span class="string">&quot;Return a range of elements in a stream, with IDs matching the specified IDs interval&quot;</span>,<span class="string">&quot;O(N) with N being the number of elements being returned. If N is constant (e.g. always asking for the first 10 elements with COUNT), you can consider it O(1).&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STREAM,XRANGE_History,XRANGE_tips,xrangeCommand,<span class="number">-4</span>,CMD_READONLY,ACL_CATEGORY_STREAM,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=XRANGE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;xread&quot;</span>,<span class="string">&quot;Return never seen elements in multiple streams, with IDs greater than the ones reported by the caller for each stream. Can block.&quot;</span>,<span class="string">&quot;For each stream mentioned: O(N) with N being the number of elements being returned, it means that XREAD-ing with a fixed COUNT is O(1). Note that when the BLOCK option is used, XADD will pay O(M) time in order to serve the M clients blocked on the stream getting new data.&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STREAM,XREAD_History,XREAD_tips,xreadCommand,<span class="number">-4</span>,CMD_BLOCKING|CMD_READONLY|CMD_BLOCKING,ACL_CATEGORY_STREAM,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_KEYWORD,.bs.keyword=&#123;<span class="string">&quot;STREAMS&quot;</span>,<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">2</span>&#125;&#125;&#125;,xreadGetKeys,.args=XREAD_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;xreadgroup&quot;</span>,<span class="string">&quot;Return new entries from a stream using a consumer group, or access the history of the pending entries for a given consumer. Can block.&quot;</span>,<span class="string">&quot;For each stream mentioned: O(M) with M being the number of elements returned. If M is constant (e.g. always asking for the first 10 elements with COUNT), you can consider it O(1). On the other side when XREADGROUP blocks, XADD will pay the O(N) time in order to serve the N clients blocked on the stream getting new data.&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STREAM,XREADGROUP_History,XREADGROUP_tips,xreadCommand,<span class="number">-7</span>,CMD_BLOCKING|CMD_WRITE,ACL_CATEGORY_STREAM,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_KEYWORD,.bs.keyword=&#123;<span class="string">&quot;STREAMS&quot;</span>,<span class="number">4</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">2</span>&#125;&#125;&#125;,xreadGetKeys,.args=XREADGROUP_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;xrevrange&quot;</span>,<span class="string">&quot;Return a range of elements in a stream, with IDs matching the specified IDs interval, in reverse order (from greater to smaller IDs) compared to XRANGE&quot;</span>,<span class="string">&quot;O(N) with N being the number of elements returned. If N is constant (e.g. always asking for the first 10 elements with COUNT), you can consider it O(1).&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STREAM,XREVRANGE_History,XREVRANGE_tips,xrevrangeCommand,<span class="number">-4</span>,CMD_READONLY,ACL_CATEGORY_STREAM,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=XREVRANGE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;xsetid&quot;</span>,<span class="string">&quot;An internal command for replicating stream values&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STREAM,XSETID_History,XSETID_tips,xsetidCommand,<span class="number">-3</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_STREAM,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=XSETID_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;xtrim&quot;</span>,<span class="string">&quot;Trims the stream to (approximately if &#x27;~&#x27; is passed) a certain size&quot;</span>,<span class="string">&quot;O(N), with N being the number of evicted entries. Constant times are very small however, since entries are organized in macro nodes containing multiple entries that can be released with a single deallocation.&quot;</span>,<span class="string">&quot;5.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STREAM,XTRIM_History,XTRIM_tips,xtrimCommand,<span class="number">-4</span>,CMD_WRITE,ACL_CATEGORY_STREAM,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=XTRIM_Args&#125;,</span><br><span class="line">    <span class="comment">/* string */</span></span><br><span class="line">    &#123;<span class="string">&quot;append&quot;</span>,<span class="string">&quot;Append a value to a key&quot;</span>,<span class="string">&quot;O(1). The amortized time complexity is O(1) assuming the appended value is small and the already present value is of any size, since the dynamic string library used by Redis will double the free space available on every reallocation.&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,APPEND_History,APPEND_tips,appendCommand,<span class="number">3</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_INSERT,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=APPEND_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;decr&quot;</span>,<span class="string">&quot;Decrement the integer value of a key by one&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,DECR_History,DECR_tips,decrCommand,<span class="number">2</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=DECR_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;decrby&quot;</span>,<span class="string">&quot;Decrement the integer value of a key by the given number&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,DECRBY_History,DECRBY_tips,decrbyCommand,<span class="number">3</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=DECRBY_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;get&quot;</span>,<span class="string">&quot;Get the value of a key&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,GET_History,GET_tips,getCommand,<span class="number">2</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=GET_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;getdel&quot;</span>,<span class="string">&quot;Get the value of a key and delete the key&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,GETDEL_History,GETDEL_tips,getdelCommand,<span class="number">2</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_DELETE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=GETDEL_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;getex&quot;</span>,<span class="string">&quot;Get the value of a key and optionally set its expiration&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,GETEX_History,GETEX_tips,getexCommand,<span class="number">-2</span>,CMD_WRITE|CMD_FAST,ACL_CATEGORY_STRING,&#123;&#123;<span class="string">&quot;RW and UPDATE because it changes the TTL&quot;</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=GETEX_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;getrange&quot;</span>,<span class="string">&quot;Get a substring of the string stored at a key&quot;</span>,<span class="string">&quot;O(N) where N is the length of the returned string. The complexity is ultimately determined by the returned length, but because creating a substring from an existing string is very cheap, it can be considered O(1) for small strings.&quot;</span>,<span class="string">&quot;2.4.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,GETRANGE_History,GETRANGE_tips,getrangeCommand,<span class="number">4</span>,CMD_READONLY,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=GETRANGE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;getset&quot;</span>,<span class="string">&quot;Set the string value of a key and return its old value&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_DEPRECATED,<span class="string">&quot;`SET` with the `!GET` argument&quot;</span>,<span class="string">&quot;6.2.0&quot;</span>,COMMAND_GROUP_STRING,GETSET_History,GETSET_tips,getsetCommand,<span class="number">3</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=GETSET_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;incr&quot;</span>,<span class="string">&quot;Increment the integer value of a key by one&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,INCR_History,INCR_tips,incrCommand,<span class="number">2</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=INCR_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;incrby&quot;</span>,<span class="string">&quot;Increment the integer value of a key by the given amount&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,INCRBY_History,INCRBY_tips,incrbyCommand,<span class="number">3</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=INCRBY_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;incrbyfloat&quot;</span>,<span class="string">&quot;Increment the float value of a key by the given amount&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.6.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,INCRBYFLOAT_History,INCRBYFLOAT_tips,incrbyfloatCommand,<span class="number">3</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=INCRBYFLOAT_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;lcs&quot;</span>,<span class="string">&quot;Find longest common substring&quot;</span>,<span class="string">&quot;O(N*M) where N and M are the lengths of s1 and s2, respectively&quot;</span>,<span class="string">&quot;7.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,LCS_History,LCS_tips,lcsCommand,<span class="number">-3</span>,CMD_READONLY,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=LCS_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;mget&quot;</span>,<span class="string">&quot;Get the values of all the given keys&quot;</span>,<span class="string">&quot;O(N) where N is the number of keys to retrieve.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,MGET_History,MGET_tips,mgetCommand,<span class="number">-2</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=MGET_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;mset&quot;</span>,<span class="string">&quot;Set multiple keys to multiple values&quot;</span>,<span class="string">&quot;O(N) where N is the number of keys to set.&quot;</span>,<span class="string">&quot;1.0.1&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,MSET_History,MSET_tips,msetCommand,<span class="number">-3</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">2</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=MSET_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;msetnx&quot;</span>,<span class="string">&quot;Set multiple keys to multiple values, only if none of the keys exist&quot;</span>,<span class="string">&quot;O(N) where N is the number of keys to set.&quot;</span>,<span class="string">&quot;1.0.1&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,MSETNX_History,MSETNX_tips,msetnxCommand,<span class="number">-3</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_INSERT,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">2</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=MSETNX_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;psetex&quot;</span>,<span class="string">&quot;Set the value and expiration in milliseconds of a key&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.6.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,PSETEX_History,PSETEX_tips,psetexCommand,<span class="number">4</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=PSETEX_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;set&quot;</span>,<span class="string">&quot;Set the string value of a key&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,SET_History,SET_tips,setCommand,<span class="number">-3</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_STRING,&#123;&#123;<span class="string">&quot;RW and ACCESS due to the optional `GET` argument&quot;</span>,CMD_KEY_RW|CMD_KEY_ACCESS|CMD_KEY_UPDATE|CMD_KEY_VARIABLE_FLAGS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,setGetKeys,.args=SET_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;setex&quot;</span>,<span class="string">&quot;Set the value and expiration of a key&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,SETEX_History,SETEX_tips,setexCommand,<span class="number">4</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SETEX_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;setnx&quot;</span>,<span class="string">&quot;Set the value of a key, only if the key does not exist&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,SETNX_History,SETNX_tips,setnxCommand,<span class="number">3</span>,CMD_WRITE|CMD_DENYOOM|CMD_FAST,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_OW|CMD_KEY_INSERT,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SETNX_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;setrange&quot;</span>,<span class="string">&quot;Overwrite part of a string at key starting at the specified offset&quot;</span>,<span class="string">&quot;O(1), not counting the time taken to copy the new string in place. Usually, this string is very small so the amortized complexity is O(1). Otherwise, complexity is O(M) with M being the length of the value argument.&quot;</span>,<span class="string">&quot;2.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,SETRANGE_History,SETRANGE_tips,setrangeCommand,<span class="number">4</span>,CMD_WRITE|CMD_DENYOOM,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RW|CMD_KEY_UPDATE,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SETRANGE_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;strlen&quot;</span>,<span class="string">&quot;Get the length of the value stored in a key&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_STRING,STRLEN_History,STRLEN_tips,strlenCommand,<span class="number">2</span>,CMD_READONLY|CMD_FAST,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=STRLEN_Args&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;substr&quot;</span>,<span class="string">&quot;Get a substring of the string stored at a key&quot;</span>,<span class="string">&quot;O(N) where N is the length of the returned string. The complexity is ultimately determined by the returned length, but because creating a substring from an existing string is very cheap, it can be considered O(1) for small strings.&quot;</span>,<span class="string">&quot;1.0.0&quot;</span>,CMD_DOC_DEPRECATED,<span class="string">&quot;`GETRANGE`&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,COMMAND_GROUP_STRING,SUBSTR_History,SUBSTR_tips,getrangeCommand,<span class="number">4</span>,CMD_READONLY,ACL_CATEGORY_STRING,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO|CMD_KEY_ACCESS,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=SUBSTR_Args&#125;,</span><br><span class="line">    <span class="comment">/* transactions */</span></span><br><span class="line">    &#123;<span class="string">&quot;discard&quot;</span>,<span class="string">&quot;Discard all commands issued after MULTI&quot;</span>,<span class="string">&quot;O(N), when N is the number of queued commands&quot;</span>,<span class="string">&quot;2.0.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_TRANSACTIONS,DISCARD_History,DISCARD_tips,discardCommand,<span class="number">1</span>,CMD_NOSCRIPT|CMD_LOADING|CMD_STALE|CMD_FAST|CMD_ALLOW_BUSY,ACL_CATEGORY_TRANSACTION&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;exec&quot;</span>,<span class="string">&quot;Execute all commands issued after MULTI&quot;</span>,<span class="string">&quot;Depends on commands in the transaction&quot;</span>,<span class="string">&quot;1.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_TRANSACTIONS,EXEC_History,EXEC_tips,execCommand,<span class="number">1</span>,CMD_NOSCRIPT|CMD_LOADING|CMD_STALE|CMD_SKIP_SLOWLOG,ACL_CATEGORY_TRANSACTION&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;multi&quot;</span>,<span class="string">&quot;Mark the start of a transaction block&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;1.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_TRANSACTIONS,MULTI_History,MULTI_tips,multiCommand,<span class="number">1</span>,CMD_NOSCRIPT|CMD_LOADING|CMD_STALE|CMD_FAST|CMD_ALLOW_BUSY,ACL_CATEGORY_TRANSACTION&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;unwatch&quot;</span>,<span class="string">&quot;Forget about all watched keys&quot;</span>,<span class="string">&quot;O(1)&quot;</span>,<span class="string">&quot;2.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_TRANSACTIONS,UNWATCH_History,UNWATCH_tips,unwatchCommand,<span class="number">1</span>,CMD_NOSCRIPT|CMD_LOADING|CMD_STALE|CMD_FAST|CMD_ALLOW_BUSY,ACL_CATEGORY_TRANSACTION&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;watch&quot;</span>,<span class="string">&quot;Watch the given keys to determine execution of the MULTI/EXEC block&quot;</span>,<span class="string">&quot;O(1) for every key.&quot;</span>,<span class="string">&quot;2.2.0&quot;</span>,CMD_DOC_NONE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,COMMAND_GROUP_TRANSACTIONS,WATCH_History,WATCH_tips,watchCommand,<span class="number">-2</span>,CMD_NOSCRIPT|CMD_LOADING|CMD_STALE|CMD_FAST|CMD_ALLOW_BUSY,ACL_CATEGORY_TRANSACTION,&#123;&#123;<span class="literal">NULL</span>,CMD_KEY_RO,KSPEC_BS_INDEX,.bs.index=&#123;<span class="number">1</span>&#125;,KSPEC_FK_RANGE,.fk.range=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;&#125;&#125;,.args=WATCH_Args&#125;,</span><br><span class="line">    &#123;<span class="number">0</span>&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>从 redisCommandTable 可以看到 240 个命令的名称、描述、时间复杂度、出现在哪个版本号、执行该指令的函数句柄、指令支持的参数等信息，非常全面。</p>
<blockquote>
<p>想到一句话：官方文档是最好的书籍，源码里包含所有问题</p>
</blockquote>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>本文通过讲解 redisServer、redisDB与数据字典dict之间的联系，同时通过追溯Set指令的执行过程，可以对其底层原理有更深的认知。<br>曾经有一位技术大咖说过：若想学习一个好的开源项目，那么首推Redis，无论从代码功能、变量声明，甚至从注释来看都无可挑剔。</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/xiaowangzi.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/xiaowangzi.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">ivansli</div><div class="post-copyright__author_desc">学无止境</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://blog.ivansli.com/2023/04/26/230426-redis-server/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://blog.ivansli.com/2023/04/26/230426-redis-server/')">redisServer、redisDB与数据字典dict</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><!--span.reward-title 感谢你赐予我前进的力量--><ul class="reward-group"><li class="reward-item"><a href="/img/reward/wechat-small.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/reward/wechat-small.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/reward/alipay-small.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/reward/alipay-small.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><!--a.reward-main-btn(href='/about/#about-reward' target='_blank')//.reward-text 赞赏者名单
//.reward-dec 因为你们的支持让我意识到写文章的价值🙏--></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.ivansli.com/2023/04/26/230426-redis-server/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=redisServer、redisDB与数据字典dict&amp;url=https://blog.ivansli.com/2023/04/26/230426-redis-server/&amp;pic=/img/2023/04/redis-server-layout.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本文系原创作品，版权所有（禁止转载）</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/redis/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>redis<span class="tagsPageCount">6</span></a><a class="post-meta__box__tags" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>中间件<span class="tagsPageCount">13</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="/img/2024/07/helm.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="/pluginsSrc/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="/pluginsSrc/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/04/25/base-redis-db-ticket-dispenser/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2023/04/ticket-001.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Redis+DB实现基于号段的发号器原理</div></div></a></div><div class="next-post pull-right"><a href="/2023/04/27/230427-redis-config/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2023/04/redis-config-001.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">关于Redis配置信息初始化</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2023/04/27/230427-redis-config/" title="关于Redis配置信息初始化"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2023/04/redis-config-001.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-04-27</div><div class="title">关于Redis配置信息初始化</div></div></a></div><div><a href="/2023/05/30/230530-redis-event-driven/" title="Redis事件驱动(aeEventLoop)原理分析"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2023/05/2023530-01.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-05-30</div><div class="title">Redis事件驱动(aeEventLoop)原理分析</div></div></a></div><div><a href="/2023/06/02/230602-redis-cluster-hashtag/" title="Redis Cluster集群hash tag原理分析"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2023/06/230602-01.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-06-02</div><div class="title">Redis Cluster集群hash tag原理分析</div></div></a></div><div><a href="/2021/05/18/distributed-lock/" title="使用分布式锁时要考虑的事情"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/space-man-small.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-05-18</div><div class="title">使用分布式锁时要考虑的事情</div></div></a></div><div><a href="/2020/10/09/redis-king-cache/" title="缓存之王 - Redis"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2021/11/2833663222.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2020-10-09</div><div class="title">缓存之王 - Redis</div></div></a></div><div><a href="/2021/05/24/etcd-lock/" title="etcd与分布式锁的实现及原理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/space-man-small.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-05-24</div><div class="title">etcd与分布式锁的实现及原理</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/xiaowangzi.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/goutou.png" ait="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这里有<b style="color:#fff">知识总结</b>和<b style="color:#fff">技术分享</b>。书山有路勤为径，学海无涯苦作舟。<b style="color:#fff">此生也有涯</b>，<b style="color:#fff">此生学无涯</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">ivansli</h1><div class="author-info__desc">学无止境</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/coderstart" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8ERedis"><span class="toc-number">1.</span> <span class="toc-text">关于Redis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#redisServer%E3%80%81redisDB%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8dict"><span class="toc-number">2.</span> <span class="toc-text">redisServer、redisDB与数据字典dict</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#redis-client%E5%A6%82%E4%BD%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BB%BA%E7%AB%8B%E8%81%94%E7%B3%BB"><span class="toc-number">3.</span> <span class="toc-text">redis client如何与数据库建立联系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Set%E6%8C%87%E4%BB%A4%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%BF%BD%E6%BA%AF"><span class="toc-number">4.</span> <span class="toc-text">Set指令执行过程代码追溯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis%E4%B8%BB%E8%A6%81%E5%91%BD%E4%BB%A4"><span class="toc-number">5.</span> <span class="toc-text">Redis主要命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">6.</span> <span class="toc-text">总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/07/07/240707-helm/" title="helm的安装/使用及其运行原理"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2024/07/helm.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="helm的安装/使用及其运行原理"/></a><div class="content"><a class="title" href="/2024/07/07/240707-helm/" title="helm的安装/使用及其运行原理">helm的安装/使用及其运行原理</a><time datetime="2024-07-07T01:00:00.000Z" title="发表于 2024-07-07 09:00:00">2024-07-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/11/theroadtoserfdom/" title="读：哈耶克《到奴役之路》有感"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2023/11/hayeke.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="读：哈耶克《到奴役之路》有感"/></a><div class="content"><a class="title" href="/2023/11/11/theroadtoserfdom/" title="读：哈耶克《到奴役之路》有感">读：哈耶克《到奴役之路》有感</a><time datetime="2023-11-11T01:44:00.000Z" title="发表于 2023-11-11 09:44:00">2023-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/07/231007-game-theory3/" title="二人零和博弈与最大最小定理"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2023/09/gametheory-01.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="二人零和博弈与最大最小定理"/></a><div class="content"><a class="title" href="/2023/10/07/231007-game-theory3/" title="二人零和博弈与最大最小定理">二人零和博弈与最大最小定理</a><time datetime="2023-10-07T08:45:00.000Z" title="发表于 2023-10-07 16:45:00">2023-10-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/07/231007-game-theory2/" title="博弈论对一般问题的建模分析"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2023/09/gametheory-01.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="博弈论对一般问题的建模分析"/></a><div class="content"><a class="title" href="/2023/10/07/231007-game-theory2/" title="博弈论对一般问题的建模分析">博弈论对一般问题的建模分析</a><time datetime="2023-10-07T03:40:00.000Z" title="发表于 2023-10-07 11:40:00">2023-10-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/18/230918-game-theory/" title="认识博弈论"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2023/09/gametheory-01.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="认识博弈论"/></a><div class="content"><a class="title" href="/2023/09/18/230918-game-theory/" title="认识博弈论">认识博弈论</a><time datetime="2023-09-18T10:00:00.000Z" title="发表于 2023-09-18 18:00:00">2023-09-18</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><!-- - let centerImg = theme.footer.socialBar.centerImg ? theme.footer.socialBar.centerImg : theme.avatar.img--><div id="footer_deal"><!-- 左侧图标--><a class="deal_link" href="mailto:gopher001@outlook.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><!--个人头像图标--><!--img.footer_mini_logo(title="返回顶部", alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)", src=centerImg, size="50px")--><!-- 右侧图标--><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/coderstart" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" href="/copyright" title="CC"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i></a></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="文章列表" href="/archives/">文章列表</a><a class="footer-item" title="我的书单" href="/booklist/">我的书单</a><a class="footer-item" title="极客说说" href="/essay/">极客说说</a><a class="footer-item" title="关于本站" href="/about/">关于本站</a></div></div><div class="footer-group"><div class="footer-title">分类</div><div class="footer-links"><a class="footer-item" title="编程原理" href="/categories/%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86/">编程原理</a><a class="footer-item" title="系统架构" href="/categories/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/">系统架构</a><a class="footer-item" title="中间件" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/">中间件</a><a class="footer-item" title="编程原理" href="/categories/%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86/">编程原理</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a></div></div><div class="footer-group"><div class="footer-title">友链</div><div class="footer-links"><a class="footer-item" title="编程导航" href="/tool/">编程导航</a></div></div></div><p id="ghbdages"><a class="github-badge" target="_blank" style="margin-inline:5px" data-title="博客框架为Hexo" title="博客框架为Hexo"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo"/></a><a class="github-badge" target="_blank" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/badge/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2019 - 2024 · <a class="footer-bar-link" href="/" title="ivansli" target="_blank">ivansli</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="http://beian.miit.gov.cn" title="沪ICP备2021031949号">沪ICP备2021031949号</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://tool.ivansli.com" title="编程导航">编程导航</a><a class="footer-bar-link cc" href="/" title="cc协议"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">80</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">37</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">20</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="anzhiyufont anzhiyu-icon-house-chimney faa-tada"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/booklist/"><i class="anzhiyufont anzhiyu-icon-book faa-tada"></i><span> 书单</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada"></i><span> 关于</span></a></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Apple/" style="font-size: 0.88rem;">Apple<sup>2</sup></a><a href="/tags/CI-CD/" style="font-size: 0.88rem;">CI/CD<sup>1</sup></a><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 0.88rem;">C语言<sup>1</sup></a><a href="/tags/Docker/" style="font-size: 0.88rem;">Docker<sup>2</sup></a><a href="/tags/IoT/" style="font-size: 0.88rem;">IoT<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>2</sup></a><a href="/tags/MySQL/" style="font-size: 0.88rem;">MySQL<sup>5</sup></a><a href="/tags/PHP/" style="font-size: 0.88rem;">PHP<sup>1</sup></a><a href="/tags/Python/" style="font-size: 0.88rem;">Python<sup>1</sup></a><a href="/tags/Unix/" style="font-size: 0.88rem;">Unix<sup>2</sup></a><a href="/tags/ZooKeeper/" style="font-size: 0.88rem;">ZooKeeper<sup>1</sup></a><a href="/tags/crontab/" style="font-size: 0.88rem;">crontab<sup>1</sup></a><a href="/tags/git/" style="font-size: 0.88rem;">git<sup>4</sup></a><a href="/tags/gitlab/" style="font-size: 0.88rem;">gitlab<sup>1</sup></a><a href="/tags/golang/" style="font-size: 0.88rem;">golang<sup>31</sup></a><a href="/tags/grpc-go/" style="font-size: 0.88rem;">grpc-go<sup>3</sup></a><a href="/tags/k8s/" style="font-size: 0.88rem;">k8s<sup>1</sup></a><a href="/tags/redis/" style="font-size: 0.88rem;">redis<sup>6</sup></a><a href="/tags/%E4%B8%AD%E6%96%87%E7%BC%96%E7%A8%8B/" style="font-size: 0.88rem;">中文编程<sup>1</sup></a><a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" style="font-size: 0.88rem;">中间件<sup>13</sup></a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8FID/" style="font-size: 0.88rem;">分布式ID<sup>1</sup></a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/" style="font-size: 0.88rem;">分布式锁<sup>1</sup></a><a href="/tags/%E5%8D%9A%E5%BC%88%E8%AE%BA/" style="font-size: 0.88rem;">博弈论<sup>3</sup></a><a href="/tags/%E5%8F%B7%E6%AE%B5%E5%8F%91%E5%8F%B7%E5%99%A8/" style="font-size: 0.88rem;">号段发号器<sup>1</sup></a><a href="/tags/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" style="font-size: 0.88rem;">常见问题<sup>6</sup></a><a href="/tags/%E6%8C%87%E6%95%B0%E9%80%80%E9%81%BF/" style="font-size: 0.88rem;">指数退避<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 0.88rem;">数据库<sup>1</sup></a><a href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" style="font-size: 0.88rem;">消息队列<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95%E6%8A%80%E5%B7%A7/" style="font-size: 0.88rem;">算法技巧<sup>6</sup></a><a href="/tags/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/" style="font-size: 0.88rem;">系统架构<sup>5</sup></a><a href="/tags/%E7%BB%8F%E6%B5%8E%E5%AD%A6/" style="font-size: 0.88rem;">经济学<sup>4</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E5%8E%86%E5%8F%B2/" style="font-size: 0.88rem;">编程历史<sup>8</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86/" style="font-size: 0.88rem;">编程原理<sup>31</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7/" style="font-size: 0.88rem;">编程工具<sup>1</sup></a><a href="/tags/%E8%81%8C%E5%9C%BA%E5%BF%83%E5%A3%B0/" style="font-size: 0.88rem;">职场心声<sup>1</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/" style="font-size: 0.88rem;">软件工具<sup>2</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95%E7%BB%8F%E9%AA%8C/" style="font-size: 0.88rem;">面试经验<sup>4</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.umd.js"></script><script src="/pluginsSrc/instant.page/instantpage.js" type="module"></script><script src="/pluginsSrc/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/pluginsSrc/node-snackbar/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script async data-pjax src="/pluginsSrc/anzhiyu-theme-static/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="/pluginsSrc/anzhiyu-theme-static/icon/ali_iconfont_css.css"><script defer="defer" id="fluttering_ribbon" mobile="true" src="/pluginsSrc/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><link rel="stylesheet" href="/pluginsSrc/anzhiyu-theme-static/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="/pluginsSrc/anzhiyu-blog-static/js/APlayer.min.js"></script><script src="/pluginsSrc/hexo-anzhiyu-music/assets/js/Meting2.min.js"></script><script src="/pluginsSrc/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="/pluginsSrc/anzhiyu-theme-static/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>