<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Protobuf Name Conflict åˆ†æä¸è§£å†³ | æå®¢ä¹‹é“</title><meta name="keywords" content="Protobuf Name Conflictå†²çª"><meta name="author" content="ivansli"><meta name="copyright" content="ivansli"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Protobuf Name Conflict åˆ†æä¸è§£å†³"><meta name="application-name" content="Protobuf Name Conflict åˆ†æä¸è§£å†³"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Protobuf Name Conflict åˆ†æä¸è§£å†³"><meta property="og:url" content="https://blog.ivansli.com/2022/08/07/grpc-conflict/index.html"><meta property="og:site_name" content="æå®¢ä¹‹é“"><meta property="og:description" content="Protobuf Name Conflict"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://blog.ivansli.com/img/2022/08/1392790189.png"><meta property="article:author" content="ivansli"><meta property="article:tag" content="ä¼Šä¸‡çš„å°ç«™,ivansli,ç¼–ç¨‹æŠ€æœ¯,ç¼–ç¨‹æŠ€æœ¯ä¹‹é“,ç¼–ç¨‹åŸç†,goå¼€å‘æŠ€å·§"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://blog.ivansli.com/img/2022/08/1392790189.png"><meta name="description" content="Protobuf Name Conflict"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://blog.ivansli.com/2022/08/07/grpc-conflict/"><link rel="preconnect"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: undefined,
  diytitle: undefined,
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: undefined,
  friends_vue_info: undefined,
  navMusic: false,
  mainTone: undefined,
  authorStatus: {"skills":["ğŸ¤–ï¸ æ•°ç ç§‘æŠ€çˆ±å¥½è€…","ğŸ” åˆ†äº«ä¸çƒ­å¿ƒå¸®åŠ©","ğŸƒ è„šè¸å®åœ°è¡ŒåŠ¨æ´¾"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€","rightMenuMsgToTraditionalChinese":"è½¬ä¸ºç¹ä½“","rightMenuMsgToSimplifiedChinese":"è½¬ä¸ºç®€ä½“"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"ä½œè€…: ivansli","link":"é“¾æ¥: ","source":"æ¥æº: æå®¢ä¹‹é“","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚","copySuccess":"å¤åˆ¶æˆåŠŸï¼Œå¤åˆ¶å’Œè½¬è½½è¯·æ ‡æ³¨æœ¬æ–‡åœ°å€"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: '/pluginsSrc/flickr-justified-gallery/dist/fjGallery.min.js',
      css: '/pluginsSrc/flickr-justified-gallery/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'æå®¢ä¹‹é“',
  title: 'Protobuf Name Conflict åˆ†æä¸è§£å†³',
  postAI: '',
  pageFillDescription: 'é—®é¢˜èƒŒæ™¯, åˆ†æè¿‡ç¨‹, How do I fix a protocol buffer namespace conflict?, è§£å†³åŠæ³•, æ‰©å±•çŸ¥è¯†é—®é¢˜èƒŒæ™¯æœ€è¿‘åœ¨å¯¹è€é¡¹ç›®è¿›è¡Œé‡æ„å·¥ä½œåœ¨é‡æ„è¿‡ç¨‹ä¸­å‘ç°éœ€è¦é€šè¿‡è°ƒç”¨è‹¥å¹²è¿œç«¯å¾®æœåŠ¡è¿œç«¯å¾®æœåŠ¡éƒ½æœ‰æå‰å®šä¹‰å¥½çš„åœ¨è¿è¡Œæ—¶ç¼–è¯‘é€šè¿‡è¿è¡Œåˆ™å‡ºç°äº†å†²çªé—®é¢˜ä¹Ÿå°±æ˜¯è¯´åœ¨è¿è¡Œæ—¶æŠ¥é”™æç¤ºå­˜åœ¨ç›¸åŒåç§°çš„æ¶ˆæ¯ä½“å…·ä½“æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹æ‰€ç¤ºå¾®æœåŠ¡ä¸å¾®æœåŠ¡çš„ä¸­å®šä¹‰çš„åç§°éƒ½å«å¹¶ä¸”éƒ½å­˜åœ¨ä¸€ä¸ªåŒåçš„æ¶ˆæ¯ä½“ç”±äºæ˜¯è€çš„é¡¹ç›®å¹¶ä¸”å·²ç»æŒ‰ç…§ç°æœ‰å®šä¹‰çš„æ ¼å¼ä¸æ¥å£å¯¹å¤–æœåŠ¡äº†å¾ˆé•¿æ—¶é—´æ‰€ä»¥è¿™ä¸ªæ—¶å€™å†ä¿®æ”¹åŒ…åç§°åç§°åˆ™ä¸å¯è¡Œåˆ†æäº†ä¸€ä¸‹æ—¢ç„¶è€çš„é¡¹ç›®å¯ä»¥æ­£å¸¸è¿è¡Œåˆ™æ„å‘³ç€å¯èƒ½æ˜¯ç”±äºæ‰€ä¾èµ–çš„çš„æŸäº›åŒ…çš„ç‰ˆæœ¬ä¸åŒå¯¼è‡´ä»¥å‰çš„é¡¹ç›®å¯è¿è¡Œç°åœ¨é‡æ„æ—¶å´å‡ºç°ç”±äºé¡¹ç›®ä¹…è¿œæ²¡æœ‰æ–‡æ¡£æ²¡æœ‰æ³¨é‡Šæ²¡äººäº¤æ¥å¯¹äºè¿™ç§ä¸‰æ— é¡¹ç›®åªèƒ½é è‡ªå·±æ‘¸ç´¢åˆ†æè¿‡ç¨‹é€šè¿‡æŠ¥é”™ä¿¡æ¯æ˜¾ç¤ºçš„è°ƒç”¨æ ˆå¯ä»¥çœ‹å‡ºæœ€ç»ˆæ˜¯åœ¨è¿™è¡Œä»£ç å¤„æŠ›å‡ºçš„å…¶æºç å¦‚ä¸‹è¡Œå°±æ˜¯è¿™é‡Œæ‰¾åˆ°æºç ä¹‹åå¯ä»¥çœ‹å‡ºå¯¹äºè¿™ç§å†²çªå…¶å®å­˜åœ¨å‡ ç§å¤„ç†ç­–ç•¥å¦‚æœå­˜åœ¨ç¯å¢ƒå˜é‡åˆ™ä¼šæ ¹æ®ç¯å¢ƒå˜é‡å…·ä½“å€¼è¿›è¡Œä¸åŒå¤„ç†ç¯å¢ƒå˜é‡å€¼ä¸ºåˆ™ä¼šåœ¨è¿è¡Œæ—¶ç¯å¢ƒå˜é‡å€¼ä¸ºåˆ™ä»…ä»…ä¼šè¾“å‡ºä¸€ä¸ªæç¤ºä¿¡æ¯ç¯å¢ƒå˜é‡å€¼ä¸ºåˆ™ä¼šç›´æ¥å¿½ç•¥æç¤ºä¿¡æ¯ä¹Ÿæ²¡æœ‰é»˜è®¤ä½¿ç”¨åŒæ—¶ä¹Ÿå‘ç°ä¸Šé¢é€»è¾‘æ˜¯åŒ…çš„ç‰ˆæœ¬äºæ˜¯å°±åˆ†åˆ«æ‰¾å‡ºç‰ˆæœ¬ä¸­å¯¹åº”çš„é€»è¾‘ç‰ˆæœ¬ç‰ˆæœ¬å¯ä»¥æ˜æ˜¾çš„çœ‹å‡ºåœ¨ä¸åŒçš„ç‰ˆæœ¬ä¸­å¤„ç†å†²çªçš„æ–¹å¼å¤§æœ‰ä¸åŒåœ¨ä¸­è¿˜åªæ˜¯è¾“å‡ºä¸€æ®µæç¤ºä¿¡æ¯åœ¨ä»¥åŠä¹‹åçš„ç‰ˆæœ¬å°±ä¼šæ ¹æ®ä¸åŒçš„ç­–ç•¥è¿›è¡Œå¤„ç†æœ€è¿‘å‡ ä¸ªç‰ˆæœ¬çš„å‘å¸ƒæ—¶é—´å¦‚ä¸‹å›¾æ‰€ç¤ºé’ˆå¯¹æ­¤é—®é¢˜å®˜æ–¹ä¹Ÿæœ‰ä¸€ä¸ªè¯´æ˜æ–‡æ¡£è§£å†³åŠæ³•é€šè¿‡ä¸Šé¢åˆ†æå¯çŸ¥åœ¨ä¸åŒç‰ˆæœ¬çš„åŒ…ä¸­å¤„ç†ç­–ç•¥ä¹Ÿä¸åŒæ‰€ä»¥å¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡é™ä½ç‰ˆæœ¬æ¥è§£å†³è®¾ç½®ç¯å¢ƒå˜é‡ç¼–è¯‘æ—¶è¿è¡Œæ—¶é™ä½ç‰ˆæœ¬åœ¨ä¸­æ·»åŠ é™ä½åŒ…çš„ç‰ˆæœ¬æ·»åŠ ä¹‹åæ‰§è¡Œç„¶åé‡æ–°ç¼–è¯‘è¿è¡Œç›®å‰ç¬”è€…è¿™é‡Œä½¿ç”¨çš„æ–¹å¼é€šè¿‡é™ä½ç‰ˆæœ¬æ¥è§£å†³é—®é¢˜æ‰©å±•çŸ¥è¯†å…³äºçš„ä¸åŒºåˆ«æ¨¡å—æ˜¯åŸå§‹çš„åè®®ç¼“å†²åŒºæ¨¡å—æ˜¯æ­¤çš„æ›´æ–°ç‰ˆæœ¬å…¶è®¾è®¡å®—æ—¨æ˜¯ç®€å•æ˜“äºä½¿ç”¨å’Œå®‰å…¨æ›´æ–°åçš„çš„ä¸»è¦ç‰¹æ€§æ˜¯æ”¯æŒåå°„å¹¶å°†é¢å‘ç”¨æˆ·çš„ä¸åº•å±‚å®ç°åˆ†ç¦»å»ºè®®åœ¨æ–°ä»£ç ä¸­ä½¿ç”¨çš„åŠæ›´é«˜ç‰ˆæœ¬åŒ…è£…äº†æ–°çš„å®ç°å¹¶å…è®¸ç¨‹åºä»¥å¢é‡æ–¹å¼é‡‡ç”¨æ–°çš„ä¾‹å¦‚åœ¨ä¸­å®šä¹‰çš„çŸ¥åç±»å‹åªæ˜¯åœ¨æ–°æ¨¡å—ä¸­å®šä¹‰çš„é‚£äº›ç±»å‹çš„åˆ«åå› æ­¤å’Œå¯ä»¥äº’æ¢ä½¿ç”¨',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-08 15:38:53',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">æå®¢ä¹‹é“</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="anzhiyufont anzhiyu-icon-house-chimney faa-tada"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/booklist/"><i class="anzhiyufont anzhiyu-icon-book faa-tada"></i><span> ä¹¦å•</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada"></i><span> å…³äº</span></a></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="éšæœºå‰å¾€ä¸€ä¸ªæ–‡ç« " href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="åˆ‡æ¢"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">åŸåˆ›</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/golang/" itemprop="url">golang</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/golang/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>golang</span></a><a class="article-meta__tags" href="/tags/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>å¸¸è§é—®é¢˜</span></a><a class="article-meta__tags" href="/tags/grpc-go/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>grpc-go</span></a></span></div></div><h1 class="post-title" itemprop="name headline">Protobuf Name Conflict åˆ†æä¸è§£å†³</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2022-08-06T16:00:00.000Z" title="å‘è¡¨äº 2022-08-07 00:00:00">2022-08-07</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-07-08T07:38:53.306Z" title="æ›´æ–°äº 2024-07-08 15:38:53">2024-07-08</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="æ–‡ç« å­—æ•°"></i><span class="post-meta-label" title="æ–‡ç« å­—æ•°">å­—æ•°æ€»è®¡:</span><span class="word-count" title="æ–‡ç« å­—æ•°">2.2k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="é˜…è¯»æ—¶é•¿"></i><span class="post-meta-label" title="é˜…è¯»æ—¶é•¿">é˜…è¯»æ—¶é•¿:</span><span>10åˆ†é’Ÿ</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="Protobuf Name Conflict åˆ†æä¸è§£å†³"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="é˜…è¯»é‡">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="ä½œè€…IPå±åœ°ä¸ºä¸Šæµ·"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>ä¸Šæµ·</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/img/2022/08/1392790189.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://blog.ivansli.com/2022/08/07/grpc-conflict/"><header><a class="post-meta-categories" href="/categories/golang/" itemprop="url">golang</a><a href="/tags/golang/" tabindex="-1" itemprop="url">golang</a><a href="/tags/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" tabindex="-1" itemprop="url">å¸¸è§é—®é¢˜</a><a href="/tags/grpc-go/" tabindex="-1" itemprop="url">grpc-go</a><h1 id="CrawlerTitle" itemprop="name headline">Protobuf Name Conflict åˆ†æä¸è§£å†³</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">ivansli</span><time itemprop="dateCreated datePublished" datetime="2022-08-06T16:00:00.000Z" title="å‘è¡¨äº 2022-08-07 00:00:00">2022-08-07</time><time itemprop="dateCreated datePublished" datetime="2024-07-08T07:38:53.306Z" title="æ›´æ–°äº 2024-07-08 15:38:53">2024-07-08</time></header><h2 id="é—®é¢˜èƒŒæ™¯"><a href="#é—®é¢˜èƒŒæ™¯" class="headerlink" title="é—®é¢˜èƒŒæ™¯"></a>é—®é¢˜èƒŒæ™¯</h2><p>æœ€è¿‘ï¼Œåœ¨å¯¹è€é¡¹ç›®è¿›è¡Œé‡æ„å·¥ä½œã€‚åœ¨é‡æ„è¿‡ç¨‹ä¸­å‘ç°éœ€è¦é€šè¿‡ grpc è°ƒç”¨è‹¥å¹²è¿œç«¯å¾®æœåŠ¡ï¼Œè¿œç«¯å¾®æœåŠ¡éƒ½æœ‰æå‰å®šä¹‰å¥½çš„ protoï¼Œåœ¨è¿è¡Œæ—¶ï¼ˆç¼–è¯‘é€šè¿‡ï¼Œè¿è¡Œåˆ™panicï¼‰å‡ºç°äº† <code>name conflict</code> å†²çªé—®é¢˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è¿è¡Œæ—¶æŠ¥é”™æç¤ºå­˜åœ¨ç›¸åŒåç§°çš„ message æ¶ˆæ¯ä½“ã€‚</p>
<p>å…·ä½“æŠ¥é”™ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">âœ  app &gt; <span class="keyword">go</span> mod tidy      </span><br><span class="line">âœ  app &gt; <span class="keyword">go</span> build main.<span class="keyword">go</span> </span><br><span class="line">âœ  app &gt; ./main api start</span><br><span class="line"></span><br><span class="line"><span class="built_in">panic</span>: proto: file <span class="string">&quot;usermgt.proto&quot;</span> has a name conflict over pb.Response</span><br><span class="line">        previously from: <span class="string">&quot;eslServer/pkg/microgrpc/merchant/pb&quot;</span></span><br><span class="line">        currently from:  <span class="string">&quot;eslServer/pkg/microgrpc/usermgt/pb&quot;</span></span><br><span class="line">See https:<span class="comment">//developers.google.com/protocol-buffers/docs/reference/go/faq#namespace-conflict</span></span><br><span class="line"></span><br><span class="line">goroutine <span class="number">1</span> [running]:</span><br><span class="line">google.golang.org/protobuf/reflect/protoregistry.glob..func1(&#123;<span class="number">0x1fcfb20</span>?, <span class="number">0xc00046c350</span>?&#125;, &#123;<span class="number">0x1fcfb20</span>?, <span class="number">0xc00046c390</span>&#125;)</span><br><span class="line">        /Users/ivanli/<span class="keyword">go</span>/pkg/mod/google.golang.org/protobuf@v1<span class="number">.27</span><span class="number">.1</span>/reflect/protoregistry/registry.<span class="keyword">go</span>:<span class="number">54</span> +<span class="number">0x1ee</span></span><br><span class="line">google.golang.org/protobuf/reflect/protoregistry.(*Files).RegisterFile.func1(&#123;<span class="number">0x1fdca28</span>, <span class="number">0xc0001f51c0</span>&#125;)</span><br><span class="line">        /Users/ivanli/<span class="keyword">go</span>/pkg/mod/google.golang.org/protobuf@v1<span class="number">.27</span><span class="number">.1</span>/reflect/protoregistry/registry.<span class="keyword">go</span>:<span class="number">152</span> +<span class="number">0x279</span></span><br><span class="line">google.golang.org/protobuf/reflect/protoregistry.rangeTopLevelDescriptors(&#123;<span class="number">0x1fdfa10</span>, <span class="number">0xc0005ae000</span>&#125;, <span class="number">0xc0005453b8</span>)</span><br><span class="line">        /Users/ivanli/<span class="keyword">go</span>/pkg/mod/google.golang.org/protobuf@v1<span class="number">.27</span><span class="number">.1</span>/reflect/protoregistry/registry.<span class="keyword">go</span>:<span class="number">415</span> +<span class="number">0x174</span></span><br><span class="line">google.golang.org/protobuf/reflect/protoregistry.(*Files).RegisterFile(<span class="number">0xc000594048</span>, &#123;<span class="number">0x1fdfa10</span>?, <span class="number">0xc0005ae000</span>?&#125;)</span><br><span class="line">        /Users/ivanli/<span class="keyword">go</span>/pkg/mod/google.golang.org/protobuf@v1<span class="number">.27</span><span class="number">.1</span>/reflect/protoregistry/registry.<span class="keyword">go</span>:<span class="number">147</span> +<span class="number">0x739</span></span><br><span class="line">google.golang.org/protobuf/internal/filedesc.Builder.Build(&#123;&#123;<span class="number">0x1bcc89c</span>, <span class="number">0x22</span>&#125;, &#123;<span class="number">0x284a380</span>, <span class="number">0x6ef</span>, <span class="number">0x6ef</span>&#125;, <span class="number">0x0</span>, <span class="number">0xd</span>, <span class="number">0x0</span>, <span class="number">0x1</span>, &#123;<span class="number">0x1fd3e50</span>, ...&#125;, ...&#125;)</span><br><span class="line">        /Users/ivanli/<span class="keyword">go</span>/pkg/mod/google.golang.org/protobuf@v1<span class="number">.27</span><span class="number">.1</span>/internal/filedesc/build.<span class="keyword">go</span>:<span class="number">113</span> +<span class="number">0x1d6</span></span><br><span class="line">google.golang.org/protobuf/internal/filetype.Builder.Build(&#123;&#123;&#123;<span class="number">0x1bcc89c</span>, <span class="number">0x22</span>&#125;, &#123;<span class="number">0x284a380</span>, <span class="number">0x6ef</span>, <span class="number">0x6ef</span>&#125;, <span class="number">0x0</span>, <span class="number">0xd</span>, <span class="number">0x0</span>, <span class="number">0x1</span>, &#123;<span class="number">0x0</span>, ...&#125;, ...&#125;, ...&#125;)</span><br><span class="line">        /Users/ivanli/<span class="keyword">go</span>/pkg/mod/google.golang.org/protobuf@v1<span class="number">.27</span><span class="number">.1</span>/internal/filetype/build.<span class="keyword">go</span>:<span class="number">139</span> +<span class="number">0x19d</span></span><br><span class="line">eslServer/pkg/microgrpc/usermgt/pb.file_usermgt_proto_init()</span><br><span class="line">        /Users/ivanli/code/xxxx/esl-server/app/pkg/microgrpc/usermgt/pb/usermgt.pb.<span class="keyword">go</span>:<span class="number">1179</span> +<span class="number">0x19a</span></span><br><span class="line">eslServer/pkg/microgrpc/usermgt/pb.init<span class="number">.0</span>()</span><br><span class="line">        /Users/ivanli/code/xxxx/esl-server/app/pkg/microgrpc/usermgt/pb/usermgt.pb.<span class="keyword">go</span>:<span class="number">1003</span> +<span class="number">0x17</span></span><br></pre></td></tr></table></figure>

<p>å¾®æœåŠ¡merchantä¸å¾®æœåŠ¡usermgtçš„protoä¸­å®šä¹‰çš„ package åç§°éƒ½å« pbï¼Œå¹¶ä¸”éƒ½å­˜åœ¨ä¸€ä¸ªåŒåçš„ Response message æ¶ˆæ¯ä½“ã€‚ç”±äºæ˜¯è€çš„é¡¹ç›®ï¼Œå¹¶ä¸”å·²ç»æŒ‰ç…§ç°æœ‰ proto å®šä¹‰çš„æ ¼å¼ä¸æ¥å£å¯¹å¤–æœåŠ¡äº†å¾ˆé•¿æ—¶é—´ã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªæ—¶å€™å†ä¿®æ”¹åŒ…åç§°ã€messageåç§°åˆ™ä¸å¯è¡Œã€‚</p>
<p>åˆ†æäº†ä¸€ä¸‹ï¼Œæ—¢ç„¶è€çš„é¡¹ç›®å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œåˆ™æ„å‘³ç€å¯èƒ½æ˜¯ç”±äºæ‰€ä¾èµ–çš„çš„æŸäº›åŒ…çš„ç‰ˆæœ¬ä¸åŒå¯¼è‡´ä»¥å‰çš„é¡¹ç›®å¯è¿è¡Œï¼Œç°åœ¨é‡æ„æ—¶å´å‡ºç°panicã€‚</p>
<blockquote>
<p>ç”±äºé¡¹ç›®ä¹…è¿œï¼Œæ²¡æœ‰æ–‡æ¡£ï¼Œæ²¡æœ‰æ³¨é‡Šï¼Œæ²¡äººäº¤æ¥ã€‚å¯¹äºè¿™ç§ä¸‰æ— é¡¹ç›®ï¼Œåªèƒ½é è‡ªå·±æ‘¸ç´¢ã€‚</p>
</blockquote>
<h2 id="åˆ†æè¿‡ç¨‹"><a href="#åˆ†æè¿‡ç¨‹" class="headerlink" title="åˆ†æè¿‡ç¨‹"></a>åˆ†æè¿‡ç¨‹</h2><p>é€šè¿‡æŠ¥é”™ä¿¡æ¯æ˜¾ç¤ºçš„è°ƒç”¨æ ˆå¯ä»¥çœ‹å‡ºï¼Œæœ€ç»ˆæ˜¯åœ¨ <code>/Users/ivanli/go/pkg/mod/google.golang.org/protobuf@v1.27.1/reflect/protoregistry/registry.go:54</code> è¿™è¡Œä»£ç å¤„æŠ›å‡ºçš„panicï¼Œå…¶æºç å¦‚ä¸‹:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ignoreConflict reports whether to ignore a registration conflict</span></span><br><span class="line"><span class="comment">// given the descriptor being registered and the error.</span></span><br><span class="line"><span class="comment">// It is a variable so that the behavior is easily overridden in another file.</span></span><br><span class="line"><span class="keyword">var</span> ignoreConflict = <span class="function"><span class="keyword">func</span><span class="params">(d protoreflect.Descriptor, err <span class="type">error</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">	<span class="keyword">const</span> env = <span class="string">&quot;GOLANG_PROTOBUF_REGISTRATION_CONFLICT&quot;</span></span><br><span class="line">	<span class="keyword">const</span> faq = <span class="string">&quot;https://developers.google.com/protocol-buffers/docs/reference/go/faq#namespace-conflict&quot;</span></span><br><span class="line">	policy := conflictPolicy</span><br><span class="line">	<span class="keyword">if</span> v := os.Getenv(env); v != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">		policy = v</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">switch</span> policy &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;panic&quot;</span>:</span><br><span class="line">		<span class="built_in">panic</span>(fmt.Sprintf(<span class="string">&quot;%v\nSee %v\n&quot;</span>, err, faq))  <span class="comment">// 54è¡Œ å°±æ˜¯è¿™é‡Œ</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;warn&quot;</span>:</span><br><span class="line">		fmt.Fprintf(os.Stderr, <span class="string">&quot;WARNING: %v\nSee %v\n\n&quot;</span>, err, faq)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;ignore&quot;</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		<span class="built_in">panic</span>(<span class="string">&quot;invalid &quot;</span> + env + <span class="string">&quot; value: &quot;</span> + os.Getenv(env))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°æºç ä¹‹åï¼Œå¯ä»¥çœ‹å‡ºå¯¹äºè¿™ç§å†²çªå…¶å®å­˜åœ¨å‡ ç§å¤„ç†ç­–ç•¥ï¼š</p>
<ol>
<li>å¦‚æœå­˜åœ¨ç¯å¢ƒå˜é‡ <code>GOLANG_PROTOBUF_REGISTRATION_CONFLICT</code>ï¼Œåˆ™ä¼šæ ¹æ®ç¯å¢ƒå˜é‡å…·ä½“å€¼è¿›è¡Œä¸åŒå¤„ç†</li>
</ol>
<ul>
<li>ç¯å¢ƒå˜é‡å€¼ä¸ºï¼španicï¼Œåˆ™ä¼šåœ¨è¿è¡Œæ—¶ panic</li>
<li>ç¯å¢ƒå˜é‡å€¼ä¸ºï¼šwarnï¼Œåˆ™ä»…ä»…ä¼šè¾“å‡ºä¸€ä¸ªæç¤ºä¿¡æ¯</li>
<li>ç¯å¢ƒå˜é‡å€¼ä¸ºï¼šignoreï¼Œåˆ™ä¼šç›´æ¥å¿½ç•¥ï¼ˆæç¤ºä¿¡æ¯ä¹Ÿæ²¡æœ‰ï¼‰</li>
</ul>
<ol start="2">
<li>é»˜è®¤ä½¿ç”¨ panic</li>
</ol>
<p>åŒæ—¶ä¹Ÿå‘ç°ï¼Œä¸Šé¢é€»è¾‘æ˜¯ <code>google.golang.org/protobuf</code> åŒ…çš„ <code>v1.27.1</code> ç‰ˆæœ¬ã€‚äºæ˜¯ï¼Œå°±åˆ†åˆ«æ‰¾å‡ºç‰ˆæœ¬<code>v1.26.0</code>ã€<code>v1.25.0</code> ä¸­å¯¹åº”çš„é€»è¾‘ã€‚</p>
<p><code>v1.26.0</code>ç‰ˆæœ¬ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ignoreConflict reports whether to ignore a registration conflict</span></span><br><span class="line"><span class="comment">// given the descriptor being registered and the error.</span></span><br><span class="line"><span class="comment">// It is a variable so that the behavior is easily overridden in another file.</span></span><br><span class="line"><span class="keyword">var</span> ignoreConflict = <span class="function"><span class="keyword">func</span><span class="params">(d protoreflect.Descriptor, err <span class="type">error</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">	<span class="keyword">const</span> env = <span class="string">&quot;GOLANG_PROTOBUF_REGISTRATION_CONFLICT&quot;</span></span><br><span class="line">	<span class="keyword">const</span> faq = <span class="string">&quot;https://developers.google.com/protocol-buffers/docs/reference/go/faq#namespace-conflict&quot;</span></span><br><span class="line">	policy := conflictPolicy</span><br><span class="line">	<span class="keyword">if</span> v := os.Getenv(env); v != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">		policy = v</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">switch</span> policy &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;panic&quot;</span>:</span><br><span class="line">		<span class="built_in">panic</span>(fmt.Sprintf(<span class="string">&quot;%v\nSee %v\n&quot;</span>, err, faq))</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;warn&quot;</span>:</span><br><span class="line">		fmt.Fprintf(os.Stderr, <span class="string">&quot;WARNING: %v\nSee %v\n\n&quot;</span>, err, faq)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;ignore&quot;</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		<span class="built_in">panic</span>(<span class="string">&quot;invalid &quot;</span> + env + <span class="string">&quot; value: &quot;</span> + os.Getenv(env))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>v1.25.0</code>ç‰ˆæœ¬ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ignoreConflict reports whether to ignore a registration conflict</span></span><br><span class="line"><span class="comment">// given the descriptor being registered and the error.</span></span><br><span class="line"><span class="comment">// It is a variable so that the behavior is easily overridden in another file.</span></span><br><span class="line"><span class="keyword">var</span> ignoreConflict = <span class="function"><span class="keyword">func</span><span class="params">(d protoreflect.Descriptor, err <span class="type">error</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">	log.Printf(<span class="string">&quot;&quot;</span>+</span><br><span class="line">		<span class="string">&quot;WARNING: %v\n&quot;</span>+</span><br><span class="line">		<span class="string">&quot;A future release will panic on registration conflicts. See:\n&quot;</span>+</span><br><span class="line">		<span class="string">&quot;https://developers.google.com/protocol-buffers/docs/reference/go/faq#namespace-conflict\n&quot;</span>+</span><br><span class="line">		<span class="string">&quot;\n&quot;</span>, err)</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥æ˜æ˜¾çš„çœ‹å‡ºï¼Œåœ¨ä¸åŒçš„ç‰ˆæœ¬ä¸­å¤„ç†å†²çªçš„æ–¹å¼å¤§æœ‰ä¸åŒã€‚åœ¨ <code>v1.25.0</code> ä¸­è¿˜åªæ˜¯è¾“å‡ºä¸€æ®µæç¤ºä¿¡æ¯ã€‚åœ¨ <code>v1.26.0</code>ä»¥åŠä¹‹åçš„ç‰ˆæœ¬å°±ä¼šæ ¹æ®ä¸åŒçš„ç­–ç•¥è¿›è¡Œå¤„ç†ã€‚</p>
<p>æœ€è¿‘å‡ ä¸ªç‰ˆæœ¬çš„å‘å¸ƒæ—¶é—´å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2022/08/1392790189.png"></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/protocolbuffers/protobuf-go/tags">https://github.com/protocolbuffers/protobuf-go/tags</a></p>
</blockquote>
<p>é’ˆå¯¹æ­¤é—®é¢˜ï¼Œå®˜æ–¹ä¹Ÿæœ‰ä¸€ä¸ªè¯´æ˜æ–‡æ¡£ï¼š</p>
<blockquote>
<p><code>https://developers.google.cn/protocol-buffers/docs/reference/go/faq</code><br><code>https://developers.google.com/protocol-buffers/docs/reference/go/faq#namespace-conflict</code></p>
</blockquote>
<h3 id="How-do-I-fix-a-protocol-buffer-namespace-conflict"><a href="#How-do-I-fix-a-protocol-buffer-namespace-conflict" class="headerlink" title="How do I fix a protocol buffer namespace conflict?"></a>How do I fix a protocol buffer namespace conflict?</h3><p>The way to best fix a namespace conflict depends on the reason why a conflict is occurring.<br>Common ways that namespace conflicts occur:</p>
<ul>
<li><p>Vendored .proto files. When a single .proto file is generated into two or more Go packages and linked into the same Go binary, it conflicts on every protobuf declaration in the generated Go packages. This typically occurs when a .proto file is vendored and a Go package is generated from it, or the generated Go package itself is vendored. Users should avoid vendoring and instead depend on a centralized Go package for that .proto file.</p>
<ul>
<li>If a .proto file is owned by an external party and is lacking a go_package option, then you should coordinate with the owner of that .proto file to specify a centralized Go package that a plurality of users can all depend on.</li>
</ul>
</li>
<li><p>Missing or generic proto package names. If a .proto file does not specify a package name or uses an overly generic package name (for example, â€œmy_serviceâ€), then there is a high probability that declarations within that file will conflict with other declarations elsewhere in the universe. We recommend that every .proto file have a package name that is deliberately chosen to be universally unique (for example, prefixed with the name of a company).</p>
<ul>
<li>Warning: Retroactively changing the package name on a .proto file can potentially cause the use of extension fields or messages stored in google.protobuf.Any to stop working properly.</li>
</ul>
</li>
</ul>
<p>Starting with <code>v1.26.0</code> of the <code>google.golang.org/protobuf</code> module, a hard error will be reported when a Go program starts up that has multiple conflicting protobuf names linked into it. While it is preferable that the source of the conflict be fixed, the fatal error can be immediately worked around in one of two ways:</p>
<ol>
<li><p>At compile time. The default behavior for handling conflicts can be specified at compile time with a linker-initialized variable: <code>go build -ldflags &quot;-X google.golang.org/protobuf/reflect/protoregistry.conflictPolicy=warn&quot;</code></p>
</li>
<li><p>At program execution. The behavior for handling conflicts when executing a particular Go binary can be set with an environment variable: <code>GOLANG_PROTOBUF_REGISTRATION_CONFLICT=warn ./main</code></p>
</li>
</ol>
<h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><p>é€šè¿‡ä¸Šé¢åˆ†æå¯çŸ¥ï¼Œåœ¨ä¸åŒç‰ˆæœ¬çš„åŒ…ä¸­å¤„ç†ç­–ç•¥ä¹Ÿä¸åŒã€‚æ‰€ä»¥ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡ã€é™ä½ç‰ˆæœ¬æ¥è§£å†³ã€‚</p>
<ol>
<li>è®¾ç½®ç¯å¢ƒå˜é‡</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¼–è¯‘æ—¶</span></span><br><span class="line">go build -ldflags &quot;-X google.golang.org/protobuf/reflect/protoregistry.conflictPolicy=warn&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿è¡Œæ—¶</span></span><br><span class="line">GOLANG_PROTOBUF_REGISTRATION_CONFLICT=warn ./main</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>é™ä½ç‰ˆæœ¬</li>
</ol>
<p>åœ¨ go.mod ä¸­æ·»åŠ  replace é™ä½åŒ…çš„ç‰ˆæœ¬</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">replace (</span><br><span class="line">	google.golang.org/protobuf =&gt; google.golang.org/protobuf v1.25.0</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ ä¹‹åæ‰§è¡Œ <code>go mod tidy</code>ï¼Œç„¶åé‡æ–°ç¼–è¯‘ã€è¿è¡Œã€‚</p>
<p>ç›®å‰ï¼Œç¬”è€…è¿™é‡Œä½¿ç”¨çš„æ–¹å¼2ï¼Œé€šè¿‡é™ä½ç‰ˆæœ¬æ¥è§£å†³é—®é¢˜ã€‚</p>
<h2 id="æ‰©å±•çŸ¥è¯†"><a href="#æ‰©å±•çŸ¥è¯†" class="headerlink" title="æ‰©å±•çŸ¥è¯†"></a>æ‰©å±•çŸ¥è¯†</h2><p>å…³äº protobuf çš„ <code>github.com/golang/protobuf</code> ä¸ <code>google.golang.org/protobuf</code> åŒºåˆ«</p>
<p>The github.com&#x2F;golang&#x2F;protobuf module is the original Go protocol buffer API.</p>
<p>The google.golang.org&#x2F;protobuf module is an updated version of this API designed for simplicity, ease of use, and safety. The flagship features of the updated API are support for reflection and a separation of the user-facing API from the underlying implementation.</p>
<p>We recommend that you use google.golang.org&#x2F;protobuf in new code.</p>
<p>Version v1.4.0 and higher of github.com&#x2F;golang&#x2F;protobuf wrap the new implementation and permit programs to adopt the new API incrementally. For example, the well-known types defined in github.com&#x2F;golang&#x2F;protobuf&#x2F;ptypes are simply aliases of those defined in the newer module. Thus, google.golang.org&#x2F;protobuf&#x2F;types&#x2F;known&#x2F;emptypb and github.com&#x2F;golang&#x2F;protobuf&#x2F;ptypes&#x2F;empty may be used interchangeably.</p>
<p><code>github.com/golang/protobuf</code> æ¨¡å—æ˜¯åŸå§‹çš„Goåè®®ç¼“å†²åŒºAPIã€‚<br><code>google.golang.org/protobuf</code> æ¨¡å—æ˜¯æ­¤APIçš„æ›´æ–°ç‰ˆæœ¬ï¼Œå…¶è®¾è®¡å®—æ—¨æ˜¯ç®€å•ã€æ˜“äºä½¿ç”¨å’Œå®‰å…¨ã€‚æ›´æ–°åçš„APIçš„ä¸»è¦ç‰¹æ€§æ˜¯æ”¯æŒåå°„ï¼Œå¹¶å°†é¢å‘ç”¨æˆ·çš„APIä¸åº•å±‚å®ç°åˆ†ç¦»ã€‚</p>
<p>å»ºè®®åœ¨æ–°ä»£ç ä¸­ä½¿ç”¨ <code>google.golang.org/protobuf</code></p>
<p><code>github.com/golang/protobuf</code> çš„v1.4.0åŠæ›´é«˜ç‰ˆæœ¬åŒ…è£…äº†æ–°çš„å®ç°ï¼Œå¹¶å…è®¸ç¨‹åºä»¥å¢é‡æ–¹å¼é‡‡ç”¨æ–°çš„APIã€‚ä¾‹å¦‚ï¼Œåœ¨ <code>github.com/golang/protobuf/ptypes</code> ä¸­å®šä¹‰çš„çŸ¥åç±»å‹åªæ˜¯åœ¨æ–°æ¨¡å—ä¸­å®šä¹‰çš„é‚£äº›ç±»å‹çš„åˆ«åã€‚å› æ­¤ï¼Œ<code>google.golang.org/protobuf/types/known/emptypb</code> å’Œ<code>github.com/golang/protobuf/ptypes/empty</code> å¯ä»¥äº’æ¢ä½¿ç”¨ã€‚</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="å¤´åƒ"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/xiaowangzi.jpg" title="å¤´åƒ" alt="å¤´åƒ"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/xiaowangzi.jpg" title="å¤´åƒ" alt="å¤´åƒ"></a><div class="post-copyright__author_name">ivansli</div><div class="post-copyright__author_desc">å­¦æ— æ­¢å¢ƒ</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="è¯¥æ–‡ç« ä¸ºåŸåˆ›æ–‡ç« ï¼Œæ³¨æ„ç‰ˆæƒåè®®" href="https://blog.ivansli.com/2022/08/07/grpc-conflict/">åŸåˆ›</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://blog.ivansli.com/2022/08/07/grpc-conflict/')">Protobuf Name Conflict åˆ†æä¸è§£å†³</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="èµèµä½œè€…"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>æ‰“èµä½œè€…</div><div class="reward-main"><div class="reward-all"><!--span.reward-title æ„Ÿè°¢ä½ èµäºˆæˆ‘å‰è¿›çš„åŠ›é‡--><ul class="reward-group"><li class="reward-item"><a href="/img/reward/wechat-small.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/reward/wechat-small.png" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="/img/reward/alipay-small.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/reward/alipay-small.png" alt="æ”¯ä»˜å®"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul><!--a.reward-main-btn(href='/about/#about-reward' target='_blank')//.reward-text èµèµè€…åå•
//.reward-dec å› ä¸ºä½ ä»¬çš„æ”¯æŒè®©æˆ‘æ„è¯†åˆ°å†™æ–‡ç« çš„ä»·å€¼ğŸ™--></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« "><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.ivansli.com/2022/08/07/grpc-conflict/"></div><div class="reward-dec">ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« </div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Protobuf Name Conflict åˆ†æä¸è§£å†³&amp;url=https://blog.ivansli.com/2022/08/07/grpc-conflict/&amp;pic=/img/2022/08/1392790189.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="å¤åˆ¶é“¾æ¥" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">æœ¬æ–‡ç³»åŸåˆ›ä½œå“ï¼Œç‰ˆæƒæ‰€æœ‰ï¼ˆç¦æ­¢è½¬è½½ï¼‰</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/golang/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>golang<span class="tagsPageCount">31</span></a><a class="post-meta__box__tags" href="/tags/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>å¸¸è§é—®é¢˜<span class="tagsPageCount">6</span></a><a class="post-meta__box__tags" href="/tags/grpc-go/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>grpc-go<span class="tagsPageCount">3</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="/img/2024/07/helm.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="/pluginsSrc/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="/pluginsSrc/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/07/16/mqtt-mosquitto/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2022/07/3164011582.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">åˆè¯†MQTTä¸mosquitto</div></div></a></div><div class="next-post pull-right"><a href="/2022/10/04/5-ways-generate-distributed-unique-id/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2022/10/0001.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">åˆ†å¸ƒå¼IDçš„5ç§ç”Ÿæˆæ–¹å¼ä»¥åŠGoæºç ä¸­çš„ä¸€ç§åº”ç”¨</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>å–œæ¬¢è¿™ç¯‡æ–‡ç« çš„äººä¹Ÿçœ‹äº†</span></div><div class="relatedPosts-list"><div><a href="/2021/12/20/grpc-go-ingress/" title="grpc-goè¯·æ±‚ingressé‡åˆ°çš„ä¸€ä¸ªé—®é¢˜"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2021/12/619562057.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-12-20</div><div class="title">grpc-goè¯·æ±‚ingressé‡åˆ°çš„ä¸€ä¸ªé—®é¢˜</div></div></a></div><div><a href="/2021/12/20/go-leak/" title="ä¸€æ¬¡ goroutineæ³„éœ² çš„æ’æŸ¥"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2022/01/3628718896.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-12-20</div><div class="title">ä¸€æ¬¡ goroutineæ³„éœ² çš„æ’æŸ¥</div></div></a></div><div><a href="/2022/02/05/grpc-keepalive/" title="grpc-goè®¾ç½®keepalive"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/space-man-small.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-02-05</div><div class="title">grpc-goè®¾ç½®keepalive</div></div></a></div><div><a href="/2024/07/07/240707-helm/" title="helmçš„å®‰è£…&#x2F;ä½¿ç”¨åŠå…¶è¿è¡ŒåŸç†"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2024/07/helm.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-07-07</div><div class="title">helmçš„å®‰è£…&#x2F;ä½¿ç”¨åŠå…¶è¿è¡ŒåŸç†</div></div></a></div><div><a href="/2022/10/04/5-ways-generate-distributed-unique-id/" title="åˆ†å¸ƒå¼IDçš„5ç§ç”Ÿæˆæ–¹å¼ä»¥åŠGoæºç ä¸­çš„ä¸€ç§åº”ç”¨"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2022/10/0001.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-10-04</div><div class="title">åˆ†å¸ƒå¼IDçš„5ç§ç”Ÿæˆæ–¹å¼ä»¥åŠGoæºç ä¸­çš„ä¸€ç§åº”ç”¨</div></div></a></div><div><a href="/2021/11/20/algo-python-vietnam-money/" title="æ•°å­—è½¬è¶Šå—è¯­è¯ç»„å®ç°æ–¹æ³•"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/space-man-small.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-11-20</div><div class="title">æ•°å­—è½¬è¶Šå—è¯­è¯ç»„å®ç°æ–¹æ³•</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/xiaowangzi.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/goutou.png" ait="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">è¿™é‡Œæœ‰<b style="color:#fff">çŸ¥è¯†æ€»ç»“</b>å’Œ<b style="color:#fff">æŠ€æœ¯åˆ†äº«</b>ã€‚ä¹¦å±±æœ‰è·¯å‹¤ä¸ºå¾„ï¼Œå­¦æµ·æ— æ¶¯è‹¦ä½œèˆŸã€‚<b style="color:#fff">æ­¤ç”Ÿä¹Ÿæœ‰æ¶¯</b>ï¼Œ<b style="color:#fff">æ­¤ç”Ÿå­¦æ— æ¶¯</b>ã€‚</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">ivansli</h1><div class="author-info__desc">å­¦æ— æ­¢å¢ƒ</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/coderstart" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>æ–‡ç« ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E8%83%8C%E6%99%AF"><span class="toc-number">1.</span> <span class="toc-text">é—®é¢˜èƒŒæ™¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E8%BF%87%E7%A8%8B"><span class="toc-number">2.</span> <span class="toc-text">åˆ†æè¿‡ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#How-do-I-fix-a-protocol-buffer-namespace-conflict"><span class="toc-number">2.1.</span> <span class="toc-text">How do I fix a protocol buffer namespace conflict?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="toc-number">3.</span> <span class="toc-text">è§£å†³åŠæ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E7%9F%A5%E8%AF%86"><span class="toc-number">4.</span> <span class="toc-text">æ‰©å±•çŸ¥è¯†</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>æœ€è¿‘å‘å¸ƒ</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/07/07/240707-helm/" title="helmçš„å®‰è£…/ä½¿ç”¨åŠå…¶è¿è¡ŒåŸç†"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2024/07/helm.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="helmçš„å®‰è£…/ä½¿ç”¨åŠå…¶è¿è¡ŒåŸç†"/></a><div class="content"><a class="title" href="/2024/07/07/240707-helm/" title="helmçš„å®‰è£…/ä½¿ç”¨åŠå…¶è¿è¡ŒåŸç†">helmçš„å®‰è£…/ä½¿ç”¨åŠå…¶è¿è¡ŒåŸç†</a><time datetime="2024-07-07T01:00:00.000Z" title="å‘è¡¨äº 2024-07-07 09:00:00">2024-07-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/11/theroadtoserfdom/" title="è¯»ï¼šå“ˆè€¶å…‹ã€Šåˆ°å¥´å½¹ä¹‹è·¯ã€‹æœ‰æ„Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2023/11/hayeke.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="è¯»ï¼šå“ˆè€¶å…‹ã€Šåˆ°å¥´å½¹ä¹‹è·¯ã€‹æœ‰æ„Ÿ"/></a><div class="content"><a class="title" href="/2023/11/11/theroadtoserfdom/" title="è¯»ï¼šå“ˆè€¶å…‹ã€Šåˆ°å¥´å½¹ä¹‹è·¯ã€‹æœ‰æ„Ÿ">è¯»ï¼šå“ˆè€¶å…‹ã€Šåˆ°å¥´å½¹ä¹‹è·¯ã€‹æœ‰æ„Ÿ</a><time datetime="2023-11-11T01:44:00.000Z" title="å‘è¡¨äº 2023-11-11 09:44:00">2023-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/07/231007-game-theory3/" title="äºŒäººé›¶å’Œåšå¼ˆä¸æœ€å¤§æœ€å°å®šç†"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2023/09/gametheory-01.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="äºŒäººé›¶å’Œåšå¼ˆä¸æœ€å¤§æœ€å°å®šç†"/></a><div class="content"><a class="title" href="/2023/10/07/231007-game-theory3/" title="äºŒäººé›¶å’Œåšå¼ˆä¸æœ€å¤§æœ€å°å®šç†">äºŒäººé›¶å’Œåšå¼ˆä¸æœ€å¤§æœ€å°å®šç†</a><time datetime="2023-10-07T08:45:00.000Z" title="å‘è¡¨äº 2023-10-07 16:45:00">2023-10-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/07/231007-game-theory2/" title="åšå¼ˆè®ºå¯¹ä¸€èˆ¬é—®é¢˜çš„å»ºæ¨¡åˆ†æ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2023/09/gametheory-01.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="åšå¼ˆè®ºå¯¹ä¸€èˆ¬é—®é¢˜çš„å»ºæ¨¡åˆ†æ"/></a><div class="content"><a class="title" href="/2023/10/07/231007-game-theory2/" title="åšå¼ˆè®ºå¯¹ä¸€èˆ¬é—®é¢˜çš„å»ºæ¨¡åˆ†æ">åšå¼ˆè®ºå¯¹ä¸€èˆ¬é—®é¢˜çš„å»ºæ¨¡åˆ†æ</a><time datetime="2023-10-07T03:40:00.000Z" title="å‘è¡¨äº 2023-10-07 11:40:00">2023-10-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/18/230918-game-theory/" title="è®¤è¯†åšå¼ˆè®º"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2023/09/gametheory-01.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="è®¤è¯†åšå¼ˆè®º"/></a><div class="content"><a class="title" href="/2023/09/18/230918-game-theory/" title="è®¤è¯†åšå¼ˆè®º">è®¤è¯†åšå¼ˆè®º</a><time datetime="2023-09-18T10:00:00.000Z" title="å‘è¡¨äº 2023-09-18 18:00:00">2023-09-18</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><!-- - let centerImg = theme.footer.socialBar.centerImg ? theme.footer.socialBar.centerImg : theme.avatar.img--><div id="footer_deal"><!-- å·¦ä¾§å›¾æ ‡--><a class="deal_link" href="mailto:gopher001@outlook.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><!--ä¸ªäººå¤´åƒå›¾æ ‡--><!--img.footer_mini_logo(title="è¿”å›é¡¶éƒ¨", alt="è¿”å›é¡¶éƒ¨" onclick="anzhiyu.scrollToDest(0, 500)", src=centerImg, size="50px")--><!-- å³ä¾§å›¾æ ‡--><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/coderstart" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" href="/copyright" title="CC"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i></a></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">å¯¼èˆª</div><div class="footer-links"><a class="footer-item" title="æ–‡ç« åˆ—è¡¨" href="/archives/">æ–‡ç« åˆ—è¡¨</a><a class="footer-item" title="æˆ‘çš„ä¹¦å•" href="/booklist/">æˆ‘çš„ä¹¦å•</a><a class="footer-item" title="æå®¢è¯´è¯´" href="/essay/">æå®¢è¯´è¯´</a><a class="footer-item" title="å…³äºæœ¬ç«™" href="/about/">å…³äºæœ¬ç«™</a></div></div><div class="footer-group"><div class="footer-title">åˆ†ç±»</div><div class="footer-links"><a class="footer-item" title="ç¼–ç¨‹åŸç†" href="/categories/%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86/">ç¼–ç¨‹åŸç†</a><a class="footer-item" title="ç³»ç»Ÿæ¶æ„" href="/categories/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/">ç³»ç»Ÿæ¶æ„</a><a class="footer-item" title="ä¸­é—´ä»¶" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/">ä¸­é—´ä»¶</a><a class="footer-item" title="ç¼–ç¨‹åŸç†" href="/categories/%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86/">ç¼–ç¨‹åŸç†</a></div></div><div class="footer-group"><div class="footer-title">åè®®</div><div class="footer-links"><a class="footer-item" title="éšç§åè®®" href="/privacy/">éšç§åè®®</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="ç‰ˆæƒåè®®" href="/copyright/">ç‰ˆæƒåè®®</a></div></div><div class="footer-group"><div class="footer-title">å‹é“¾</div><div class="footer-links"><a class="footer-item" title="ç¼–ç¨‹å¯¼èˆª" target="_blank" rel="noopener" href="https://tool.ivansli.com/">ç¼–ç¨‹å¯¼èˆª</a></div></div></div><p id="ghbdages"><a class="github-badge" target="_blank" style="margin-inline:5px" data-title="åšå®¢æ¡†æ¶ä¸ºHexo" title="åšå®¢æ¡†æ¶ä¸ºHexo"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/badge/Frame-Hexo.svg" alt="åšå®¢æ¡†æ¶ä¸ºHexo"/></a><a class="github-badge" target="_blank" style="margin-inline:5px" data-title="æœ¬ç«™ä½¿ç”¨AnZhiYuä¸»é¢˜" title="æœ¬ç«™ä½¿ç”¨AnZhiYuä¸»é¢˜"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/badge/Theme-AnZhiYu-2E67D3.svg" alt="æœ¬ç«™ä½¿ç”¨AnZhiYuä¸»é¢˜"/></a><a class="github-badge" target="_blank" style="margin-inline:5px" data-title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯" title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/badge/Copyright-BY-NC-SA.svg" alt="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2019 - 2024 Â· <a class="footer-bar-link" href="/" title="ivansli" target="_blank">ivansli</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="http://beian.miit.gov.cn" title="æ²ªICPå¤‡2021031949å·">æ²ªICPå¤‡2021031949å·</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://tool.ivansli.com" title="ç¼–ç¨‹å¯¼èˆª">ç¼–ç¨‹å¯¼èˆª</a><a class="footer-bar-link cc" href="/" title="ccåè®®"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">æ–‡ç« </div><div class="length-num">80</div></a><a href="/tags/" title="tag"><div class="headline">æ ‡ç­¾</div><div class="length-num">37</div></a><a href="/categories/" title="category"><div class="headline">åˆ†ç±»</div><div class="length-num">20</div></a></div><span class="sidebar-menu-item-title">åŠŸèƒ½</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="æ˜¾ç¤ºæ¨¡å¼"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>æ˜¾ç¤ºæ¨¡å¼</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="anzhiyufont anzhiyu-icon-house-chimney faa-tada"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/booklist/"><i class="anzhiyufont anzhiyu-icon-book faa-tada"></i><span> ä¹¦å•</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada"></i><span> å…³äº</span></a></div></div><span class="sidebar-menu-item-title">æ ‡ç­¾</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Apple/" style="font-size: 0.88rem;">Apple<sup>2</sup></a><a href="/tags/CI-CD/" style="font-size: 0.88rem;">CI/CD<sup>1</sup></a><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 0.88rem;">Cè¯­è¨€<sup>1</sup></a><a href="/tags/Docker/" style="font-size: 0.88rem;">Docker<sup>2</sup></a><a href="/tags/IoT/" style="font-size: 0.88rem;">IoT<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>2</sup></a><a href="/tags/MySQL/" style="font-size: 0.88rem;">MySQL<sup>5</sup></a><a href="/tags/PHP/" style="font-size: 0.88rem;">PHP<sup>1</sup></a><a href="/tags/Python/" style="font-size: 0.88rem;">Python<sup>1</sup></a><a href="/tags/Unix/" style="font-size: 0.88rem;">Unix<sup>2</sup></a><a href="/tags/ZooKeeper/" style="font-size: 0.88rem;">ZooKeeper<sup>1</sup></a><a href="/tags/crontab/" style="font-size: 0.88rem;">crontab<sup>1</sup></a><a href="/tags/git/" style="font-size: 0.88rem;">git<sup>4</sup></a><a href="/tags/gitlab/" style="font-size: 0.88rem;">gitlab<sup>1</sup></a><a href="/tags/golang/" style="font-size: 0.88rem;">golang<sup>31</sup></a><a href="/tags/grpc-go/" style="font-size: 0.88rem;">grpc-go<sup>3</sup></a><a href="/tags/k8s/" style="font-size: 0.88rem;">k8s<sup>1</sup></a><a href="/tags/redis/" style="font-size: 0.88rem;">redis<sup>6</sup></a><a href="/tags/%E4%B8%AD%E6%96%87%E7%BC%96%E7%A8%8B/" style="font-size: 0.88rem;">ä¸­æ–‡ç¼–ç¨‹<sup>1</sup></a><a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" style="font-size: 0.88rem;">ä¸­é—´ä»¶<sup>13</sup></a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8FID/" style="font-size: 0.88rem;">åˆ†å¸ƒå¼ID<sup>1</sup></a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/" style="font-size: 0.88rem;">åˆ†å¸ƒå¼é”<sup>1</sup></a><a href="/tags/%E5%8D%9A%E5%BC%88%E8%AE%BA/" style="font-size: 0.88rem;">åšå¼ˆè®º<sup>3</sup></a><a href="/tags/%E5%8F%B7%E6%AE%B5%E5%8F%91%E5%8F%B7%E5%99%A8/" style="font-size: 0.88rem;">å·æ®µå‘å·å™¨<sup>1</sup></a><a href="/tags/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" style="font-size: 0.88rem;">å¸¸è§é—®é¢˜<sup>6</sup></a><a href="/tags/%E6%8C%87%E6%95%B0%E9%80%80%E9%81%BF/" style="font-size: 0.88rem;">æŒ‡æ•°é€€é¿<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 0.88rem;">æ•°æ®åº“<sup>1</sup></a><a href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" style="font-size: 0.88rem;">æ¶ˆæ¯é˜Ÿåˆ—<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95%E6%8A%80%E5%B7%A7/" style="font-size: 0.88rem;">ç®—æ³•æŠ€å·§<sup>6</sup></a><a href="/tags/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/" style="font-size: 0.88rem;">ç³»ç»Ÿæ¶æ„<sup>5</sup></a><a href="/tags/%E7%BB%8F%E6%B5%8E%E5%AD%A6/" style="font-size: 0.88rem;">ç»æµå­¦<sup>4</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E5%8E%86%E5%8F%B2/" style="font-size: 0.88rem;">ç¼–ç¨‹å†å²<sup>8</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86/" style="font-size: 0.88rem;">ç¼–ç¨‹åŸç†<sup>31</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7/" style="font-size: 0.88rem;">ç¼–ç¨‹å·¥å…·<sup>1</sup></a><a href="/tags/%E8%81%8C%E5%9C%BA%E5%BF%83%E5%A3%B0/" style="font-size: 0.88rem;">èŒåœºå¿ƒå£°<sup>1</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/" style="font-size: 0.88rem;">è½¯ä»¶å·¥å…·<sup>2</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95%E7%BB%8F%E9%AA%8C/" style="font-size: 0.88rem;">é¢è¯•ç»éªŒ<sup>4</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶é€‰ä¸­æ–‡æœ¬</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>ç²˜è´´æ–‡æœ¬</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>å¼•ç”¨åˆ°è¯„è®º</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>å¤åˆ¶é“¾æ¥åœ°å€</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>å¤åˆ¶æ­¤å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>ä¸‹è½½æ­¤å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>æ–°çª—å£æ‰“å¼€å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>ç«™å†…æœç´¢</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>ç™¾åº¦æœç´¢</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>æ’­æ”¾éŸ³ä¹</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>åˆ‡æ¢åˆ°ä¸Šä¸€é¦–</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>æŸ¥çœ‹æ‰€æœ‰æ­Œæ›²</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶æ­Œå</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>éšä¾¿é€›é€›</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>åšå®¢åˆ†ç±»</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>æ–‡ç« æ ‡ç­¾</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶åœ°å€</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">å…³é—­çƒ­è¯„</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">æ·±è‰²æ¨¡å¼</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>è½‰ç‚ºç¹é«”</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.umd.js"></script><script src="/pluginsSrc/instant.page/instantpage.js" type="module"></script><script src="/pluginsSrc/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/pluginsSrc/node-snackbar/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script async data-pjax src="/pluginsSrc/anzhiyu-theme-static/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="/pluginsSrc/anzhiyu-theme-static/icon/ali_iconfont_css.css"><script defer="defer" id="fluttering_ribbon" mobile="true" src="/pluginsSrc/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><link rel="stylesheet" href="/pluginsSrc/anzhiyu-theme-static/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="/pluginsSrc/anzhiyu-blog-static/js/APlayer.min.js"></script><script src="/pluginsSrc/hexo-anzhiyu-music/assets/js/Meting2.min.js"></script><script src="/pluginsSrc/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="/pluginsSrc/anzhiyu-theme-static/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">é€šçŸ¥</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">ä½ å¥½å‘€</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>